---
title: Utilisation de plusieurs environnements dans ASP.NET Core
author: ardalis
description: "Découvrez comment ASP.NET Core fournit la prise en charge pour contrôler le comportement de l’application dans différents environnements."
keywords: "ASP.NET Core, les paramètres d’environnement, ASPNETCORE_ENVIRONMENT"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: b5bba985-be12-4464-9a01-df3599b2a6f1
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/environments
ms.openlocfilehash: 9127c3d7180422c0e3dbd813340dd485bf360c81
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/11/2018
---
# <a name="working-with-multiple-environments"></a><span data-ttu-id="4056a-104">Utilisation de plusieurs environnements</span><span class="sxs-lookup"><span data-stu-id="4056a-104">Working with multiple environments</span></span>

<span data-ttu-id="4056a-105">Par [Steve Smith](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="4056a-105">By [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="4056a-106">ASP.NET Core prend en charge pour contrôler le comportement de l’application dans différents environnements, tels que le développement, intermédiaire et de production.</span><span class="sxs-lookup"><span data-stu-id="4056a-106">ASP.NET Core provides support for controlling app behavior across multiple environments, such as development, staging, and production.</span></span> <span data-ttu-id="4056a-107">Variables d’environnement sont utilisées pour indiquer l’environnement d’exécution, ce qui permet de l’application doit être configuré pour cet environnement.</span><span class="sxs-lookup"><span data-stu-id="4056a-107">Environment variables are used to indicate the runtime environment, allowing the app to be configured for that environment.</span></span>

<span data-ttu-id="4056a-108">[Affichez ou téléchargez l’exemple de code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([procédure de téléchargement](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="4056a-108">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="development-staging-production"></a><span data-ttu-id="4056a-109">Développement, intermédiaires, Production</span><span class="sxs-lookup"><span data-stu-id="4056a-109">Development, Staging, Production</span></span>

<span data-ttu-id="4056a-110">ASP.NET Core fait référence à une variable d’environnement particulière, `ASPNETCORE_ENVIRONMENT` pour décrire l’environnement de l’application est en cours d’exécution dans.</span><span class="sxs-lookup"><span data-stu-id="4056a-110">ASP.NET Core references a particular environment variable, `ASPNETCORE_ENVIRONMENT` to describe the environment the application is currently running in.</span></span> <span data-ttu-id="4056a-111">Cette variable peut être définie à n’importe quelle valeur vous le souhaitez, mais trois valeurs sont utilisées par convention : `Development`, `Staging`, et `Production`.</span><span class="sxs-lookup"><span data-stu-id="4056a-111">This variable can be set to any value you like, but three values are used by convention: `Development`, `Staging`, and `Production`.</span></span> <span data-ttu-id="4056a-112">Vous trouverez ces valeurs utilisées dans les exemples et les modèles fournis avec ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="4056a-112">You will find these values used in the samples and templates provided with ASP.NET Core.</span></span>

<span data-ttu-id="4056a-113">Le paramètre actuel de l’environnement peut être détecté par programme à partir de dans votre application.</span><span class="sxs-lookup"><span data-stu-id="4056a-113">The current environment setting can be detected programmatically from within your application.</span></span> <span data-ttu-id="4056a-114">En outre, vous pouvez utiliser l’environnement [d’assistance de balise](../mvc/views/tag-helpers/index.md) à inclure certaines sections de votre [affichage](../mvc/views/index.md) en fonction de l’environnement d’application actuel.</span><span class="sxs-lookup"><span data-stu-id="4056a-114">In addition, you can use the Environment [tag helper](../mvc/views/tag-helpers/index.md) to include certain sections in your [view](../mvc/views/index.md) based on the current application environment.</span></span>

<span data-ttu-id="4056a-115">Remarque : Sur Windows et Mac OS, le nom de l’environnement spécifié respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="4056a-115">Note: On Windows and macOS, the specified environment name is case insensitive.</span></span> <span data-ttu-id="4056a-116">Si vous définissez la variable `Development` ou `development` ou `DEVELOPMENT` les résultats seront identiques.</span><span class="sxs-lookup"><span data-stu-id="4056a-116">Whether you set the variable to `Development` or `development` or `DEVELOPMENT` the results will be the same.</span></span> <span data-ttu-id="4056a-117">Toutefois, Linux est un **casse** système d’exploitation par défaut.</span><span class="sxs-lookup"><span data-stu-id="4056a-117">However, Linux is a **case sensitive** OS by default.</span></span> <span data-ttu-id="4056a-118">Variables d’environnement, les noms de fichiers et paramètres requièrent le respect de la casse.</span><span class="sxs-lookup"><span data-stu-id="4056a-118">Environment variables, file names and settings require case sensitivity.</span></span>

### <a name="development"></a><span data-ttu-id="4056a-119">Développement</span><span class="sxs-lookup"><span data-stu-id="4056a-119">Development</span></span>

<span data-ttu-id="4056a-120">Il s’agit de l’environnement utilisé lors du développement d’une application.</span><span class="sxs-lookup"><span data-stu-id="4056a-120">This should be the environment used when developing an application.</span></span> <span data-ttu-id="4056a-121">Il est généralement utilisé pour activer les fonctionnalités que vous ne souhaitez pas être disponibles lors de l’exécution de l’application en production, telles que la [page d’exception developer](xref:fundamentals/error-handling#the-developer-exception-page).</span><span class="sxs-lookup"><span data-stu-id="4056a-121">It is typically used to enable features that you wouldn't want to be available when the app runs in production, such as the [developer exception page](xref:fundamentals/error-handling#the-developer-exception-page).</span></span>

<span data-ttu-id="4056a-122">Si vous utilisez Visual Studio, l’environnement peut être configuré dans le profil de débogage de votre projet.</span><span class="sxs-lookup"><span data-stu-id="4056a-122">If you're using Visual Studio, the environment can be configured in your project's debug profiles.</span></span> <span data-ttu-id="4056a-123">Déboguer des profils de spécifier le [server](xref:fundamentals/servers/index) à utiliser lors du lancement de l’application et les variables d’environnement à définir.</span><span class="sxs-lookup"><span data-stu-id="4056a-123">Debug profiles specify the [server](xref:fundamentals/servers/index) to use when launching the application and any environment variables to be set.</span></span> <span data-ttu-id="4056a-124">Votre projet peut avoir plusieurs profils de débogage qui définissent des variables d’environnement différemment.</span><span class="sxs-lookup"><span data-stu-id="4056a-124">Your project can have multiple debug profiles that set environment variables differently.</span></span> <span data-ttu-id="4056a-125">Gestion de ces profils à l’aide de la **déboguer** onglet de de votre projet application web **propriétés** menu.</span><span class="sxs-lookup"><span data-stu-id="4056a-125">You manage these profiles by using the **Debug** tab of your web application project's **Properties** menu.</span></span> <span data-ttu-id="4056a-126">Les valeurs que vous définissez dans les propriétés du projet sont conservées dans le *launchSettings.json* fichier et vous pouvez également configurer des profils en modifiant ce fichier directement.</span><span class="sxs-lookup"><span data-stu-id="4056a-126">The values you set in project properties are persisted in the *launchSettings.json* file, and you can also configure profiles by editing that file directly.</span></span>

<span data-ttu-id="4056a-127">Le profil pour IIS Express est illustré ici :</span><span class="sxs-lookup"><span data-stu-id="4056a-127">The profile for IIS Express is shown here:</span></span>

![Variables d’environnement de définition de propriétés de projet](environments/_static/project-properties-debug.png)

<span data-ttu-id="4056a-129">Voici un `launchSettings.json` fichier qui inclut les profils pour `Development` et `Staging`:</span><span class="sxs-lookup"><span data-stu-id="4056a-129">Here is a `launchSettings.json` file that includes profiles for `Development` and `Staging`:</span></span>

[!code-json[Main](../fundamentals/environments/sample/src/Environments/Properties/launchSettings.json?highlight=15,22)]

<span data-ttu-id="4056a-130">Modifications apportées aux profils de projet ne peuvent pas prennent effet qu’après le redémarrage du serveur web utilisé (en particulier, Kestrel doit être redémarré avant qu’il détecte les modifications apportées à son environnement).</span><span class="sxs-lookup"><span data-stu-id="4056a-130">Changes made to project profiles may not take effect until the web server used is restarted (in particular, Kestrel must be restarted before it will detect changes made to its environment).</span></span>

>[!WARNING]
> <span data-ttu-id="4056a-131">Variables d’environnement stockée dans *launchSettings.json* ne sont pas sécurisés de quelque manière et fera partie du référentiel de code source pour votre projet, si vous utilisez un.</span><span class="sxs-lookup"><span data-stu-id="4056a-131">Environment variables stored in *launchSettings.json* are not secured in any way and will be part of the source code repository for your project, if you use one.</span></span> <span data-ttu-id="4056a-132">**Ne stockez jamais les informations d’identification ou d’autres données secrètes dans ce fichier.**</span><span class="sxs-lookup"><span data-stu-id="4056a-132">**Never store credentials or other secret data in this file.**</span></span> <span data-ttu-id="4056a-133">Si vous avez besoin d’un emplacement pour stocker ces données, utilisez la *Secret Manager* outil décrit dans [stockage sécurisé des secrets d’application pendant le développement](xref:security/app-secrets).</span><span class="sxs-lookup"><span data-stu-id="4056a-133">If you need a place to store such data, use the *Secret Manager* tool described in [Safe storage of app secrets during development](xref:security/app-secrets).</span></span>

### <a name="staging"></a><span data-ttu-id="4056a-134">Mise en lots</span><span class="sxs-lookup"><span data-stu-id="4056a-134">Staging</span></span>

<span data-ttu-id="4056a-135">Par convention, un `Staging` environnement est un environnement de préproduction utilisé pour le test final avant le déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="4056a-135">By convention, a `Staging` environment is a pre-production environment used for final testing before deployment to production.</span></span> <span data-ttu-id="4056a-136">Dans l’idéal, les caractéristiques physiques doivent refléter celui de production, afin que tous les problèmes qui peuvent survenir en production figurer en premier dans l’environnement intermédiaire, où ils peuvent être traités sans impact sur les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="4056a-136">Ideally, its physical characteristics should mirror that of production, so that any issues that may arise in production occur first in the staging environment, where they can be addressed without impact to users.</span></span>

### <a name="production"></a><span data-ttu-id="4056a-137">Production</span><span class="sxs-lookup"><span data-stu-id="4056a-137">Production</span></span>

<span data-ttu-id="4056a-138">Le `Production` environnement est l’environnement dans lequel s’exécute l’application quand elle est active et utilisée par les utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="4056a-138">The `Production` environment is the environment in which the application runs when it is live and being used by end users.</span></span> <span data-ttu-id="4056a-139">Cet environnement doit être configuré pour optimiser la sécurité, performances et la robustesse de l’application.</span><span class="sxs-lookup"><span data-stu-id="4056a-139">This environment should be configured to maximize security, performance, and application robustness.</span></span> <span data-ttu-id="4056a-140">Certains paramètres courants susceptibles de présenter un environnement de production qui seraient diffèrent de développement incluent :</span><span class="sxs-lookup"><span data-stu-id="4056a-140">Some common settings that a production environment might have that would differ from development include:</span></span>

* <span data-ttu-id="4056a-141">Activer la mise en cache</span><span class="sxs-lookup"><span data-stu-id="4056a-141">Turn on caching</span></span>

* <span data-ttu-id="4056a-142">Assurez-vous que toutes les ressources côté client sont fournies, réduire, potentiellement pris en charge à partir d’un CDN</span><span class="sxs-lookup"><span data-stu-id="4056a-142">Ensure all client-side resources are bundled, minified, and potentially served from a CDN</span></span>

* <span data-ttu-id="4056a-143">Désactiver le diagnostic ErrorPages</span><span class="sxs-lookup"><span data-stu-id="4056a-143">Turn off diagnostic ErrorPages</span></span>

* <span data-ttu-id="4056a-144">Activer les pages d’erreur convivial</span><span class="sxs-lookup"><span data-stu-id="4056a-144">Turn on friendly error pages</span></span>

* <span data-ttu-id="4056a-145">Activer la journalisation et de surveillance de production (par exemple, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span><span class="sxs-lookup"><span data-stu-id="4056a-145">Enable production logging and monitoring (for example, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span></span>

<span data-ttu-id="4056a-146">Il n’est pas destiné à être une liste complète.</span><span class="sxs-lookup"><span data-stu-id="4056a-146">This is by no means meant to be a complete list.</span></span> <span data-ttu-id="4056a-147">Il est préférable d’éviter la diffusion des vérifications de l’environnement dans de nombreuses parties de votre application.</span><span class="sxs-lookup"><span data-stu-id="4056a-147">It's best to avoid scattering environment checks in many parts of your application.</span></span> <span data-ttu-id="4056a-148">Au lieu de cela, l’approche recommandée consiste à effectuer ces vérifications au sein de l’application `Startup` classes chaque fois que possible</span><span class="sxs-lookup"><span data-stu-id="4056a-148">Instead, the recommended approach is to perform such checks within the application's `Startup` class(es) wherever possible</span></span>

## <a name="setting-the-environment"></a><span data-ttu-id="4056a-149">Configuration de l’environnement</span><span class="sxs-lookup"><span data-stu-id="4056a-149">Setting the environment</span></span>

<span data-ttu-id="4056a-150">La méthode de configuration de l’environnement dépend du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="4056a-150">The method for setting the environment depends on the operating system.</span></span>

### <a name="windows"></a><span data-ttu-id="4056a-151">Windows</span><span class="sxs-lookup"><span data-stu-id="4056a-151">Windows</span></span>
<span data-ttu-id="4056a-152">Pour définir le `ASPNETCORE_ENVIRONMENT` pour la session active, si l’application est démarrée à l’aide de `dotnet run`, les commandes suivantes sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="4056a-152">To set the `ASPNETCORE_ENVIRONMENT` for the current session, if the app is started using `dotnet run`, the following commands are used</span></span>

<span data-ttu-id="4056a-153">**Ligne de commande**</span><span class="sxs-lookup"><span data-stu-id="4056a-153">**Command line**</span></span>
```
set ASPNETCORE_ENVIRONMENT=Development
```
<span data-ttu-id="4056a-154">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="4056a-154">**PowerShell**</span></span>
```
$Env:ASPNETCORE_ENVIRONMENT = "Development"
```

<span data-ttu-id="4056a-155">Ces commandes prennent effet uniquement pour la fenêtre active.</span><span class="sxs-lookup"><span data-stu-id="4056a-155">These commands take effect only for the current window.</span></span> <span data-ttu-id="4056a-156">Lorsque la fenêtre est fermée, le paramètre ASPNETCORE_ENVIRONMENT rétablit le paramètre par défaut ou la valeur de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="4056a-156">When the window is closed, the ASPNETCORE_ENVIRONMENT setting reverts to the default setting or machine value.</span></span> <span data-ttu-id="4056a-157">Pour définir la valeur globalement à l’ouverture de Windows le **le panneau de configuration** > **système** > **les paramètres système avancés** et ajouter ou modifier le `ASPNETCORE_ENVIRONMENT` valeur.</span><span class="sxs-lookup"><span data-stu-id="4056a-157">In order to set the value globally on Windows open the **Control Panel** > **System** > **Advanced system settings** and add or edit the `ASPNETCORE_ENVIRONMENT` value.</span></span>

![Les propriétés avancées de système](environments/_static/systemsetting_environment.png)

![Variable d’environnement ASPNET Core](environments/_static/windows_aspnetcore_environment.png) 

<span data-ttu-id="4056a-160">**Web.config**</span><span class="sxs-lookup"><span data-stu-id="4056a-160">**web.config**</span></span>

<span data-ttu-id="4056a-161">Consultez le *définition des variables d’environnement* section de la [référence de configuration ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) rubrique.</span><span class="sxs-lookup"><span data-stu-id="4056a-161">See the *Setting environment variables* section of the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) topic.</span></span>

<span data-ttu-id="4056a-162">**Par Pool d’applications IIS**</span><span class="sxs-lookup"><span data-stu-id="4056a-162">**Per IIS Application Pool**</span></span>

<span data-ttu-id="4056a-163">Si vous devez définir des variables d’environnement pour des applications qui s’exécutent dans des pools d’applications isolés (prise en charge sur IIS 10.0+), consultez la section *Commande AppCmd.exe* de la rubrique [Variables d’environnement \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) dans la documentation de référence IIS.</span><span class="sxs-lookup"><span data-stu-id="4056a-163">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

### <a name="macos"></a><span data-ttu-id="4056a-164">MacOS</span><span class="sxs-lookup"><span data-stu-id="4056a-164">macOS</span></span>
<span data-ttu-id="4056a-165">Définition l’environnement actuel pour macOS peut être effectuée en ligne lors de l’exécution de l’application ;</span><span class="sxs-lookup"><span data-stu-id="4056a-165">Setting the current environment for macOS can be done in-line when running the application;</span></span>

```bash
ASPNETCORE_ENVIRONMENT=Development dotnet run
```
<span data-ttu-id="4056a-166">ou à l’aide de `export` pour la définir avant d’exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="4056a-166">or using `export` to set it prior to running the app.</span></span>

```bash
export ASPNETCORE_ENVIRONMENT=Development
``` 
<span data-ttu-id="4056a-167">Variables d’environnement au niveau machine sont définies le *.bashrc* ou *.bash_profile* fichier.</span><span class="sxs-lookup"><span data-stu-id="4056a-167">Machine level environment variables are set in the *.bashrc*  or *.bash_profile* file.</span></span> <span data-ttu-id="4056a-168">Modifiez le fichier à l’aide de n’importe quel éditeur de texte et ajoutez l’instruction suivante.</span><span class="sxs-lookup"><span data-stu-id="4056a-168">Edit the file using any text editor and add the following statment.</span></span>

```
export ASPNETCORE_ENVIRONMENT=Development
```  

### <a name="linux"></a><span data-ttu-id="4056a-169">Linux</span><span class="sxs-lookup"><span data-stu-id="4056a-169">Linux</span></span>
<span data-ttu-id="4056a-170">Pour les versions de Linux, utilisez le `export` commande à la ligne de commande pour la session en fonction des paramètres de variable et *bash_profile* fichier pour les paramètres d’environnement au niveau ordinateur.</span><span class="sxs-lookup"><span data-stu-id="4056a-170">For Linux distros, use the `export` command at the command line for session based variable settings and *bash_profile* file for machine level environment settings.</span></span>

## <a name="determining-the-environment-at-runtime"></a><span data-ttu-id="4056a-171">Détermination de l’environnement lors de l’exécution</span><span class="sxs-lookup"><span data-stu-id="4056a-171">Determining the environment at runtime</span></span>

<span data-ttu-id="4056a-172">Le `IHostingEnvironment` service fournit l’abstraction de base pour l’utilisation des environnements.</span><span class="sxs-lookup"><span data-stu-id="4056a-172">The `IHostingEnvironment` service provides the core abstraction for working with environments.</span></span> <span data-ttu-id="4056a-173">Ce service est fourni par ASP.NET héberge de couche et peuvent être injectées dans votre logique de démarrage via [Injection de dépendance](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="4056a-173">This service is provided by the ASP.NET hosting layer, and can be injected into your startup logic via [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="4056a-174">Le modèle de site web ASP.NET Core dans Visual Studio utilise cette approche pour charger des fichiers de configuration spécifiques à l’environnement (le cas échéant) et pour personnaliser la gestion des paramètres des erreurs de l’application.</span><span class="sxs-lookup"><span data-stu-id="4056a-174">The ASP.NET Core web site template in Visual Studio uses this approach to load environment-specific configuration files (if present) and to customize the app's error handling settings.</span></span> <span data-ttu-id="4056a-175">Dans les deux cas, ce comportement est obtenu en faisant référence à l’environnement spécifié actuellement en appelant `EnvironmentName` ou `IsEnvironment` sur l’instance de `IHostingEnvironment` passé dans la méthode appropriée.</span><span class="sxs-lookup"><span data-stu-id="4056a-175">In both cases, this behavior is achieved by referring to the currently specified environment by calling `EnvironmentName` or `IsEnvironment` on the instance of `IHostingEnvironment` passed into the appropriate method.</span></span>

> [!NOTE]
> <span data-ttu-id="4056a-176">Si vous avez besoin vérifier si l’application s’exécute dans un environnement spécifique, utilisez `env.IsEnvironment("environmentname")` , car il ignore la casse correctement (au lieu de vérifier si `env.EnvironmentName == "Development"` par exemple).</span><span class="sxs-lookup"><span data-stu-id="4056a-176">If you need to check whether the application is running in a particular environment, use `env.IsEnvironment("environmentname")` since it will correctly ignore case (instead of checking if `env.EnvironmentName == "Development"` for example).</span></span>

<span data-ttu-id="4056a-177">Par exemple, vous pouvez utiliser le code suivant dans votre méthode de configuration pour configurer la gestion d’erreur spécifique environnement :</span><span class="sxs-lookup"><span data-stu-id="4056a-177">For example, you can use the following code in your Configure method to setup environment specific error handling:</span></span>

[!code-csharp[Main](environments/sample/src/Environments/Startup.cs?range=19-30)]

<span data-ttu-id="4056a-178">Si l’application s’exécute dans un `Development` environnement, puis il permet la prise en charge du runtime nécessaire pour utiliser la fonctionnalité « BrowserLink » dans Visual Studio, les pages d’erreur spécifique au développement (qui doivent exécute généralement pas être en production) et erreur de base de données spéciale pages (qui fournissent un moyen d’appliquer des migrations et doivent donc uniquement être utilisées dans le développement).</span><span class="sxs-lookup"><span data-stu-id="4056a-178">If the app is running in a `Development` environment, then it enables the runtime support necessary to use the "BrowserLink" feature in Visual Studio, development-specific error pages (which typically should not be run in production) and special database error pages (which provide a way to apply migrations and should therefore only be used in development).</span></span> <span data-ttu-id="4056a-179">Sinon, si l’application n’est pas en cours d’exécution dans un environnement de développement, une page de gestion d’erreur standard est configurée pour être affichées en réponse à toutes les exceptions non gérées.</span><span class="sxs-lookup"><span data-stu-id="4056a-179">Otherwise, if the app is not running in a development environment, a standard error handling page is configured to be displayed in response to any unhandled exceptions.</span></span>

<span data-ttu-id="4056a-180">Vous devrez peut-être déterminer le contenu à envoyer au client lors de l’exécution, en fonction de l’environnement actuel.</span><span class="sxs-lookup"><span data-stu-id="4056a-180">You may need to determine which content to send to the client at runtime, depending on the current environment.</span></span> <span data-ttu-id="4056a-181">Par exemple, dans un environnement de développement vous généralement servez non réduites de scripts et les feuilles de style, ce qui rend le débogage.</span><span class="sxs-lookup"><span data-stu-id="4056a-181">For example, in a development environment you generally serve non-minimized scripts and style sheets, which makes debugging easier.</span></span> <span data-ttu-id="4056a-182">Les environnements de production et de test doivent traiter les versions réduites et généralement depuis un CDN.</span><span class="sxs-lookup"><span data-stu-id="4056a-182">Production and test environments should serve the minified versions and generally from a CDN.</span></span> <span data-ttu-id="4056a-183">Ce faire, vous pouvez utiliser l’environnement [d’assistance de balise](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="4056a-183">You can do this using the Environment [tag helper](../mvc/views/tag-helpers/intro.md).</span></span> <span data-ttu-id="4056a-184">L’assistance de balise d’environnement qui restitue le contenu si l’environnement actuel correspond à l’un environnements spécifiés à l’aide de la `names` attribut.</span><span class="sxs-lookup"><span data-stu-id="4056a-184">The Environment tag helper will only render its contents if the current environment matches one of the environments specified using the `names` attribute.</span></span>

[!code-html[Main](environments/sample/src/Environments/Views/Shared/_Layout.cshtml?range=13-22)]

<span data-ttu-id="4056a-185">Mise en route à l’aide de programmes d’assistance de balise dans votre application, consultez [Introduction aux programmes d’assistance de balise](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="4056a-185">To get started with using tag helpers in your application see [Introduction to Tag Helpers](../mvc/views/tag-helpers/intro.md).</span></span>

## <a name="startup-conventions"></a><span data-ttu-id="4056a-186">Conventions de démarrage</span><span class="sxs-lookup"><span data-stu-id="4056a-186">Startup conventions</span></span>

<span data-ttu-id="4056a-187">ASP.NET Core prend en charge une approche basée sur une convention à la configuration de démarrage d’une application basé sur l’environnement actuel.</span><span class="sxs-lookup"><span data-stu-id="4056a-187">ASP.NET Core supports a convention-based approach to configuring an application's startup based on the current environment.</span></span> <span data-ttu-id="4056a-188">Vous pouvez également programmer contrôler comment votre application comporte conformément à l’environnement dans lequel il se trouve, ce qui vous permet de créer et gérer vos propres conventions.</span><span class="sxs-lookup"><span data-stu-id="4056a-188">You can also programmatically control how your application behaves according to which environment it is in, allowing you to create and manage your own conventions.</span></span>

<span data-ttu-id="4056a-189">Démarrage d’une application ASP.NET Core, la `Startup` classe est utilisée pour démarrer l’application, ses paramètres de configuration, un etc. de charge ([en savoir plus sur ASP.NET démarrage](startup.md)).</span><span class="sxs-lookup"><span data-stu-id="4056a-189">When an ASP.NET Core application starts, the `Startup` class is used to bootstrap the application, load its configuration settings, etc. ([learn more about ASP.NET startup](startup.md)).</span></span> <span data-ttu-id="4056a-190">Toutefois, s’il existe une classe nommée `Startup{EnvironmentName}` (par exemple `StartupDevelopment`) et le `ASPNETCORE_ENVIRONMENT` variable d’environnement correspondant à ce nom, puis qui `Startup` classe est utilisée à la place.</span><span class="sxs-lookup"><span data-stu-id="4056a-190">However, if a class exists named `Startup{EnvironmentName}` (for example `StartupDevelopment`), and the `ASPNETCORE_ENVIRONMENT` environment variable matches that name, then that `Startup` class is used instead.</span></span> <span data-ttu-id="4056a-191">Par conséquent, vous pouvez configurer `Startup` pour le développement, mais ils présentent un distinct `StartupProduction` qui seraient utilisés lors de l’application est exécutée en production.</span><span class="sxs-lookup"><span data-stu-id="4056a-191">Thus, you could configure `Startup` for development, but have a separate `StartupProduction` that would be used when the app is run in production.</span></span> <span data-ttu-id="4056a-192">Ou vice versa.</span><span class="sxs-lookup"><span data-stu-id="4056a-192">Or vice versa.</span></span>

> [!NOTE]
> <span data-ttu-id="4056a-193">Appel de `WebHostBuilder.UseStartup<TStartup>()` remplace les sections de configuration.</span><span class="sxs-lookup"><span data-stu-id="4056a-193">Calling `WebHostBuilder.UseStartup<TStartup>()` overrides configuration sections.</span></span>

<span data-ttu-id="4056a-194">Outre l’utilisation totalement distincts `Startup` classe basée sur l’environnement actuel, vous pouvez également effectuer des ajustements à la configuration de l’application dans un `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="4056a-194">In addition to using an entirely separate `Startup` class based on the current environment, you can also make adjustments to how the application is configured within a `Startup` class.</span></span> <span data-ttu-id="4056a-195">Le `Configure()` et `ConfigureServices()` méthodes prennent en charge des versions spécifiques à l’environnement similaire à la `Startup` classe proprement dite, sous la forme `Configure{EnvironmentName}()` et `Configure{EnvironmentName}Services()`.</span><span class="sxs-lookup"><span data-stu-id="4056a-195">The `Configure()` and `ConfigureServices()` methods support environment-specific versions similar to the `Startup` class itself, of the form `Configure{EnvironmentName}()` and `Configure{EnvironmentName}Services()`.</span></span> <span data-ttu-id="4056a-196">Si vous définissez une méthode `ConfigureDevelopment()` elle sera appelée à la place de `Configure()` lorsque l’environnement est configuré pour le développement.</span><span class="sxs-lookup"><span data-stu-id="4056a-196">If you define a method `ConfigureDevelopment()` it will be called instead of `Configure()` when the environment is set to development.</span></span> <span data-ttu-id="4056a-197">De même, `ConfigureDevelopmentServices()` est appelée à la place de `ConfigureServices()` dans le même environnement.</span><span class="sxs-lookup"><span data-stu-id="4056a-197">Likewise, `ConfigureDevelopmentServices()` would be called instead of `ConfigureServices()` in the same environment.</span></span>

## <a name="summary"></a><span data-ttu-id="4056a-198">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="4056a-198">Summary</span></span>

<span data-ttu-id="4056a-199">ASP.NET Core fournit un certain nombre de conventions qui permettent aux développeurs de facilement contrôler le comportement de leurs applications dans différents environnements.</span><span class="sxs-lookup"><span data-stu-id="4056a-199">ASP.NET Core provides a number of features and conventions that allow developers to easily control how their applications behave in different environments.</span></span> <span data-ttu-id="4056a-200">Lorsque vous publiez une application à partir de développement dans l’environnement intermédiaire en production, variables d’environnement définies correctement pour l’environnement autoriser pour l’optimisation de l’application pour utiliser le débogage, de test ou de production, comme il convient.</span><span class="sxs-lookup"><span data-stu-id="4056a-200">When publishing an application from development to staging to production, environment variables set appropriately for the environment allow for optimization of the application for debugging, testing, or production use, as appropriate.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="4056a-201">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="4056a-201">Additional Resources</span></span>

* [<span data-ttu-id="4056a-202">Configuration</span><span class="sxs-lookup"><span data-stu-id="4056a-202">Configuration</span></span>](xref:fundamentals/configuration/index)

* [<span data-ttu-id="4056a-203">Introduction aux Tag Helpers</span><span class="sxs-lookup"><span data-stu-id="4056a-203">Introduction to Tag Helpers</span></span>](../mvc/views/tag-helpers/intro.md)
