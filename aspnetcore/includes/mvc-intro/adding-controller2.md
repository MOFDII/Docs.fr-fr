<span data-ttu-id="db782-101">Remplacez le contenu de *Controllers/HelloWorldController.cs* par ceci :</span><span class="sxs-lookup"><span data-stu-id="db782-101">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]

<span data-ttu-id="db782-102">Chaque méthode `public` d’un contrôleur peut être appelée en tant que point de terminaison HTTP.</span><span class="sxs-lookup"><span data-stu-id="db782-102">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="db782-103">Dans l’exemple ci-dessus, les deux méthodes retournent une chaîne.</span><span class="sxs-lookup"><span data-stu-id="db782-103">In the sample above, both methods return a string.</span></span>  <span data-ttu-id="db782-104">Notez les commentaires qui précèdent chaque méthode.</span><span class="sxs-lookup"><span data-stu-id="db782-104">Note the comments preceding each method.</span></span>

<span data-ttu-id="db782-105">Un point de terminaison HTTP est une URL qui peut être ciblée dans l’application web, comme `http://localhost:1234/HelloWorld`, et qui combine le protocole utilisé : `HTTP`, l’emplacement réseau du serveur web (avec le port TCP) : `localhost:1234` et l’URI cible `HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="db782-105">An HTTP endpoint is a targetable URL in the web application, such as `http://localhost:1234/HelloWorld`, and combines the protocol used: `HTTP`, the network location of the web server (including the TCP port): `localhost:1234` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="db782-106">Le premier commentaire indique qu’il s’agit d’une méthode [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) qui est appelée en ajoutant « /HelloWorld/ » à l’URL de base.</span><span class="sxs-lookup"><span data-stu-id="db782-106">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that is invoked by appending "/HelloWorld/" to the base URL.</span></span> <span data-ttu-id="db782-107">Le second commentaire spécifie qu’il s’agit d’une méthode [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) qui est appelée en ajoutant « /HelloWorld/Welcome/ » à l’URL.</span><span class="sxs-lookup"><span data-stu-id="db782-107">The second comment specifies an [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that is invoked by appending "/HelloWorld/Welcome/" to the URL.</span></span> <span data-ttu-id="db782-108">Plus loin dans ce didacticiel, vous utilisez le moteur de génération de modèles automatique pour générer des méthodes `HTTP POST`.</span><span class="sxs-lookup"><span data-stu-id="db782-108">Later on in the tutorial you'll use the scaffolding engine to generate `HTTP POST` methods.</span></span>

<span data-ttu-id="db782-109">Exécutez l’application en mode de non-débogage et ajoutez « HelloWorld » au chemin dans la barre d’adresse.</span><span class="sxs-lookup"><span data-stu-id="db782-109">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="db782-110">La méthode `Index` retourne une chaîne.</span><span class="sxs-lookup"><span data-stu-id="db782-110">The `Index` method returns a string.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application à l’action This is my default](../../tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="db782-112">MVC appelle les classes du contrôleur (et les méthodes d’action au sein de celles-ci) en fonction de l’URL entrante.</span><span class="sxs-lookup"><span data-stu-id="db782-112">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="db782-113">La [logique de routage d’URL](../../mvc/controllers/routing.md) par défaut utilisée par le modèle MVC utilise un format comme celui-ci pour déterminer le code à appeler :</span><span class="sxs-lookup"><span data-stu-id="db782-113">The default [URL routing logic](../../mvc/controllers/routing.md) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="db782-114">Vous définissez le format pour le routage dans la méthode `Configure` du fichier *Startup.cs*.</span><span class="sxs-lookup"><span data-stu-id="db782-114">You set the format for routing in the `Configure` method in *Startup.cs* file.</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="db782-115">Quand vous exécutez l’application et que vous ne fournissez aucun segment d’URL, sa valeur par défaut est le contrôleur « Home » et la méthode « Index » spécifiée dans la ligne du modèle mise en surbrillance ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="db782-115">When you run the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="db782-116">Le premier segment d’URL détermine la classe du contrôleur à exécuter.</span><span class="sxs-lookup"><span data-stu-id="db782-116">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="db782-117">Ainsi, `localhost:xxxx/HelloWorld` est mappé à la classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="db782-117">So `localhost:xxxx/HelloWorld` maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="db782-118">La seconde partie du segment d’URL détermine la méthode d’action sur la classe.</span><span class="sxs-lookup"><span data-stu-id="db782-118">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="db782-119">Ainsi, `localhost:xxxx/HelloWorld/Index` provoque l’exécution de la méthode `Index` de la classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="db782-119">So `localhost:xxxx/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="db782-120">Notez que vous n’avez eu qu’à accéder à `localhost:xxxx/HelloWorld` pour que la méthode `Index` soit appelée par défaut.</span><span class="sxs-lookup"><span data-stu-id="db782-120">Notice that you only had to browse to `localhost:xxxx/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="db782-121">La raison en est que `Index` est la méthode par défaut qui est appelée sur un contrôleur si un nom de méthode n’est pas explicitement spécifié.</span><span class="sxs-lookup"><span data-stu-id="db782-121">This is because `Index` is the default method that will be called on a controller if a method name is not explicitly specified.</span></span> <span data-ttu-id="db782-122">La troisième partie du segment d’URL (`id`) concerne les données de routage.</span><span class="sxs-lookup"><span data-stu-id="db782-122">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="db782-123">Les données de routage sont présentées plus loin dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="db782-123">You'll see route data later on in this tutorial.</span></span>

<span data-ttu-id="db782-124">Accédez à `http://localhost:xxxx/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="db782-124">Browse to `http://localhost:xxxx/HelloWorld/Welcome`.</span></span> <span data-ttu-id="db782-125">La méthode `Welcome` s’exécute et retourne la chaîne « This is the Welcome action method... ».</span><span class="sxs-lookup"><span data-stu-id="db782-125">The `Welcome` method runs and returns the string "This is the Welcome action method...".</span></span> <span data-ttu-id="db782-126">Pour cette URL, le contrôleur est `HelloWorld`, et `Welcome` est la méthode d’action.</span><span class="sxs-lookup"><span data-stu-id="db782-126">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="db782-127">Vous n’avez pas encore utilisé la partie `[Parameters]` de l’URL.</span><span class="sxs-lookup"><span data-stu-id="db782-127">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![Fenêtre de navigateur montrant une réponse de la méthode d’action « This is the Welcome action »](../../tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="db782-129">Modifiez le code pour passer des informations sur les paramètres de l’URL au contrôleur.</span><span class="sxs-lookup"><span data-stu-id="db782-129">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="db782-130">Par exemple, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span><span class="sxs-lookup"><span data-stu-id="db782-130">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="db782-131">Modifiez la méthode `Welcome` en y incluant les deux paramètres, comme indiqué dans le code suivant.</span><span class="sxs-lookup"><span data-stu-id="db782-131">Change the `Welcome` method to include two parameters as shown in the following code.</span></span> 

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]

<span data-ttu-id="db782-132">Le code précédent :</span><span class="sxs-lookup"><span data-stu-id="db782-132">The preceding code:</span></span>

* <span data-ttu-id="db782-133">Utilise la fonctionnalité de paramètre facultatif de C# pour indiquer que le paramètre `numTimes` a 1 comme valeur par défaut si aucune valeur n’est passée pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="db782-133">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span>
* <span data-ttu-id="db782-134">Utilise `HtmlEncoder.Default.Encode` pour protéger l’application des entrées malveillantes (à savoir JavaScript).</span><span class="sxs-lookup"><span data-stu-id="db782-134">Uses`HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span> 
* <span data-ttu-id="db782-135">Utilise des [chaînes interpolées](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings)</span><span class="sxs-lookup"><span data-stu-id="db782-135">Uses [Interpolated Strings](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span></span>

<span data-ttu-id="db782-136">Exécutez votre application et accédez à :</span><span class="sxs-lookup"><span data-stu-id="db782-136">Run your app and browse to:</span></span>

   `http://localhost:xxxx/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="db782-137">(Remplacez xxxx par votre numéro de port.) Vous pouvez essayer différentes valeurs pour `name` et `numtimes` dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="db782-137">(Replace xxxx with your port number.) You can try different values for `name` and `numtimes` in  the URL.</span></span> <span data-ttu-id="db782-138">Le système de [liaison de données](../../mvc/models/model-binding.md) du modèle MVC mappe automatiquement les paramètres nommés provenant de la chaîne de requête dans la barre d’adresse aux paramètres de votre méthode.</span><span class="sxs-lookup"><span data-stu-id="db782-138">The MVC [model binding](../../mvc/models/model-binding.md) system automatically maps the named parameters from  the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="db782-139">Pour plus d’informations, consultez [Liaison de données](../../mvc/models/model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="db782-139">See [Model Binding](../../mvc/models/model-binding.md) for more information.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application « Hello Rick, NumTimes is: 4 »](../../tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="db782-141">Dans l’image ci-dessus, le segment d’URL (`Parameters`) n’est pas utilisé, les paramètres `name` et `numTimes` sont passés en tant que [chaînes de requête](https://wikipedia.org/wiki/Query_string).</span><span class="sxs-lookup"><span data-stu-id="db782-141">In the image above, the URL segment (`Parameters`) is not used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="db782-142">Le `?` (point d’interrogation) dans l’URL ci-dessus est un séparateur, qui est suivi des chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="db782-142">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="db782-143">Le caractère `&` sépare les chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="db782-143">The `&` character separates query strings.</span></span>

<span data-ttu-id="db782-144">Remplacez la méthode `Welcome` par le code suivant :</span><span class="sxs-lookup"><span data-stu-id="db782-144">Replace the `Welcome` method with the following code:</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]

<span data-ttu-id="db782-145">Exécutez l’application et entrez l’URL suivante : `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="db782-145">Run the app and enter the following URL:  `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span></span>

![Fenêtre de navigateur montrant une réponse de l’application « Hello Rick, ID: 3 »](../../tutorials/first-mvc-app/adding-controller/_static/rick_routedata.png)

<span data-ttu-id="db782-147">Cette fois, le troisième segment de l’URL correspondait au paramètre de routage `id`.</span><span class="sxs-lookup"><span data-stu-id="db782-147">This time the third URL segment  matched the route parameter `id`.</span></span> <span data-ttu-id="db782-148">La méthode `Welcome` contient un paramètre `id` qui correspondait au modèle d’URL de la méthode `MapRoute`.</span><span class="sxs-lookup"><span data-stu-id="db782-148">The `Welcome`  method contains a parameter  `id` that matched the URL template in the `MapRoute` method.</span></span> <span data-ttu-id="db782-149">Le `?` de fin (dans `id?`) indique que le paramètre `id` est facultatif.</span><span class="sxs-lookup"><span data-stu-id="db782-149">The trailing `?`  (in `id?`) indicates the `id` parameter is optional.</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="db782-150">Dans ces exemples, le contrôleur a fait la partie « VC » du modèle MVC, autrement dit, la vue et le contrôleur fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="db782-150">In these examples the controller has been doing the "VC" portion  of MVC - that is, the view and controller work.</span></span> <span data-ttu-id="db782-151">Le contrôleur retourne directement du HTML.</span><span class="sxs-lookup"><span data-stu-id="db782-151">The controller is returning HTML  directly.</span></span> <span data-ttu-id="db782-152">En règle générale, vous ne souhaitez pas que les contrôleurs retournent directement du HTML, car le codage et la maintenance deviennent dans ce cas très laborieux.</span><span class="sxs-lookup"><span data-stu-id="db782-152">Generally you don't want controllers returning HTML directly, since  that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="db782-153">Au lieu de cela, vous utilisez généralement un fichier de modèle de vue Razor distinct pour faciliter la génération de la réponse HTML.</span><span class="sxs-lookup"><span data-stu-id="db782-153">Instead you typically use a separate Razor view template file to help generate the HTML response.</span></span> <span data-ttu-id="db782-154">Vous faites cela dans le didacticiel suivant.</span><span class="sxs-lookup"><span data-stu-id="db782-154">You do that in the next tutorial.</span></span>
