---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
title: "Déploiement des appartenances aux rôles de base de données dans les environnements de Test | Documents Microsoft"
author: jrjlee
description: "Cette rubrique décrit comment ajouter des comptes d’utilisateurs aux rôles de base de données dans le cadre d’un déploiement de solution pour un environnement de test. Lorsque vous déployez une solution contenant..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 9b2af539-7ad9-47aa-b66e-873bd9906e79
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
msc.type: authoredcontent
ms.openlocfilehash: ac780c6cd522f9216cafe3b5f23772ef6ebf5d11
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/10/2017
---
<a name="deploying-database-role-memberships-to-test-environments"></a><span data-ttu-id="e17de-104">Déploiement des appartenances aux rôles de base de données dans les environnements de Test</span><span class="sxs-lookup"><span data-stu-id="e17de-104">Deploying Database Role Memberships to Test Environments</span></span>
====================
<span data-ttu-id="e17de-105">par [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="e17de-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="e17de-106">Télécharger le PDF</span><span class="sxs-lookup"><span data-stu-id="e17de-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="e17de-107">Cette rubrique décrit comment ajouter des comptes d’utilisateurs aux rôles de base de données dans le cadre d’un déploiement de solution pour un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="e17de-107">This topic describes how to add user accounts to database roles as part of a solution deployment to a test environment.</span></span>
> 
> <span data-ttu-id="e17de-108">Lorsque vous déployez une solution contenant un projet de base de données dans un environnement intermédiaire ou de production, vous ne souhaitez généralement que le développeur pour automatiser l’ajout de comptes d’utilisateurs aux rôles de base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-108">When you deploy a solution containing a database project to a staging or production environment, you typically don't want the developer to automate the addition of user accounts to database roles.</span></span> <span data-ttu-id="e17de-109">Dans la plupart des cas, le développeur ne sont pas informés les comptes d’utilisateur doivent être ajoutés pour les rôles de base de données, et ces exigences peuvent changer à tout moment.</span><span class="sxs-lookup"><span data-stu-id="e17de-109">In most cases, the developer won't know which user accounts need to be added to which database roles, and these requirements could change at any time.</span></span> <span data-ttu-id="e17de-110">Toutefois, lorsque vous déployez une solution contenant un projet de base de données pour un développement ou l’environnement de test, la situation est généralement différente :</span><span class="sxs-lookup"><span data-stu-id="e17de-110">However, when you deploy a solution containing a database project to a development or test environment, the situation is usually rather different:</span></span>
> 
> - <span data-ttu-id="e17de-111">Le développeur généralement déploie de nouveau la solution sur une base régulière, souvent plusieurs fois par jour.</span><span class="sxs-lookup"><span data-stu-id="e17de-111">The developer typically re-deploys the solution on a regular basis, often several times a day.</span></span>
> - <span data-ttu-id="e17de-112">La base de données est généralement recréé sur chaque déploiement, ce qui signifie que les utilisateurs de base de données doivent être créés et ajoutés aux rôles après chaque déploiement.</span><span class="sxs-lookup"><span data-stu-id="e17de-112">The database is typically re-created on every deployment, which means that database users must be created and added to roles after every deployment.</span></span>
> - <span data-ttu-id="e17de-113">Le développeur a généralement un contrôle total sur l’environnement de développement ou de test cible.</span><span class="sxs-lookup"><span data-stu-id="e17de-113">The developer typically has full control over the target development or test environment.</span></span>
> 
> <span data-ttu-id="e17de-114">Dans ce scénario, il est souvent bénéfique automatiquement créer les utilisateurs de base de données et affecter des appartenances aux rôles de base de données dans le cadre du processus de déploiement.</span><span class="sxs-lookup"><span data-stu-id="e17de-114">In this scenario, it's often beneficial to automatically create database users and assign database role memberships as part of the deployment process.</span></span>
> 
> <span data-ttu-id="e17de-115">Le facteur clé est que cette opération doit être conditionnel en fonction de l’environnement cible.</span><span class="sxs-lookup"><span data-stu-id="e17de-115">The key factor is that this operation needs to be conditional based on the target environment.</span></span> <span data-ttu-id="e17de-116">Si vous déployez vers un intermédiaire ou d’un environnement de production, vous souhaitez ignorer l’opération.</span><span class="sxs-lookup"><span data-stu-id="e17de-116">If you're deploying to a staging or a production environment, you want to skip the operation.</span></span> <span data-ttu-id="e17de-117">Si vous effectuez un déploiement à un développeur ou l’environnement de test, que vous souhaitez déployer des appartenances de rôle sans autre intervention.</span><span class="sxs-lookup"><span data-stu-id="e17de-117">If you're deploying to a developer or test environment, you want to deploy role memberships without further intervention.</span></span> <span data-ttu-id="e17de-118">Cette rubrique décrit une approche, que vous pouvez utiliser pour relever ce défi.</span><span class="sxs-lookup"><span data-stu-id="e17de-118">This topic describes one approach you can use to address this challenge.</span></span>


<span data-ttu-id="e17de-119">Cette rubrique fait partie d’une série de didacticiels basées sur les spécifications de déploiement d’entreprise d’une société fictive nommée Fabrikam, Inc. Cette série de didacticiels utilise un exemple de solution l’a & #x 2014 ; le [solution Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014 ; pour représenter une application web avec un niveau réaliste de complexité, y compris une application ASP.NET MVC 3, Windows Service de communication Foundation (WCF) et un projet de base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="e17de-120">La méthode de déploiement au cœur de ces didacticiels est basée sur l’approche de fichier de projet de fractionnement décrite dans [présentation du fichier de projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md), dans lequel le processus de génération est contrôlé par deux fichiers de & projet #x 2014 ; un contenant les instructions qui s’appliquent à chaque environnement de destination et celui qui contient les paramètres de génération et de déploiement spécifiques à l’environnement de génération.</span><span class="sxs-lookup"><span data-stu-id="e17de-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="e17de-121">Au moment de la génération, le fichier de projet spécifique à un environnement est fusionné dans le fichier de projet d’indépendant de l’environnement pour former un ensemble complet d’instructions de génération.</span><span class="sxs-lookup"><span data-stu-id="e17de-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="e17de-122">Vue d’ensemble de la tâche</span><span class="sxs-lookup"><span data-stu-id="e17de-122">Task Overview</span></span>

<span data-ttu-id="e17de-123">Cette rubrique suppose que :</span><span class="sxs-lookup"><span data-stu-id="e17de-123">This topic assumes that:</span></span>

- <span data-ttu-id="e17de-124">Vous utilisez l’approche de fichier de projet de fractionnement pour le déploiement de solutions, comme décrit dans [présentation du fichier de projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="e17de-124">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="e17de-125">Vous appelez VSDBCMD à partir du fichier projet pour déployer votre projet de base de données, comme décrit dans [comprendre le processus de génération](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="e17de-125">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="e17de-126">Pour créer des utilisateurs de base de données et affecter des appartenances aux rôles lorsque vous déployez un projet de base de données vers un environnement de test, vous devez :</span><span class="sxs-lookup"><span data-stu-id="e17de-126">To create database users and assign role memberships when you deploy a database project to a test environment, you'll need to:</span></span>

- <span data-ttu-id="e17de-127">Créer un script Transact Structured Query Language (Transact-SQL) qui apporte des modifications de la base de données nécessaires.</span><span class="sxs-lookup"><span data-stu-id="e17de-127">Create a Transact Structured Query Language (Transact-SQL) script that makes the necessary database changes.</span></span>
- <span data-ttu-id="e17de-128">Création d’une cible de Microsoft Build Engine (MSBuild) qui utilise l’utilitaire sqlcmd.exe pour exécuter le script SQL.</span><span class="sxs-lookup"><span data-stu-id="e17de-128">Create a Microsoft Build Engine (MSBuild) target that uses the sqlcmd.exe utility to run the SQL script.</span></span>
- <span data-ttu-id="e17de-129">Configurez vos fichiers projet pour appeler la cible lorsque vous déployez votre solution vers un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="e17de-129">Configure your project files to invoke the target when you're deploying your solution to a test environment.</span></span>

<span data-ttu-id="e17de-130">Cette rubrique vous indique comment effectuer chacune de ces procédures.</span><span class="sxs-lookup"><span data-stu-id="e17de-130">This topic will show you how to perform each of these procedures.</span></span>

## <a name="scripting-the-database-role-memberships"></a><span data-ttu-id="e17de-131">Les appartenances aux rôles de base de données de script</span><span class="sxs-lookup"><span data-stu-id="e17de-131">Scripting the Database Role Memberships</span></span>

<span data-ttu-id="e17de-132">Vous pouvez créer un script Transact-SQL dans un grand nombre de façons différentes, et dans n’importe quel emplacement que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="e17de-132">You can create a Transact-SQL script in a lot of different ways, and in any location you choose.</span></span> <span data-ttu-id="e17de-133">La plus simple consiste à créer le script au sein de votre solution dans Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="e17de-133">The easiest approach is to create the script within your solution in Visual Studio 2010.</span></span>

<span data-ttu-id="e17de-134">**Pour créer un script SQL**</span><span class="sxs-lookup"><span data-stu-id="e17de-134">**To create a SQL script**</span></span>

1. <span data-ttu-id="e17de-135">Dans le **l’Explorateur de solutions** fenêtre, développez le nœud de votre projet de base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-135">In the **Solution Explorer** window, expand your database project node.</span></span>
2. <span data-ttu-id="e17de-136">Avec le bouton droit le **Scripts** dossier, pointez sur **ajouter**, puis cliquez sur **nouveau dossier**.</span><span class="sxs-lookup"><span data-stu-id="e17de-136">Right-click the **Scripts** folder, point to **Add**, and then click **New Folder**.</span></span>
3. <span data-ttu-id="e17de-137">Type **Test** comme nom de dossier, puis appuyez sur ENTRÉE.</span><span class="sxs-lookup"><span data-stu-id="e17de-137">Type **Test** as the folder name, and then press Enter.</span></span>
4. <span data-ttu-id="e17de-138">Cliquez sur le **Test** dossier, pointez sur **ajouter**, puis cliquez sur **Script**.</span><span class="sxs-lookup"><span data-stu-id="e17de-138">Right-click the **Test** folder, point to **Add**, and then click **Script**.</span></span>
5. <span data-ttu-id="e17de-139">Dans le **ajouter un nouvel élément** boîte de dialogue zone, donnez un nom significatif à votre script (par exemple, **AddRoleMemberships.sql**), puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="e17de-139">In the **Add New Item** dialog box, give your script a meaningful name (for example, **AddRoleMemberships.sql**), and then click **Add**.</span></span>

    ![](deploying-database-role-memberships-to-test-environments/_static/image1.png)
6. <span data-ttu-id="e17de-140">Dans le *AddRoleMemberships.sql* , ajoutez les instructions Transact-SQL qui :</span><span class="sxs-lookup"><span data-stu-id="e17de-140">In the *AddRoleMemberships.sql* file, add Transact-SQL statements that:</span></span>

    1. <span data-ttu-id="e17de-141">Créez un utilisateur de base de données pour la connexion SQL Server qui accéder à votre base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-141">Create a database user for the SQL Server login that will access your database.</span></span>
    2. <span data-ttu-id="e17de-142">Ajoutez l’utilisateur de base de données pour tous les rôles de base de données requis.</span><span class="sxs-lookup"><span data-stu-id="e17de-142">Add the database user to any required database roles.</span></span>
7. <span data-ttu-id="e17de-143">Le fichier doit ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="e17de-143">The file should resemble this:</span></span>

    [!code-sql[Main](deploying-database-role-memberships-to-test-environments/samples/sample1.sql)]
8. <span data-ttu-id="e17de-144">Enregistrez le fichier.</span><span class="sxs-lookup"><span data-stu-id="e17de-144">Save the file.</span></span>

## <a name="executing-the-script-on-the-target-database"></a><span data-ttu-id="e17de-145">L’exécution du Script sur la base de données cible</span><span class="sxs-lookup"><span data-stu-id="e17de-145">Executing the Script on the Target Database</span></span>

<span data-ttu-id="e17de-146">Dans l’idéal, vous exécuterez les scripts Transact-SQL requises dans le cadre d’un script de post-déploiement lorsque vous déployez votre projet de base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-146">Ideally, you'd run any required Transact-SQL scripts as part of a post-deployment script when you deploy your database project.</span></span> <span data-ttu-id="e17de-147">Toutefois, les scripts de post-déploiement ne vous permettent pas d’exécuter la logique conditionnelle basée sur les configurations de solution ou des propriétés de génération.</span><span class="sxs-lookup"><span data-stu-id="e17de-147">However, post-deployment scripts don't allow you to execute logic conditionally based on solution configurations or build properties.</span></span> <span data-ttu-id="e17de-148">L’alternative consiste à exécuter vos scripts SQL directement dans le fichier de projet MSBuild, en créant un **cible** élément qui exécute une commande sqlcmd.exe.</span><span class="sxs-lookup"><span data-stu-id="e17de-148">The alternative is to run your SQL scripts directly from the MSBuild project file, by creating a **Target** element that executes a sqlcmd.exe command.</span></span> <span data-ttu-id="e17de-149">Vous pouvez utiliser cette commande pour exécuter votre script sur la base de données cible :</span><span class="sxs-lookup"><span data-stu-id="e17de-149">You can use this command to run your script on the target database:</span></span>


[!code-console[Main](deploying-database-role-memberships-to-test-environments/samples/sample2.cmd)]


> [!NOTE]
> <span data-ttu-id="e17de-150">Pour plus d’informations sur les options de ligne de commande sqlcmd, consultez [utilitaire sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="e17de-150">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>


<span data-ttu-id="e17de-151">Avant de vous incorporez cette commande dans une cible MSBuild, vous devez envisager les conditions dans lesquelles vous souhaitez que le script à exécuter :</span><span class="sxs-lookup"><span data-stu-id="e17de-151">Before you embed this command in an MSBuild target, you need to consider under what conditions you want the script to run:</span></span>

- <span data-ttu-id="e17de-152">La base de données cible doit exister avant de modifier ses appartenances aux rôles.</span><span class="sxs-lookup"><span data-stu-id="e17de-152">The target database must exist before you change its role memberships.</span></span> <span data-ttu-id="e17de-153">Par conséquent, vous devez exécuter ce script *après* le déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-153">As such, you need to run this script *after* the database deployment.</span></span>
- <span data-ttu-id="e17de-154">Vous devez inclure une condition afin que le script est exécuté uniquement pour les environnements de test.</span><span class="sxs-lookup"><span data-stu-id="e17de-154">You need to include a condition so that the script is only executed for test environments.</span></span>
- <span data-ttu-id="e17de-155">Si vous exécutez un déploiement « que se passe-t-il si » et le #x 2014 ; en d’autres termes, si vous utilisez la génération de scripts de déploiement, mais pas en cours d’exécution les & #x 2014 ; vous ne devez pas exécuter le script SQL.</span><span class="sxs-lookup"><span data-stu-id="e17de-155">If you're running a "what if" deployment&#x2014;in other words, if you're generating deployment scripts but not actually running them&#x2014;you shouldn't run the SQL script.</span></span>

<span data-ttu-id="e17de-156">Si vous utilisez l’approche de fichier de projet de fractionnement décrite dans [présentation du fichier de projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md), comme illustré dans l’exemple de solution de gestionnaire de contacts, vous pouvez fractionner les instructions de génération pour votre script SQL comme suit :</span><span class="sxs-lookup"><span data-stu-id="e17de-156">If you're using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), as demonstrated by the Contact Manager sample solution, you can split the build instructions for your SQL script like this:</span></span>

- <span data-ttu-id="e17de-157">Les requis des propriétés spécifiques à l’environnement, ainsi que la propriété qui détermine s’il faut déployer des autorisations, doit être placé dans le fichier de projet spécifique à l’environnement (par exemple, *Env-Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="e17de-157">Any required environment-specific properties, together with the property that determines whether to deploy permissions, should go in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>
- <span data-ttu-id="e17de-158">La cible MSBuild, ainsi que toutes les propriétés qui ne change pas entre les environnements de destination, doit être placé dans le fichier projet universel (par exemple, *Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="e17de-158">The MSBuild target itself, together with any properties that will not change between destination environments, should go in the universal project file (for example, *Publish.proj*).</span></span>

<span data-ttu-id="e17de-159">Dans le fichier de projet spécifique à un environnement, vous devez définir le nom du serveur de base de données, le nom de la base de données cible et une propriété booléenne qui permet à l’utilisateur de spécifier si vous souhaitez déployer les appartenances aux rôles.</span><span class="sxs-lookup"><span data-stu-id="e17de-159">In the environment-specific project file, you need to define the database server name, the target database name, and a Boolean property that lets the user specify whether to deploy role memberships.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample3.xml)]


<span data-ttu-id="e17de-160">Dans le fichier de projet d’application universelle, vous devez fournir l’emplacement de l’exécutable sqlcmd et de l’emplacement du script SQL à exécuter.</span><span class="sxs-lookup"><span data-stu-id="e17de-160">In the universal project file, you need to provide the location of the sqlcmd executable and the location of the SQL script you want to run.</span></span> <span data-ttu-id="e17de-161">Ces propriétés reste le même quelle que soit l’environnement de destination.</span><span class="sxs-lookup"><span data-stu-id="e17de-161">These properties will remain the same regardless of the destination environment.</span></span> <span data-ttu-id="e17de-162">Vous devez également créer une cible de MSBuild pour exécuter la commande sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="e17de-162">You also need to create an MSBuild target to execute the sqlcmd command.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample4.xml)]


<span data-ttu-id="e17de-163">Notez que vous ajoutez l’emplacement de l’exécutable sqlcmd une propriété statique, comme cela peut être utile à d’autres cibles.</span><span class="sxs-lookup"><span data-stu-id="e17de-163">Notice that you add the location of the sqlcmd executable as a static property, as this could be useful to other targets.</span></span> <span data-ttu-id="e17de-164">En revanche, définir l’emplacement de votre script SQL et la syntaxe de la commande sqlcmd en tant que propriétés dynamiques dans la cible, car elles ne seront pas requis avant l’exécution de la cible.</span><span class="sxs-lookup"><span data-stu-id="e17de-164">In contrast, you define the location of your SQL script and the syntax of the sqlcmd command as dynamic properties within the target, as they will not be required before the target is executed.</span></span> <span data-ttu-id="e17de-165">Dans ce cas, le **DeployTestDBPermissions** cible sera exécutée uniquement si ces conditions sont remplies :</span><span class="sxs-lookup"><span data-stu-id="e17de-165">In this case, the **DeployTestDBPermissions** target will only be executed if these conditions are met:</span></span>

- <span data-ttu-id="e17de-166">Le **DeployTestDBRoleMemberships** est définie sur **true**.</span><span class="sxs-lookup"><span data-stu-id="e17de-166">The **DeployTestDBRoleMemberships** property is set to **true**.</span></span>
- <span data-ttu-id="e17de-167">L’utilisateur n’a pas spécifié un **WhatIf = true** indicateur.</span><span class="sxs-lookup"><span data-stu-id="e17de-167">The user hasn't specified a **WhatIf=true** flag.</span></span>

<span data-ttu-id="e17de-168">Enfin, n’oubliez pas d’appeler la cible.</span><span class="sxs-lookup"><span data-stu-id="e17de-168">Finally, don't forget to invoke the target.</span></span> <span data-ttu-id="e17de-169">Dans le *Publish.proj* fichier, faire cela, ajoutez la cible à la liste des dépendances pour la valeur par défaut **FullPublish** cible.</span><span class="sxs-lookup"><span data-stu-id="e17de-169">In the *Publish.proj* file, you can do this by adding the target to the dependency list for the default **FullPublish** target.</span></span> <span data-ttu-id="e17de-170">Vous devez vous assurer que le **DeployTestDBPermissions** cible n’est pas exécutée tant que la **PublishDbPackages** cible a été exécutée.</span><span class="sxs-lookup"><span data-stu-id="e17de-170">You need to ensure that the **DeployTestDBPermissions** target is not executed until the **PublishDbPackages** target has been executed.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample5.xml)]


## <a name="conclusion"></a><span data-ttu-id="e17de-171">Conclusion</span><span class="sxs-lookup"><span data-stu-id="e17de-171">Conclusion</span></span>

<span data-ttu-id="e17de-172">Cette rubrique décrit une façon dans laquelle vous pouvez ajouter des utilisateurs de base de données et les appartenances aux rôles comme une action de post-déploiement lorsque vous déployez un projet de base de données.</span><span class="sxs-lookup"><span data-stu-id="e17de-172">This topic described one way in which you can add database users and role memberships as a post-deployment action when you deploy a database project.</span></span> <span data-ttu-id="e17de-173">Cela est généralement utile lorsque vous recréer régulièrement une base de données dans un environnement de test, mais il doit généralement être évitée lorsque vous déployez des bases de données dans les environnements de production ou intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="e17de-173">This is typically useful when you regularly re-create a database in a test environment, but it should usually be avoided when you deploy databases to staging or production environments.</span></span> <span data-ttu-id="e17de-174">Par conséquent, vous devez vous assurer que vous utilisez la logique conditionnelle nécessaire afin que les utilisateurs de base de données et les appartenances aux rôles sont créés uniquement lorsqu’il convient de le faire.</span><span class="sxs-lookup"><span data-stu-id="e17de-174">As such, you should ensure that you use the necessary conditional logic so that database users and role memberships are only created when it's appropriate to do so.</span></span>

## <a name="further-reading"></a><span data-ttu-id="e17de-175">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="e17de-175">Further Reading</span></span>

<span data-ttu-id="e17de-176">Pour plus d’informations sur l’utilisation de VSDBCMD pour déployer des projets de base de données, consultez [déploiement de projets de base de données](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="e17de-176">For more information on using VSDBCMD to deploy database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="e17de-177">Pour obtenir des conseils sur la personnalisation des déploiements de base de données pour les environnements cibles différentes, consultez [personnalisation des déploiements de base de données pour plusieurs environnements](customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="e17de-177">For guidance on customizing database deployments for different target environments, see [Customizing Database Deployments for Multiple Environments](customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="e17de-178">Pour plus d’informations sur l’utilisation des fichiers projet MSBuild personnalisés pour contrôler le processus de déploiement, consultez [présentation du fichier de projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md) et [comprendre le processus de génération](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="e17de-178">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="e17de-179">Pour plus d’informations sur les options de ligne de commande sqlcmd, consultez [utilitaire sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="e17de-179">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="e17de-180">[Précédent](customizing-database-deployments-for-multiple-environments.md)
[Suivant](deploying-membership-databases-to-enterprise-environments.md)</span><span class="sxs-lookup"><span data-stu-id="e17de-180">[Previous](customizing-database-deployments-for-multiple-environments.md)
[Next](deploying-membership-databases-to-enterprise-environments.md)</span></span>
