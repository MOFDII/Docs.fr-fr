---
uid: web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
title: À l’aide de dépendances de Cache SQL (c#) | Documents Microsoft
author: rick-anderson
description: La stratégie de mise en cache la plus simple consiste à autoriser les données mises en cache expirent après une période spécifiée. Mais cette approche simple signifie que le données mises en cache maintai...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/30/2007
ms.topic: article
ms.assetid: 0e91842c-7f10-4aed-8c23-4ee3e2774014
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
msc.type: authoredcontent
ms.openlocfilehash: 8660fd979b5f18ed0182c8ae1e671f362f5dec7e
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30877981"
---
<a name="using-sql-cache-dependencies-c"></a><span data-ttu-id="ed9a4-104">À l’aide de dépendances de Cache SQL (c#)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-104">Using SQL Cache Dependencies (C#)</span></span>
====================
<span data-ttu-id="ed9a4-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ed9a4-106">[Télécharger le Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) ou [télécharger le PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) or [Download PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span></span>

> <span data-ttu-id="ed9a4-107">La stratégie de mise en cache la plus simple consiste à autoriser les données mises en cache expirent après une période spécifiée.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-107">The simplest caching strategy is to allow cached data to expire after a specified period of time.</span></span> <span data-ttu-id="ed9a4-108">Mais cette approche simple signifie que les données mises en cache ne conservent aucune association avec sa source de données sous-jacente, aboutissant à des données obsolètes sont conservées trop longtemps ou les données en cours sont arrivé à expiration trop tôt.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-108">But this simple approach means that the cached data maintains no association with its underlying data source, resulting in stale data that is held too long or current data that is expired too soon.</span></span> <span data-ttu-id="ed9a4-109">Une meilleure approche consiste à utiliser la classe SqlCacheDependency afin que les données restent en mémoire cache jusqu'à ce que ses données sous-jacentes ont été modifiées dans la base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-109">A better approach is to use the SqlCacheDependency class so that data remains cached until its underlying data has been modified in the SQL database.</span></span> <span data-ttu-id="ed9a4-110">Ce didacticiel vous montre comment.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-110">This tutorial shows you how.</span></span>


## <a name="introduction"></a><span data-ttu-id="ed9a4-111">Introduction</span><span class="sxs-lookup"><span data-stu-id="ed9a4-111">Introduction</span></span>

<span data-ttu-id="ed9a4-112">Les techniques de mise en cache est examiné dans le [mise en cache des données avec ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) et [mise en cache des données dans l’Architecture](caching-data-in-the-architecture-cs.md) didacticiels utilisé une expiration basée sur une heure pour supprimer les données à partir du cache après avoir spécifié période.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-112">The caching techniques examined in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) and [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorials used a time-based expiry to evict the data from the cache after a specified period.</span></span> <span data-ttu-id="ed9a4-113">Cette approche est la façon la plus simple pour équilibrer les gains de performance de mise en cache contre l’obsolescence des données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-113">This approach is the simplest way to balance the performance gains of caching against data staleness.</span></span> <span data-ttu-id="ed9a4-114">En sélectionnant une expiration du temps de *x* secondes, un développeur de pages concedes pour profiter des avantages de performances de mise en cache uniquement pour *x* secondes, mais peut compter que les ses données ne seront jamais obsolètes dépasse le maximum de *x* secondes.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-114">By selecting a time expiry of *x* seconds, a page developer concedes to enjoy the performance benefits of caching for only *x* seconds, but can rest easy that her data will never be stale longer than a maximum of *x* seconds.</span></span> <span data-ttu-id="ed9a4-115">Bien entendu, pour les données statiques, *x* peut être étendu à la durée de vie de l’application web, a été examinée dans le [mise en cache des données au démarrage de l’Application](caching-data-at-application-startup-cs.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-115">Of course, for static data, *x* can be extended to the lifetime of the web application, as was examined in the [Caching Data at Application Startup](caching-data-at-application-startup-cs.md) tutorial.</span></span>

<span data-ttu-id="ed9a4-116">Lors de la mise en cache de la base de données, une expiration basée sur le temps est généralement utilisée pour sa facilité d’utilisation, mais est généralement une solution inadéquate.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-116">When caching database data, a time-based expiry is often chosen for its ease of use but is frequently an inadequate solution.</span></span> <span data-ttu-id="ed9a4-117">Dans l’idéal, la base de données reste en mémoire cache jusqu'à ce que les données sous-jacentes ont été modifiées dans la base de données ; alors seulement est supprimé du cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-117">Ideally, the database data would remain cached until the underlying data has been modified in the database; only then would the cache be evicted.</span></span> <span data-ttu-id="ed9a4-118">Cette approche optimise les avantages de performances de mise en cache et réduit la durée des données périmées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-118">This approach maximizes the performance benefits of caching and minimizes the duration of stale data.</span></span> <span data-ttu-id="ed9a4-119">Toutefois, pour profiter de ces avantages il doit être un système en place qui sait lorsque la base de données sous-jacente a été modifiée et supprime les éléments correspondants à partir du cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-119">However, in order to enjoy these benefits there must be some system in place that knows when the underlying database data has been modified and evicts the corresponding items from the cache.</span></span> <span data-ttu-id="ed9a4-120">Avant d’ASP.NET 2.0, les développeurs de pages ont été chargés de l’implémentation de ce système.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-120">Prior to ASP.NET 2.0, page developers were responsible for implementing this system.</span></span>

<span data-ttu-id="ed9a4-121">ASP.NET 2.0 fournit un [ `SqlCacheDependency` classe](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) et l’infrastructure nécessaire pour déterminer quand une modification s’est produite dans la base de données afin que les éléments correspondants mis en cache peut être supprimée.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-121">ASP.NET 2.0 provides a [`SqlCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) and the necessary infrastructure to determine when a change has occurred in the database so that the corresponding cached items can be evicted.</span></span> <span data-ttu-id="ed9a4-122">Il existe deux techniques pour déterminer quand les données sous-jacentes ont changé : notification et interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-122">There are two techniques for determining when the underlying data has changed: notification and polling.</span></span> <span data-ttu-id="ed9a4-123">Après avoir discuté les différences entre la notification et d’interrogation, nous allons créer l’infrastructure nécessaire pour prendre en charge l’interrogation et puis examiner comment utiliser la `SqlCacheDependency` classe déclarative et par programme des scénarios.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-123">After discussing the differences between notification and polling, we'll create the infrastructure necessary to support polling and then explore how to use the `SqlCacheDependency` class in declarative and programmatically scenarios.</span></span>

## <a name="understanding-notification-and-polling"></a><span data-ttu-id="ed9a4-124">L’interrogation et la présentation des notifications</span><span class="sxs-lookup"><span data-stu-id="ed9a4-124">Understanding Notification and Polling</span></span>

<span data-ttu-id="ed9a4-125">Il existe deux techniques qui peuvent être utilisés pour déterminer quand les données dans une base de données a été modifiées : notification et interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-125">There are two techniques that can be used to determine when the data in a database has been modified: notification and polling.</span></span> <span data-ttu-id="ed9a4-126">Avec notification, la base de données des alertes automatiquement le runtime ASP.NET lorsque les résultats d’une requête particulière ont été modifiés depuis la dernière exécution de la requête, à partir de laquelle les éléments mis en cache associés à la requête sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-126">With notification, the database automatically alerts the ASP.NET runtime when the results of a particular query have been changed since the query was last executed, at which point the cached items associated with the query are evicted.</span></span> <span data-ttu-id="ed9a4-127">Avec l’interrogation, le serveur de base de données conserve les informations sur quand des tables dernier mis à jour.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-127">With polling, the database server maintains information about when particular tables have last been updated.</span></span> <span data-ttu-id="ed9a4-128">Le runtime ASP.NET interroge régulièrement la base de données pour vérifier que les tableaux ont changé dans la mesure où ils ont été entrés dans le cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-128">The ASP.NET runtime periodically polls the database to check what tables have changed since they were entered into the cache.</span></span> <span data-ttu-id="ed9a4-129">Les tables dont les données ont été modifiées ont leurs éléments de cache associé supprimés.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-129">Those tables whose data has been modified have their associated cache items evicted.</span></span>

<span data-ttu-id="ed9a4-130">L’option de notification requiert moins d’installation que l’interrogation et est plus précise, car il suit les modifications apportées au niveau de la requête, plutôt qu’au niveau de la table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-130">The notification option requires less setup than polling and is more granular since it tracks changes at the query level rather than at the table level.</span></span> <span data-ttu-id="ed9a4-131">Malheureusement, les notifications sont uniquement disponibles dans les éditions complètes de Microsoft SQL Server 2005 (par exemple, les éditions non Express).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-131">Unfortunately, notifications are only available in the full editions of Microsoft SQL Server 2005 (i.e., the non-Express editions).</span></span> <span data-ttu-id="ed9a4-132">Toutefois, l’option d’interrogation peut être utilisée pour toutes les versions de Microsoft SQL Server 7.0 pour 2005.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-132">However, the polling option can be used for all versions of Microsoft SQL Server from 7.0 to 2005.</span></span> <span data-ttu-id="ed9a4-133">Étant donné que ces didacticiels utilisent l’édition Express de SQL Server 2005, nous allons nous concentrer sur la configuration et à l’aide de l’option d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-133">Since these tutorials use the Express edition of SQL Server 2005, we will focus on setting up and using the polling option.</span></span> <span data-ttu-id="ed9a4-134">Consultez la section davantage la lecture à la fin de ce didacticiel pour davantage de ressources sur les fonctionnalités de notification de SQL Server 2005 s.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-134">Consult the Further Reading section at the end of this tutorial for further resources on SQL Server 2005 s notification capabilities.</span></span>

<span data-ttu-id="ed9a4-135">Avec l’interrogation, la base de données doit être configuré pour inclure une table nommée `AspNet_SqlCacheTablesForChangeNotification` qui a trois colonnes - `tableName`, `notificationCreated`, et `changeId`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-135">With polling, the database must be configured to include a table named `AspNet_SqlCacheTablesForChangeNotification` that has three columns - `tableName`, `notificationCreated`, and `changeId`.</span></span> <span data-ttu-id="ed9a4-136">Cette table contient une ligne pour chaque table qui comporte des données qui doivent être utilisées dans une dépendance de cache SQL dans l’application web.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-136">This table contains a row for each table that has data that might need to be used in a SQL cache dependency in the web application.</span></span> <span data-ttu-id="ed9a4-137">Le `tableName` colonne indique le nom de la table lors de la `notificationCreated` indique les date et heure de la ligne a été ajoutée à la table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-137">The `tableName` column specifies the name of the table while `notificationCreated` indicates the date and time the row was added to the table.</span></span> <span data-ttu-id="ed9a4-138">Le `changeId` colonne est de type `int` et possède une valeur initiale de 0.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-138">The `changeId` column is of type `int` and has an initial value of 0.</span></span> <span data-ttu-id="ed9a4-139">Sa valeur est incrémentée à chaque modification de la table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-139">Its value is incremented with each modification to the table.</span></span>

<span data-ttu-id="ed9a4-140">Outre la `AspNet_SqlCacheTablesForChangeNotification` table, la base de données doit également inclure des déclencheurs sur chacune des tables qui peuvent apparaître dans une dépendance de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-140">In addition to the `AspNet_SqlCacheTablesForChangeNotification` table, the database also needs to include triggers on each of the tables that may appear in a SQL cache dependency.</span></span> <span data-ttu-id="ed9a4-141">Ces déclencheurs sont exécutés à chaque fois qu’une ligne est insérée, mise à jour ou supprimée et incrémenter la table s `changeId` valeur dans `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-141">These triggers are executed whenever a row is inserted, updated, or deleted and increment the table s `changeId` value in `AspNet_SqlCacheTablesForChangeNotification`.</span></span>

<span data-ttu-id="ed9a4-142">Le runtime ASP.NET effectue le suivi actuel `changeId` pour une table lors de la mise en cache de données à l’aide un `SqlCacheDependency` objet.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-142">The ASP.NET runtime tracks the current `changeId` for a table when caching data using a `SqlCacheDependency` object.</span></span> <span data-ttu-id="ed9a4-143">La base de données est régulièrement vérifiée et n’importe quel `SqlCacheDependency` objets dont `changeId` diffère de la valeur dans la base de données sont supprimés depuis une différentes `changeId` valeur indique qu’il a été une modification de la table, car les données a été mise en cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-143">The database is periodically checked and any `SqlCacheDependency` objects whose `changeId` differs from the value in the database are evicted since a differing `changeId` value indicates that there has been a change to the table since the data was cached.</span></span>

## <a name="step-1-exploring-theaspnetregsqlexecommand-line-program"></a><span data-ttu-id="ed9a4-144">Étape 1 : Explorer le`aspnet_regsql.exe`programme de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="ed9a4-144">Step 1: Exploring the`aspnet_regsql.exe`Command Line Program</span></span>

<span data-ttu-id="ed9a4-145">Avec l’approche d’interrogation de la base de données doit être configuré pour contenir l’infrastructure décrite ci-dessus : une table prédéfinie (`AspNet_SqlCacheTablesForChangeNotification`), un certain nombre de procédures stockées et les déclencheurs sur chacune des tables qui peuvent être utilisées dans les dépendances de cache SQL dans le site web application.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-145">With the polling approach the database must be setup to contain the infrastructure described above: a predefined table (`AspNet_SqlCacheTablesForChangeNotification`), a handful of stored procedures, and triggers on each of the tables that may be used in SQL cache dependencies in the web application.</span></span> <span data-ttu-id="ed9a4-146">Ces tables, les procédures stockées et les déclencheurs peuvent être créés via le programme de ligne de commande `aspnet_regsql.exe`, qui se trouve dans le `$WINDOWS$\Microsoft.NET\Framework\version` dossier.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-146">These tables, stored procedures, and triggers can be created through the command line program `aspnet_regsql.exe`, which is found in the `$WINDOWS$\Microsoft.NET\Framework\version` folder.</span></span> <span data-ttu-id="ed9a4-147">Pour créer le `AspNet_SqlCacheTablesForChangeNotification` table et des procédures stockées associées, exécutez la commande suivante à partir de la ligne de commande :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-147">To create the `AspNet_SqlCacheTablesForChangeNotification` table and associated stored procedures, run the following from the command line:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="ed9a4-148">Pour exécuter ces commandes de la connexion de base de données spécifiée doit être dans le [ `db_securityadmin` ](https://msdn.microsoft.com/library/ms188685.aspx) et [ `db_ddladmin` ](https://msdn.microsoft.com/library/ms190667.aspx) rôles.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-148">To execute these commands the specified database login must be in the [`db_securityadmin`](https://msdn.microsoft.com/library/ms188685.aspx) and [`db_ddladmin`](https://msdn.microsoft.com/library/ms190667.aspx) roles.</span></span> <span data-ttu-id="ed9a4-149">Pour examiner le T-SQL envoyé à la base de données par le `aspnet_regsql.exe` programme de ligne de commande, consultez [cette entrée de blog](http://scottonwriting.net/sowblog/posts/10709.aspx).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-149">To examine the T-SQL sent to the database by the `aspnet_regsql.exe` command line program, refer to [this blog entry](http://scottonwriting.net/sowblog/posts/10709.aspx).</span></span>


<span data-ttu-id="ed9a4-150">Par exemple, pour ajouter l’infrastructure pour l’interrogation à une base de données Microsoft SQL Server nommé `pubs` sur un serveur de base de données nommé `ScottsServer` à l’aide de l’authentification Windows, accédez au répertoire approprié et, à partir de la ligne de commande, entrez :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-150">For example, to add the infrastructure for polling to a Microsoft SQL Server database named `pubs` on a database server named `ScottsServer` using Windows Authentication, navigate to the appropriate directory and, from the command line, enter:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample2.cmd)]

<span data-ttu-id="ed9a4-151">Après avoir ajouté l’infrastructure de niveau base de données, nous devons ajouter les déclencheurs aux tables qui seront utilisées dans les dépendances de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-151">After the database-level infrastructure has been added, we need to add the triggers to those tables that will be used in SQL cache dependencies.</span></span> <span data-ttu-id="ed9a4-152">Utiliser le `aspnet_regsql.exe` programme de ligne de commande, mais spécifier le nom de table à l’aide de la `-t` basculer et au lieu d’utiliser le `-ed` basculer l’utilisation `-et`, comme suit :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-152">Use the `aspnet_regsql.exe` command line program again, but specify the table name using the `-t` switch and instead of using the `-ed` switch use `-et`, like so:</span></span>


[!code-html[Main](using-sql-cache-dependencies-cs/samples/sample3.html)]

<span data-ttu-id="ed9a4-153">Pour ajouter les déclencheurs à la `authors` et `titles` tables sur le `pubs` sur la base de données `ScottsServer`, utilisez :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-153">To add the triggers to the `authors` and `titles` tables on the `pubs` database on `ScottsServer`, use:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample4.cmd)]

<span data-ttu-id="ed9a4-154">Pour ce didacticiel, ajouter les déclencheurs à la `Products`, `Categories`, et `Suppliers` tables.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-154">For this tutorial add the triggers to the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="ed9a4-155">Nous allons nous intéresser à la syntaxe de ligne de commande particulier à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-155">We'll look at the particular command line syntax in Step 3.</span></span>

## <a name="step-2-referencing-a-microsoft-sql-server-2005-express-edition-database-inappdata"></a><span data-ttu-id="ed9a4-156">Étape 2 : Faisant référence à un Microsoft SQL Server 2005 Express Edition de base de données dans`App_Data`</span><span class="sxs-lookup"><span data-stu-id="ed9a4-156">Step 2: Referencing a Microsoft SQL Server 2005 Express Edition Database in`App_Data`</span></span>

<span data-ttu-id="ed9a4-157">Le `aspnet_regsql.exe` programme de ligne de commande nécessite le nom du serveur et de base de données afin d’ajouter l’infrastructure nécessaire d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-157">The `aspnet_regsql.exe` command line program requires the database and server name in order to add the necessary polling infrastructure.</span></span> <span data-ttu-id="ed9a4-158">Mais ce qui est le nom du serveur et de base de données pour une base de données Microsoft SQL Server 2005 Express qui se trouve dans le `App_Data` dossier ?</span><span class="sxs-lookup"><span data-stu-id="ed9a4-158">But what is the database and server name for a Microsoft SQL Server 2005 Express database that resides in the `App_Data` folder?</span></span> <span data-ttu-id="ed9a4-159">Au lieu de devoir découvrir quelles sont les noms de base de données et de serveur, je ve détecté que l’approche la plus simple pour attacher la base de données pour le `localhost\SQLExpress` instance de base de données et de renommer les données à l’aide [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-159">Rather than having to discover what the database and server names are, I ve found that the simplest approach is to attach the database to the `localhost\SQLExpress` database instance and rename the data using [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span></span> <span data-ttu-id="ed9a4-160">Si vous disposez d’une des versions complètes de SQL Server 2005 est installé sur votre ordinateur, puis probablement avoir déjà installé sur votre ordinateur de SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-160">If you have one of the full versions of SQL Server 2005 installed on your machine, then you likely already have SQL Server Management Studio installed on your computer.</span></span> <span data-ttu-id="ed9a4-161">Si vous avez uniquement l’édition Express, vous pouvez télécharger gratuitement le [Microsoft SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-161">If you only have the Express edition, you can download the free [Microsoft SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span></span>

<span data-ttu-id="ed9a4-162">Commencez par fermer Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-162">Start by closing Visual Studio.</span></span> <span data-ttu-id="ed9a4-163">Ensuite, ouvrez SQL Server Management Studio et choisissez se connecter à la `localhost\SQLExpress` serveur à l’aide de l’authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-163">Next, open SQL Server Management Studio and choose to connect to the `localhost\SQLExpress` server using Windows Authentication.</span></span>


![Attacher à la localhost\SQLExpress serveur](using-sql-cache-dependencies-cs/_static/image1.gif)

<span data-ttu-id="ed9a4-165">**Figure 1**: attacher le `localhost\SQLExpress` Server</span><span class="sxs-lookup"><span data-stu-id="ed9a4-165">**Figure 1**: Attach to the `localhost\SQLExpress` Server</span></span>


<span data-ttu-id="ed9a4-166">Après vous être connecté au serveur, Management Studio affiche le serveur et les sous-dossiers pour les bases de données, sécurité et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-166">After connecting to the server, Management Studio will show the server and have subfolders for the databases, security, and so forth.</span></span> <span data-ttu-id="ed9a4-167">Avec le bouton droit sur le dossier bases de données et choisissez l’option d’attachement.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-167">Right-click on the Databases folder and choose the Attach option.</span></span> <span data-ttu-id="ed9a4-168">Cela affiche la boîte de dialogue Attacher les bases de données boîte (voir Figure 2).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-168">This will bring up the Attach Databases dialog box (see Figure 2).</span></span> <span data-ttu-id="ed9a4-169">Cliquez sur le bouton Ajouter et sélectionnez le `NORTHWND.MDF` dossier de base de données dans votre s d’application web `App_Data` dossier.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-169">Click the Add button and select the `NORTHWND.MDF` database folder in your web application s `App_Data` folder.</span></span>


<span data-ttu-id="ed9a4-170">[![Attacher le fichier NORTHWND. MDF de base de données à partir du dossier App_Data](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-170">[![Attach the NORTHWND.MDF Database from the App_Data Folder](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span></span>

<span data-ttu-id="ed9a4-171">**Figure 2**: attacher le `NORTHWND.MDF` de la base de données à partir de la `App_Data` dossier ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-171">**Figure 2**: Attach the `NORTHWND.MDF` Database from the `App_Data` Folder ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image2.png))</span></span>


<span data-ttu-id="ed9a4-172">Cette opération ajoute la base de données dans le dossier de bases de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-172">This will add the database to the Databases folder.</span></span> <span data-ttu-id="ed9a4-173">Le nom de la base de données peut être le chemin d’accès complet au fichier de base de données ou le chemin d’accès complet séparé par un [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-173">The database name might be the full path to the database file or the full path prepended with a [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span></span> <span data-ttu-id="ed9a4-174">Pour éviter d’avoir à taper ce nom long de la base de données lorsque vous utilisez le compte aspnet\_outil de ligne de commande regsql.exe, renommer un nom plus convivial en cliquant simplement sur la base de données à la base de données attaché et en choisissant le renommer.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-174">To avoid having to type in this lengthy database name when using the aspnet\_regsql.exe command line tool, rename the database to a more human-friendly name by right-clicking on database just attached and choosing Rename.</span></span> <span data-ttu-id="ed9a4-175">Je ve renommé DataTutorials ma base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-175">I ve renamed my database to DataTutorials .</span></span>


![Renommer la base de données attachée à un nom plus convivial](using-sql-cache-dependencies-cs/_static/image3.gif)

<span data-ttu-id="ed9a4-177">**Figure 3**: renommer la base de données attachée à un nom plus convivial</span><span class="sxs-lookup"><span data-stu-id="ed9a4-177">**Figure 3**: Rename the Attached Database to a More Human-Friendly Name</span></span>


## <a name="step-3-adding-the-polling-infrastructure-to-the-northwind-database"></a><span data-ttu-id="ed9a4-178">Étape 3 : Ajout de l’Infrastructure d’interrogation de la base de données Northwind</span><span class="sxs-lookup"><span data-stu-id="ed9a4-178">Step 3: Adding the Polling Infrastructure to the Northwind Database</span></span>

<span data-ttu-id="ed9a4-179">Maintenant que nous avons attaché le `NORTHWND.MDF` de la base de données à partir de la `App_Data` dossier, nous re prêt à ajouter l’infrastructure d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-179">Now that we have attached the `NORTHWND.MDF` database from the `App_Data` folder, we re ready to add the polling infrastructure.</span></span> <span data-ttu-id="ed9a4-180">En supposant que vous avez déjà renommé la base de données DataTutorials, exécutez les quatre commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-180">Assuming that you ve renamed the database to DataTutorials, run the following four commands:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample5.cmd)]

<span data-ttu-id="ed9a4-181">Après avoir exécuté ces quatre commandes, avec le bouton droit sur le nom de la base de données dans Management Studio, accédez au sous-menu tâches et choisissez de détachement.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-181">After running these four commands, right-click on the database name in Management Studio, go to the Tasks submenu, and choose Detach.</span></span> <span data-ttu-id="ed9a4-182">Fermez Management Studio, puis rouvrez Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-182">Then close Management Studio and reopen Visual Studio.</span></span>

<span data-ttu-id="ed9a4-183">Une fois que Visual Studio a été rouvert, explorez la base de données via l’Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-183">Once Visual Studio has reopened, drill into the database through the Server Explorer.</span></span> <span data-ttu-id="ed9a4-184">Notez la nouvelle table (`AspNet_SqlCacheTablesForChangeNotification`), les nouvelles procédures stockées et les déclencheurs sur la `Products`, `Categories`, et `Suppliers` tables.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-184">Note the new table (`AspNet_SqlCacheTablesForChangeNotification`), the new stored procedures, and the triggers on the `Products`, `Categories`, and `Suppliers` tables.</span></span>


![La base de données inclut désormais l’Infrastructure nécessaire d’interrogation](using-sql-cache-dependencies-cs/_static/image4.gif)

<span data-ttu-id="ed9a4-186">**Figure 4**: la base de données inclut désormais l’Infrastructure nécessaire d’interrogation</span><span class="sxs-lookup"><span data-stu-id="ed9a4-186">**Figure 4**: The Database Now Includes the Necessary Polling Infrastructure</span></span>


## <a name="step-4-configuring-the-polling-service"></a><span data-ttu-id="ed9a4-187">Étape 4 : Configuration du Service d’interrogation</span><span class="sxs-lookup"><span data-stu-id="ed9a4-187">Step 4: Configuring the Polling Service</span></span>

<span data-ttu-id="ed9a4-188">Après avoir créé les tables nécessaires, les déclencheurs et les procédures stockées dans la base de données, l’étape finale consiste à configurer le service d’interrogation, ce qui est effectué par le biais `Web.config` en spécifiant les bases de données à utiliser et la fréquence d’interrogation en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-188">After creating the needed tables, triggers, and stored procedures in the database, the final step is to configure the polling service, which is done through `Web.config` by specifying the databases to use and the polling frequency in milliseconds.</span></span> <span data-ttu-id="ed9a4-189">Le balisage suivant interroge la base de données Northwind une fois par seconde.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-189">The following markup polls the Northwind database once every second.</span></span>


[!code-xml[Main](using-sql-cache-dependencies-cs/samples/sample6.xml)]

<span data-ttu-id="ed9a4-190">Le `name` valeur dans le `<add>` élément (NorthwindDB) associe un nom explicite à une base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-190">The `name` value in the `<add>` element ( NorthwindDB ) associates a human-readable name with a particular database.</span></span> <span data-ttu-id="ed9a4-191">Lorsque vous travaillez avec des dépendances de cache SQL, nous devrons faire référence au nom de base de données défini ici, ainsi que la table basée sur les données mises en cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-191">When working with SQL cache dependencies, we'll need to refer to the database name defined here as well as the table that the cached data is based on.</span></span> <span data-ttu-id="ed9a4-192">Nous verrons comment utiliser la `SqlCacheDependency` classe à associer par programme les dépendances de cache SQL avec mise en cache des données à l’étape 6.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-192">We'll see how to use the `SqlCacheDependency` class to programmatically associate SQL cache dependencies with cached data in Step 6.</span></span>

<span data-ttu-id="ed9a4-193">Une fois qu’une dépendance de cache SQL a été établie, le système d’interrogation se connecte aux bases de données définies dans le `<databases>` éléments chaque `pollTime` millisecondes et exécuter le `AspNet_SqlCachePollingStoredProcedure` procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-193">Once a SQL cache dependency has been established, the polling system will connect to the databases defined in the `<databases>` elements every `pollTime` milliseconds and execute the `AspNet_SqlCachePollingStoredProcedure` stored procedure.</span></span> <span data-ttu-id="ed9a4-194">Cette procédure stockée - qui a été ajoutée de nouveau à l’aide de l’étape 3 du `aspnet_regsql.exe` outil de ligne de commande - renvoie la `tableName` et `changeId` valeurs pour chaque enregistrement dans `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-194">This stored procedure - which was added back in Step 3 using the `aspnet_regsql.exe` command line tool - returns the `tableName` and `changeId` values for each record in `AspNet_SqlCacheTablesForChangeNotification`.</span></span> <span data-ttu-id="ed9a4-195">Les dépendances de cache SQL obsolètes sont supprimés du cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-195">Outdated SQL cache dependencies are evicted from the cache.</span></span>

<span data-ttu-id="ed9a4-196">Le `pollTime` paramètre introduit un compromis entre les performances et l’obsolescence des données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-196">The `pollTime` setting introduces a tradeoff between performance and data staleness.</span></span> <span data-ttu-id="ed9a4-197">Un petit `pollTime` valeur augmente le nombre de demandes à la base de données, mais plus supprime rapidement les données obsolètes à partir du cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-197">A small `pollTime` value increases the number of requests to the database, but more quickly evicts stale data from the cache.</span></span> <span data-ttu-id="ed9a4-198">Une valeur plus élevée `pollTime` valeur réduit le nombre de demandes de base de données, mais augmente le délai entre la modification des données de serveur principal et lorsque les éléments connexes du cache sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-198">A larger `pollTime` value reduces the number of database requests, but increases the delay between when the backend data changes and when the related cache items are evicted.</span></span> <span data-ttu-id="ed9a4-199">Heureusement, la requête de base de données s’exécute une procédure stockée simple s retournant uniquement quelques lignes d’une table simple et léger.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-199">Fortunately, the database request is executing a simple stored procedure that s returning just a few rows from a simple, lightweight table.</span></span> <span data-ttu-id="ed9a4-200">Mais faire des essais avec différents `pollTime` péremption access et les données de votre application de base de données pour trouver un équilibre idéal entre les valeurs.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-200">But do experiment with different `pollTime` values to find an ideal balance between database access and data staleness for your application.</span></span> <span data-ttu-id="ed9a4-201">Le plus petit `pollTime` valeur autorisée est de 500.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-201">The smallest `pollTime` value allowed is 500.</span></span>

> [!NOTE]
> <span data-ttu-id="ed9a4-202">L’exemple ci-dessus fournit un seul `pollTime` valeur dans le `<sqlCacheDependency>` l’élément, mais vous pouvez éventuellement spécifier le `pollTime` valeur dans le `<add>` élément.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-202">The above example provides a single `pollTime` value in the `<sqlCacheDependency>` element, but you can optionally specify the `pollTime` value in the `<add>` element.</span></span> <span data-ttu-id="ed9a4-203">Cela est utile si vous disposez de plusieurs bases de données spécifiés et que vous souhaitez personnaliser la fréquence d’interrogation par base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-203">This is useful if you have multiple databases specified and want to customize the polling frequency per database.</span></span>


## <a name="step-5-declaratively-working-with-sql-cache-dependencies"></a><span data-ttu-id="ed9a4-204">Étape 5 : Utilisation de façon déclarative avec les dépendances de Cache SQL</span><span class="sxs-lookup"><span data-stu-id="ed9a4-204">Step 5: Declaratively Working with SQL Cache Dependencies</span></span>

<span data-ttu-id="ed9a4-205">Les étapes 1 à 4, nous avons étudié comment le programme d’installation de l’infrastructure de base de données nécessaires et de configurer le système d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-205">In Steps 1 through 4 we looked at how to setup the necessary database infrastructure and configure the polling system.</span></span> <span data-ttu-id="ed9a4-206">Grâce à cette infrastructure en place, nous pouvons maintenant ajouter des éléments au cache de données avec une dépendance de cache SQL associée à l’aide de techniques de programmation ou déclaratifs.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-206">With this infrastructure in place, we can now add items to the data cache with an associated SQL cache dependency using either programmatic or declarative techniques.</span></span> <span data-ttu-id="ed9a4-207">Dans cette étape, nous allons examiner l’utilisation de façon déclarative des dépendances de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-207">In this step we'll examine how to declaratively work with SQL cache dependencies.</span></span> <span data-ttu-id="ed9a4-208">Dans l’étape 6, nous allons étudier l’approche par programmation.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-208">In Step 6 we'll look at the programmatic approach.</span></span>

<span data-ttu-id="ed9a4-209">Le [mise en cache des données avec ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) didacticiel exploré les fonctionnalités de mise en cache déclaratives de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-209">The [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial explored the declarative caching capabilities of the ObjectDataSource.</span></span> <span data-ttu-id="ed9a4-210">En définissant simplement le `EnableCaching` propriété `true` et le `CacheDuration` propriété à un intervalle de temps, ObjectDataSource mettra automatiquement en cache les données retournées à partir de son objet sous-jacent pour l’intervalle spécifié.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-210">By simply setting the `EnableCaching` property to `true` and the `CacheDuration` property to some time interval, the ObjectDataSource will automatically cache the data returned from its underlying object for the specified interval.</span></span> <span data-ttu-id="ed9a4-211">ObjectDataSource permettre également utiliser une ou plusieurs dépendances de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-211">The ObjectDataSource can also use one or more SQL cache dependencies.</span></span>

<span data-ttu-id="ed9a4-212">Pour illustrer la façon déclarative à l’aide de dépendances de cache SQL, ouvrez le `SqlCacheDependencies.aspx` page dans le `Caching` faites glisser un contrôle GridView à partir de la boîte à outils vers le concepteur.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-212">To demonstrate using SQL cache dependencies declaratively, open the `SqlCacheDependencies.aspx` page in the `Caching` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="ed9a4-213">Définir le contrôle GridView s `ID` à `ProductsDeclarative` et, à partir de sa balise active, choisissez de lier à un nouveau ObjectDataSource nommé `ProductsDataSourceDeclarative`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-213">Set the GridView s `ID` to `ProductsDeclarative` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSourceDeclarative`.</span></span>


<span data-ttu-id="ed9a4-214">[![Créer un nouveau ObjectDataSource nommé ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-214">[![Create a New ObjectDataSource Named ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span></span>

<span data-ttu-id="ed9a4-215">**Figure 5**: créer un nouveau nommé de ObjectDataSource `ProductsDataSourceDeclarative` ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-215">**Figure 5**: Create a New ObjectDataSource Named `ProductsDataSourceDeclarative` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image4.png))</span></span>


<span data-ttu-id="ed9a4-216">Configurer l’ObjectDataSource à utiliser le `ProductsBLL` puis définissez la liste déroulante dans l’onglet Sélection à `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-216">Configure the ObjectDataSource to use the `ProductsBLL` class and set the drop-down list in the SELECT tab to `GetProducts()`.</span></span> <span data-ttu-id="ed9a4-217">Dans l’onglet mise à jour, choisissez le `UpdateProduct` surcharger avec trois paramètres d’entrée - `productName`, `unitPrice`, et `productID`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-217">In the UPDATE tab, choose the `UpdateProduct` overload with three input parameters - `productName`, `unitPrice`, and `productID`.</span></span> <span data-ttu-id="ed9a4-218">Définir les listes déroulantes (None) dans les onglets INSERT et DELETE.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-218">Set the drop-down lists to (None) in the INSERT and DELETE tabs.</span></span>


<span data-ttu-id="ed9a4-219">[![Utilisez la surcharge de UpdateProduct avec trois paramètres d’entrée](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-219">[![Use the UpdateProduct Overload with Three Input Parameters](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span></span>

<span data-ttu-id="ed9a4-220">**Figure 6**: utiliser la surcharge UpdateProduct avec trois paramètres d’entrée ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-220">**Figure 6**: Use the UpdateProduct Overload with Three Input Parameters ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image6.png))</span></span>


<span data-ttu-id="ed9a4-221">[![Définition de la liste déroulante (aucun) à l’insertion et de supprimer les tabulations](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-221">[![Set the Drop-Down List to (None) for the INSERT and DELETE Tabs](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span></span>

<span data-ttu-id="ed9a4-222">**Figure 7**: définir la liste déroulante (None) pour l’insérer et supprimer des onglets ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-222">**Figure 7**: Set the Drop-Down List to (None) for the INSERT and DELETE Tabs ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image8.png))</span></span>


<span data-ttu-id="ed9a4-223">Après avoir terminé l’Assistant Configurer la Source de données, Visual Studio créera BoundFields et CheckBoxFields dans le GridView pour chacun des champs de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-223">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="ed9a4-224">Supprimez tous les champs, mais `ProductName`, `CategoryName`, et `UnitPrice`et mettre en forme ces champs comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-224">Remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="ed9a4-225">À partir de la balise active de s GridView, activez les cases à cocher Activer la pagination, activer le tri et activer la modification.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-225">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="ed9a4-226">Visual Studio définit les opérations de mappage ObjectDataSource `OldValuesParameterFormatString` propriété `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-226">Visual Studio will set the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="ed9a4-227">Dans l’ordre pour la fonctionnalité d’édition GridView s fonctionne correctement, supprimez cette propriété entièrement de la syntaxe déclarative ou réaffectez-lui la valeur par défaut, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-227">In order for the GridView s edit feature to work properly, either remove this property entirely from the declarative syntax or set it back to its default value, `{0}`.</span></span>

<span data-ttu-id="ed9a4-228">Enfin, ajoutez un contrôle Web Label ci-dessus le GridView et son `ID` propriété `ODSEvents` et son `EnableViewState` propriété `false`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-228">Finally, add a Label Web control above the GridView and set its `ID` property to `ODSEvents` and its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="ed9a4-229">Après avoir apporté ces modifications, votre balisage déclaratif s de page doit ressembler à ce qui suit.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-229">After making these changes, your page s declarative markup should look similar to the following.</span></span> <span data-ttu-id="ed9a4-230">Notez que lorsque ve apportées à un certain nombre de personnalisations esthétiques aux champs GridView qui ne sont pas nécessaires pour illustrer la fonctionnalité de dépendance de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-230">Note that I ve made a number of aesthetic customizations to the GridView fields that are not necessary to demonstrate the SQL cache dependency functionality.</span></span>


[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample7.aspx)]

<span data-ttu-id="ed9a4-231">Ensuite, créez un gestionnaire d’événements pour ObjectDataSource s `Selecting` événement et dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-231">Next, create an event handler for the ObjectDataSource s `Selecting` event and in it add the following code:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample8.cs)]

<span data-ttu-id="ed9a4-232">N’oubliez pas que les opérations de mappage ObjectDataSource `Selecting` événement est déclenché uniquement lorsque la récupération des données à partir de son objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-232">Recall that the ObjectDataSource s `Selecting` event fires only when retrieving data from its underlying object.</span></span> <span data-ttu-id="ed9a4-233">Si l’ObjectDataSource accède aux données à partir de son propre cache, cet événement n’est pas déclenché.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-233">If the ObjectDataSource accesses the data from its own cache, this event is not fired.</span></span>

<span data-ttu-id="ed9a4-234">Maintenant, visitez cette page via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-234">Now, visit this page through a browser.</span></span> <span data-ttu-id="ed9a4-235">Dans la mesure où ve encore pour implémenter la mise en cache, chaque fois que la page, de trier ou de modifier la grille de la page doit afficher le texte, l’événement Selecting déclenché, comme le montre la Figure 8.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-235">Since we ve yet to implement any caching, each time you page, sort, or edit the grid the page should display the text, �Selecting event fired, as Figure 8 shows.</span></span>


<span data-ttu-id="ed9a4-236">[![L’événement Selecting de s ObjectDataSource déclenche chaque fois que le contrôle GridView est paginé, modifié, ou le Sorted](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-236">[![The ObjectDataSource s Selecting Event Fires Each Time the GridView is Paged, Edited, or Sorted](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span></span>

<span data-ttu-id="ed9a4-237">**Figure 8**: ObjectDataSource le s `Selecting` événement se déclenche à chaque fois le contrôle GridView est paginé, modifiée ou Sorted ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-237">**Figure 8**: The ObjectDataSource s `Selecting` Event Fires Each Time the GridView is Paged, Edited, or Sorted ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image10.png))</span></span>


<span data-ttu-id="ed9a4-238">Comme nous l’avons vu dans la [mise en cache des données avec ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) (didacticiel), définition de la `EnableCaching` propriété `true` provoque l’ObjectDataSource pour mettre en cache ses données pour la durée spécifiée par son `CacheDuration` propriété.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-238">As we saw in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial, setting the `EnableCaching` property to `true` causes the ObjectDataSource to cache its data for the duration specified by its `CacheDuration` property.</span></span> <span data-ttu-id="ed9a4-239">ObjectDataSource possède également un [ `SqlCacheDependency` propriété](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), qui ajoute une ou plusieurs dépendances de cache SQL pour les données mises en cache à l’aide du modèle :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-239">The ObjectDataSource also has a [`SqlCacheDependency` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), which adds one or more SQL cache dependencies to the cached data using the pattern:</span></span>


[!code-css[Main](using-sql-cache-dependencies-cs/samples/sample9.css)]

<span data-ttu-id="ed9a4-240">Où *databaseName* est le nom de la base de données comme spécifié dans le `name` attribut de la `<add>` élément `Web.config`, et *tableName* est le nom de la table de base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-240">Where *databaseName* is the name of the database as specified in the `name` attribute of the `<add>` element in `Web.config`, and *tableName* is the name of the database table.</span></span> <span data-ttu-id="ed9a4-241">Par exemple, pour créer un ObjectDataSource qui met en cache les données indéfiniment basée sur une dépendance de cache SQL sur les opérations de mappage Northwind `Products` table, définissez le s ObjectDataSource `EnableCaching` propriété `true` et son `SqlCacheDependency` propriété NorthwindDB:Products.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-241">For example, to create an ObjectDataSource that caches data indefinitely based on a SQL cache dependency against the Northwind s `Products` table, set the ObjectDataSource s `EnableCaching` property to `true` and its `SqlCacheDependency` property to NorthwindDB:Products .</span></span>

> [!NOTE]
> <span data-ttu-id="ed9a4-242">Vous pouvez utiliser une dépendance de cache SQL *et* une expiration basée sur le temps en définissant `EnableCaching` à `true`, `CacheDuration` à l’intervalle de temps, et `SqlCacheDependency` pour l’ou les noms de base de données et la table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-242">You can use a SQL cache dependency *and* a time-based expiry by setting `EnableCaching` to `true`, `CacheDuration` to the time interval, and `SqlCacheDependency` to the database and table name(s).</span></span> <span data-ttu-id="ed9a4-243">ObjectDataSource supprimez ses données lors de l’expiration de la durée est atteinte, ou lorsque le système d’interrogation de commentaires que la base de données sous-jacente a changé, selon ce qui se produit en premier.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-243">The ObjectDataSource will evict its data when the time-based expiry is reached or when the polling system notes that the underlying database data has changed, whichever happens first.</span></span>


<span data-ttu-id="ed9a4-244">Le contrôle GridView dans `SqlCacheDependencies.aspx` affiche des données provenant de deux tables - `Products` et `Categories` (le produit s `CategoryName` champ est récupéré un `JOIN` sur `Categories`).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-244">The GridView in `SqlCacheDependencies.aspx` displays data from two tables - `Products` and `Categories` (the product s `CategoryName` field is retrieved via a `JOIN` on `Categories`).</span></span> <span data-ttu-id="ed9a4-245">Par conséquent, nous voulons spécifier deux dépendances de cache SQL : NorthwindDB:Products ; NorthwindDB:Categories.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-245">Therefore, we want to specify two SQL cache dependencies: NorthwindDB:Products;NorthwindDB:Categories .</span></span>


<span data-ttu-id="ed9a4-246">[![Configurer l’ObjectDataSource pour prendre en charge de la mise en cache à l’aide des dépendances de Cache SQL sur les produits et les catégories](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-246">[![Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on Products and Categories](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span></span>

<span data-ttu-id="ed9a4-247">**Figure 9**: configurer l’ObjectDataSource pour la prise en charge la mise en cache à l’aide de dépendances de Cache SQL sur `Products` et `Categories` ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-247">**Figure 9**: Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on `Products` and `Categories` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image12.png))</span></span>


<span data-ttu-id="ed9a4-248">Après avoir configuré l’ObjectDataSource pour prendre en charge la mise en cache, revoir la page via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-248">After configuring the ObjectDataSource to support caching, revisit the page through a browser.</span></span> <span data-ttu-id="ed9a4-249">Là encore, l’événement de sélection de texte déclenché doit apparaître sur la première visite de page, mais devrait disparaître lorsque la pagination, de tri ou en cliquant sur le bouton Modifier ou annuler.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-249">Again, the text �Selecting event fired should appear on the first page visit, but should go away when paging, sorting, or clicking the Edit or Cancel buttons.</span></span> <span data-ttu-id="ed9a4-250">Il s’agit, car une fois que les données sont chargées dans le cache de s ObjectDataSource, il y reste jusqu'à ce que le `Products` ou `Categories` les tables sont modifiées ou les données sont mis à jour via le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-250">This is because after the data is loaded into the ObjectDataSource s cache, it remains there until the `Products` or `Categories` tables are modified or the data is updated through the GridView.</span></span>

<span data-ttu-id="ed9a4-251">Après la mise en page de la grille et en indiquant l’absence de l’événement Selecting déclenchement texte, ouvrez une nouvelle fenêtre de navigateur et accédez au didacticiel dans la modification, l’insertion et la suppression de section principes de base (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-251">After paging through the grid and noting the lack of the �Selecting event fired text, open a new browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="ed9a4-252">Cette mise à jour le nom ou le prix d’un produit.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-252">Update the name or price of a product.</span></span> <span data-ttu-id="ed9a4-253">Puis, à partir de la première fenêtre de navigateur, afficher une autre page de données, trier la grille ou cliquez sur un bouton de modification de ligne s.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-253">Then, from to the first browser window, view a different page of data, sort the grid, or click a row s Edit button.</span></span> <span data-ttu-id="ed9a4-254">Cette fois-ci, le déclenchement d’événement Selecting doit réapparaître, car la base de données sous-jacente données a été modifié (voir Figure 10).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-254">This time, the �Selecting event fired should reappear, as the underlying database data has been modified (see Figure 10).</span></span> <span data-ttu-id="ed9a4-255">Si le texte n’apparaît pas, attendez quelques instants, puis réessayez.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-255">If the text does not appear, wait a few moments and try again.</span></span> <span data-ttu-id="ed9a4-256">Souvenez-vous que le service d’interrogation recherche des modifications apportées à la `Products` table chaque `pollTime` millisecondes, par conséquent, il est un délai entre lorsque les données sous-jacentes sont mis à jour et lorsque les données mises en cache sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-256">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>


<span data-ttu-id="ed9a4-257">[![Modification de la Table produits supprime les données mises en cache de produit](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-257">[![Modifying the Products Table Evicts the Cached Product Data](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span></span>

<span data-ttu-id="ed9a4-258">**La figure 10**: modification de la Table produits supprime les données mises en cache du produit ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-258">**Figure 10**: Modifying the Products Table Evicts the Cached Product Data ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image14.png))</span></span>


## <a name="step-6-programmatically-working-with-thesqlcachedependencyclass"></a><span data-ttu-id="ed9a4-259">Étape 6 : Manipuler par programme la`SqlCacheDependency`classe</span><span class="sxs-lookup"><span data-stu-id="ed9a4-259">Step 6: Programmatically Working with the`SqlCacheDependency`Class</span></span>

<span data-ttu-id="ed9a4-260">Le [mise en cache des données dans l’Architecture](caching-data-in-the-architecture-cs.md) didacticiel examiné les avantages de l’utilisation d’une couche distincte de la mise en cache de l’architecture au lieu d’une association étroite entre la mise en cache avec ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-260">The [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial looked at the benefits of using a separate Caching Layer in the architecture as opposed to tightly coupling the caching with the ObjectDataSource.</span></span> <span data-ttu-id="ed9a4-261">Dans ce didacticiel, nous avons créé un `ProductsCL` pour illustrer l’utilisation par programme avec le cache de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-261">In that tutorial we created a `ProductsCL` class to demonstrate programmatically working with the data cache.</span></span> <span data-ttu-id="ed9a4-262">Pour utiliser les dépendances de cache SQL dans la couche de mise en cache, utilisez la `SqlCacheDependency` classe.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-262">To utilize SQL cache dependencies in the Caching Layer, use the `SqlCacheDependency` class.</span></span>

<span data-ttu-id="ed9a4-263">Avec le système d’interrogation, un `SqlCacheDependency` objet doit être associé à une paire de base de données et de table particulier.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-263">With the polling system, a `SqlCacheDependency` object must be associated with a particular database and table pair.</span></span> <span data-ttu-id="ed9a4-264">Le code suivant, par exemple, crée un `SqlCacheDependency` objet basé sur la base de données Northwind s `Products` table :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-264">The following code, for example, creates a `SqlCacheDependency` object based on the Northwind database s `Products` table:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample10.cs)]

<span data-ttu-id="ed9a4-265">Les deux paramètres d’entrée au `SqlCacheDependency` constructeur de s sont les noms de base de données et de table, respectivement.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-265">The two input parameters to the `SqlCacheDependency` s constructor are the database and table names, respectively.</span></span> <span data-ttu-id="ed9a4-266">Comme avec s ObjectDataSource `SqlCacheDependency` propriété, le nom de la base de données utilisé est identique à la valeur spécifiée dans le `name` attribut de la `<add>` élément `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-266">Like with the ObjectDataSource s `SqlCacheDependency` property, the database name used is the same as the value specified in the `name` attribute of the `<add>` element in `Web.config`.</span></span> <span data-ttu-id="ed9a4-267">Le nom de la table est le nom réel de la table de base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-267">The table name is the actual name of the database table.</span></span>

<span data-ttu-id="ed9a4-268">Pour associer un `SqlCacheDependency` avec un élément ajouté au cache de données, utilisez une de la `Insert` surcharges de méthode qui accepte une dépendance.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-268">To associate a `SqlCacheDependency` with an item added to the data cache, use one of the `Insert` method overloads that accepts a dependency.</span></span> <span data-ttu-id="ed9a4-269">Le code suivant ajoute *valeur* au cache de données pour une durée indéterminée, mais associe un `SqlCacheDependency` sur la `Products` table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-269">The following code adds *value* to the data cache for an indefinite duration, but associates it with a `SqlCacheDependency` on the `Products` table.</span></span> <span data-ttu-id="ed9a4-270">En bref, *valeur* resteront dans le cache jusqu'à ce qu’il est supprimé en raison de contraintes de mémoire ou parce que le système d’interrogation a détecté que le `Products` table a été modifiée, car elle a été mise en cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-270">In short, *value* will remain in the cache until it is evicted due to memory constraints or because the polling system has detected that the `Products` table has changed since it was cached.</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample11.cs)]

<span data-ttu-id="ed9a4-271">La mise en cache de couche s `ProductsCL` classe met actuellement en cache les données à partir de la `Products` de table à l’aide d’une expiration basée sur le temps de 60 secondes.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-271">The Caching Layer s `ProductsCL` class currently caches data from the `Products` table using a time-based expiry of 60 seconds.</span></span> <span data-ttu-id="ed9a4-272">Permettent de mettre à jour de cette classe afin qu’il utilise à la place des dépendances de cache SQL s.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-272">Let s update this class so that it uses SQL cache dependencies instead.</span></span> <span data-ttu-id="ed9a4-273">Le `ProductsCL` classe s `AddCacheItem` (méthode), qui est chargé d’ajouter les données dans le cache, contient actuellement le code suivant :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-273">The `ProductsCL` class s `AddCacheItem` method, which is responsible for adding the data to the cache, currently contains the following code:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample12.cs)]

<span data-ttu-id="ed9a4-274">Mettre à jour de ce code pour utiliser un `SqlCacheDependency` de l’objet au lieu du `MasterCacheKeyArray` la dépendance de cache :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-274">Update this code to use a `SqlCacheDependency` object instead of the `MasterCacheKeyArray` cache dependency:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample13.cs)]

<span data-ttu-id="ed9a4-275">Pour tester cette fonctionnalité, ajoutez un contrôle GridView à la page sous existants `ProductsDeclarative` GridView.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-275">To test this functionality, add a GridView to the page beneath the existing `ProductsDeclarative` GridView.</span></span> <span data-ttu-id="ed9a4-276">Définissez ce nouveau s de GridView `ID` à `ProductsProgrammatic` et via sa balise active, la lier à un nouveau ObjectDataSource nommé `ProductsDataSourceProgrammatic`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-276">Set this new GridView s `ID` to `ProductsProgrammatic` and, through its smart tag, bind it to a new ObjectDataSource named `ProductsDataSourceProgrammatic`.</span></span> <span data-ttu-id="ed9a4-277">Configurer l’ObjectDataSource à utiliser le `ProductsCL` (classe), définir les listes déroulantes dans l’instruction SELECT et les onglets de mise à jour à `GetProducts` et `UpdateProduct`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-277">Configure the ObjectDataSource to use the `ProductsCL` class, setting the drop-down lists in the SELECT and UPDATE tabs to `GetProducts` and `UpdateProduct`, respectively.</span></span>


<span data-ttu-id="ed9a4-278">[![Configurer pour utiliser la classe ProductsCL ObjectDataSource](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-278">[![Configure the ObjectDataSource to Use the ProductsCL Class](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span></span>

<span data-ttu-id="ed9a4-279">**Figure 11**: configurer l’ObjectDataSource à utiliser le `ProductsCL` classe ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-279">**Figure 11**: Configure the ObjectDataSource to Use the `ProductsCL` Class ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image16.png))</span></span>


<span data-ttu-id="ed9a4-280">[![Sélectionnez la méthode GetProducts dans la liste déroulante de s onglet Sélection](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-280">[![Select the GetProducts Method from the SELECT Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span></span>

<span data-ttu-id="ed9a4-281">**Figure 12**: sélectionnez le `GetProducts` méthode à partir de la liste déroulante, sélectionnez l’onglet s ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-281">**Figure 12**: Select the `GetProducts` Method from the SELECT Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image18.png))</span></span>


<span data-ttu-id="ed9a4-282">[![Choisissez la méthode UpdateProduct dans la liste déroulante de mise à jour onglet s](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-282">[![Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span></span>

<span data-ttu-id="ed9a4-283">**Figure 13**: choisissez la méthode UpdateProduct à partir de la liste déroulante de s onglet mise à jour ([cliquez pour afficher l’image en taille réelle](using-sql-cache-dependencies-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="ed9a4-283">**Figure 13**: Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image20.png))</span></span>


<span data-ttu-id="ed9a4-284">Après avoir terminé l’Assistant Configurer la Source de données, Visual Studio créera BoundFields et CheckBoxFields dans le GridView pour chacun des champs de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-284">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="ed9a4-285">Comme avec la première GridView ajouté à cette page, supprimez tous les champs, mais `ProductName`, `CategoryName`, et `UnitPrice`et mettre en forme ces champs comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-285">Like with the first GridView added to this page, remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="ed9a4-286">À partir de la balise active de s GridView, activez les cases à cocher Activer la pagination, activer le tri et activer la modification.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-286">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="ed9a4-287">Comme avec la `ProductsDataSourceDeclarative` ObjectDataSource, Visual Studio définit les `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` propriété `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-287">As with the `ProductsDataSourceDeclarative` ObjectDataSource, Visual Studio will set the `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="ed9a4-288">Dans l’ordre pour la fonctionnalité d’édition GridView s fonctionne correctement, définissez cette propriété passe au `{0}` (ou supprimez l’assignation de propriété à partir de la syntaxe déclarative entièrement).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-288">In order for the GridView s edit feature to work properly, set this property back to `{0}` (or remove the property assignment from the declarative syntax altogether).</span></span>

<span data-ttu-id="ed9a4-289">Après avoir effectué ces tâches, le balisage déclaratif GridView et ObjectDataSource résultant doit se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-289">After completing these tasks, the resulting GridView and ObjectDataSource declarative markup should look like the following:</span></span>


[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample14.aspx)]

<span data-ttu-id="ed9a4-290">Pour tester le code SQL dans la couche de mise en cache de la dépendance de cache définie un point d’arrêt dans le `ProductCL` classe s `AddCacheItem` méthode et puis démarrer le débogage.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-290">To test the SQL cache dependency in the Caching Layer set a breakpoint in the `ProductCL` class s `AddCacheItem` method and then start debugging.</span></span> <span data-ttu-id="ed9a4-291">Lorsque vous visitez `SqlCacheDependencies.aspx`, le point d’arrêt doit être atteint pour que les données sont demandées pour la première fois et placées dans le cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-291">When you first visit `SqlCacheDependencies.aspx`, the breakpoint should be hit as the data is requested for the first time and placed into the cache.</span></span> <span data-ttu-id="ed9a4-292">Ensuite, déplacer vers une autre page dans le GridView, ou l’une des colonnes de tri.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-292">Next, move to another page in the GridView or sort one of the columns.</span></span> <span data-ttu-id="ed9a4-293">Cela entraîne le contrôle GridView à actualiser ses données, mais les données doivent se trouver dans le cache depuis le `Products` table de base de données n’a pas été modifié.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-293">This causes the GridView to requery its data, but the data should be found in the cache since the `Products` database table has not been modified.</span></span> <span data-ttu-id="ed9a4-294">Si les données sont à plusieurs reprises introuvable dans le cache, assurez-vous que suffisamment de mémoire est disponible sur votre ordinateur, puis réessayez.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-294">If the data is repeatedly not found in the cache, make sure there is sufficient memory available on your computer and try again.</span></span>

<span data-ttu-id="ed9a4-295">Après la pagination de quelques pages du contrôle GridView, ouvrez une deuxième fenêtre de navigateur et accédez au didacticiel dans la modification, l’insertion et la suppression de section principes de base (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-295">After paging through a few pages of the GridView, open a second browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="ed9a4-296">Mettre à jour un enregistrement de la table Products et ensuite, affichez une nouvelle page à partir de la première fenêtre de navigateur ou cliquez sur l’un des en-têtes de tri.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-296">Update a record from the Products table and then, from the first browser window, view a new page or click on one of the sorting headers.</span></span>

<span data-ttu-id="ed9a4-297">Dans ce scénario vous verrez deux choses : le point d’arrêt est atteint, indiquant que les données mises en cache a été supprimées en raison de la modification de la base de données ; ou, le point d’arrêt n’est pas atteints, ce qui signifie que `SqlCacheDependencies.aspx` s’affiche maintenant les données périmées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-297">In this scenario you will see one of two things: either the breakpoint will be hit, indicating that the cached data was evicted due to the change in the database; or, the breakpoint will not be hit, meaning that `SqlCacheDependencies.aspx` is now showing stale data.</span></span> <span data-ttu-id="ed9a4-298">Si le point d’arrêt n’est pas atteint, il est probable, car le service d’interrogation n’a pas encore supprimé, car les données ont été modifiées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-298">If the breakpoint is not hit, it is likely because the polling service has not yet fired since the data was changed.</span></span> <span data-ttu-id="ed9a4-299">Souvenez-vous que le service d’interrogation recherche des modifications apportées à la `Products` table chaque `pollTime` millisecondes, par conséquent, il est un délai entre lorsque les données sous-jacentes sont mis à jour et lorsque les données mises en cache sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-299">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>

> [!NOTE]
> <span data-ttu-id="ed9a4-300">Ce délai est plus susceptible d’apparaître lorsque vous modifiez un de ces produits via le contrôle GridView dans `SqlCacheDependencies.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-300">This delay is more likely to appear when editing one of the products through the GridView in `SqlCacheDependencies.aspx`.</span></span> <span data-ttu-id="ed9a4-301">Dans le [mise en cache des données dans l’Architecture](caching-data-in-the-architecture-cs.md) didacticiel, nous avons ajouté la `MasterCacheKeyArray` la dépendance pour vous assurer que les données en cours de modification par le biais de cache le `ProductsCL` classe s `UpdateProduct` méthode a été supprimée du cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-301">In the [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial we added the `MasterCacheKeyArray` cache dependency to ensure that the data being edited through the `ProductsCL` class s `UpdateProduct` method was evicted from the cache.</span></span> <span data-ttu-id="ed9a4-302">Toutefois, nous avons remplacé cette dépendance de cache lors de la modification la `AddCacheItem` méthode plus haut dans cette étape et par conséquent la `ProductsCL` classe continue d’afficher les données mises en cache jusqu'à ce que le système d’interrogation de notes de la modification apportée à la `Products` table.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-302">However, we replaced this cache dependency when modifying the `AddCacheItem` method earlier in this step and therefore the `ProductsCL` class will continue to show the cached data until the polling system notes the change to the `Products` table.</span></span> <span data-ttu-id="ed9a4-303">Nous verrons comment rétablir le `MasterCacheKeyArray` la dépendance à l’étape 7 de cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-303">We'll see how to reintroduce the `MasterCacheKeyArray` cache dependency in Step 7.</span></span>


## <a name="step-7-associating-multiple-dependencies-with-a-cached-item"></a><span data-ttu-id="ed9a4-304">Étape 7 : Associant plusieurs dépendances avec un élément mis en cache</span><span class="sxs-lookup"><span data-stu-id="ed9a4-304">Step 7: Associating Multiple Dependencies with a Cached Item</span></span>

<span data-ttu-id="ed9a4-305">N’oubliez pas que le `MasterCacheKeyArray` la dépendance de cache est utilisée pour garantir que *tous les* relatives au produit des données sont éliminées du cache lorsqu’un élément associé champdans est mis à jour.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-305">Recall that the `MasterCacheKeyArray` cache dependency is used to ensure that *all* product-related data is evicted from the cache when any single item associated within it is updated.</span></span> <span data-ttu-id="ed9a4-306">Par exemple, le `GetProductsByCategoryID(categoryID)` méthode caches `ProductsDataTables` instances pour chaque unique *categoryID* valeur.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-306">For example, the `GetProductsByCategoryID(categoryID)` method caches `ProductsDataTables` instances for each unique *categoryID* value.</span></span> <span data-ttu-id="ed9a4-307">Si un de ces objets est supprimé, le `MasterCacheKeyArray` la dépendance de cache permet de s’assurer que les autres sont également supprimés.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-307">If one of these objects is evicted, the `MasterCacheKeyArray` cache dependency ensures that the others are also removed.</span></span> <span data-ttu-id="ed9a4-308">Sans cette dépendance de cache lorsque les données mises en cache sont modifiées. il est possible que d’autres données de produit de mise en cache peuvent être obsolètes.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-308">Without this cache dependency, when the cached data is modified the possibility exists that other cached product data may be out of date.</span></span> <span data-ttu-id="ed9a4-309">Par conséquent, il s importants que nous mettons en place la `MasterCacheKeyArray` dépendance de cache lors de l’utilisation des dépendances de cache SQL.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-309">Consequently, it s important that we maintain the `MasterCacheKeyArray` cache dependency when using SQL cache dependencies.</span></span> <span data-ttu-id="ed9a4-310">Toutefois, les données mises en cache s `Insert` méthode permet uniquement d’un objet de dépendance unique.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-310">However, the data cache s `Insert` method only allows for a single dependency object.</span></span>

<span data-ttu-id="ed9a4-311">En outre, lorsque vous travaillez avec des dépendances de cache SQL nous devons associer plusieurs tables de base de données en tant que dépendances.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-311">Furthermore, when working with SQL cache dependencies we may need to associate multiple database tables as dependencies.</span></span> <span data-ttu-id="ed9a4-312">Par exemple, le `ProductsDataTable` mis en cache dans le `ProductsCL` classe contient les noms de catégorie et le fournisseur pour chaque produit, mais la `AddCacheItem` méthode utilise uniquement une dépendance sur `Products`.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-312">For example, the `ProductsDataTable` cached in the `ProductsCL` class contains the category and supplier names for each product, but the `AddCacheItem` method only uses a dependency on `Products`.</span></span> <span data-ttu-id="ed9a4-313">Dans ce cas, si l’utilisateur met à jour le nom d’une catégorie ou le fournisseur, les données de produit de mise en cache reste dans le cache et être obsolètes.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-313">In this situation, if the user updates the name of a category or supplier, the cached product data will remain in the cache and be out of date.</span></span> <span data-ttu-id="ed9a4-314">Par conséquent, nous voulons que les données mises en cache de produit dépend non seulement le `Products` de table, mais sur le `Categories` et `Suppliers` également à des tables.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-314">Therefore, we want to make the cached product data dependent on not only the `Products` table, but on the `Categories` and `Suppliers` tables as well.</span></span>

<span data-ttu-id="ed9a4-315">Le [ `AggregateCacheDependency` classe](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) fournit un moyen d’associer plusieurs dépendances avec un élément de cache.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-315">The [`AggregateCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) provides a means for associating multiple dependencies with a cache item.</span></span> <span data-ttu-id="ed9a4-316">Commencez par créer un `AggregateCacheDependency` instance.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-316">Start by creating an `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="ed9a4-317">Ensuite, ajoutez le jeu de dépendances à l’aide de la `AggregateCacheDependency` s `Add` (méthode).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-317">Next, add the set of dependencies using the `AggregateCacheDependency` s `Add` method.</span></span> <span data-ttu-id="ed9a4-318">Lorsque vous insérez l’élément dans le cache de données par la suite, passez le `AggregateCacheDependency` instance.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-318">When inserting the item into the data cache thereafter, pass in the `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="ed9a4-319">Lorsque *tout* de la `AggregateCacheDependency` modifier les dépendances de l’instance s, l’élément mis en cache est supprimé.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-319">When *any* of the `AggregateCacheDependency` instance s dependencies change, the cached item will be evicted.</span></span>

<span data-ttu-id="ed9a4-320">L’exemple suivant montre le code de mise à jour de la `ProductsCL` classe s `AddCacheItem` (méthode).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-320">The following shows the updated code for the `ProductsCL` class s `AddCacheItem` method.</span></span> <span data-ttu-id="ed9a4-321">La méthode crée le `MasterCacheKeyArray` cache dépendance avec `SqlCacheDependency` des objets pour le `Products`, `Categories`, et `Suppliers` tables.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-321">The method creates the `MasterCacheKeyArray` cache dependency along with `SqlCacheDependency` objects for the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="ed9a4-322">Ils sont combinés en un seul `AggregateCacheDependency` objet nommé `aggregateDependencies`, qui est ensuite passé à la `Insert` (méthode).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-322">These are all combined into one `AggregateCacheDependency` object named `aggregateDependencies`, which is then passed into the `Insert` method.</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample15.cs)]

<span data-ttu-id="ed9a4-323">Ce nouveau code de test. S’affiche désormais le `Products`, `Categories`, ou `Suppliers` tables provoquent les données mises en cache à supprimer.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-323">Test this new code out. Now changes to the `Products`, `Categories`, or `Suppliers` tables cause the cached data to be evicted.</span></span> <span data-ttu-id="ed9a4-324">En outre, le `ProductsCL` classe s `UpdateProduct` (méthode), qui est appelée lors de la modification d’un produit par le biais du GridView, supprime la `MasterCacheKeyArray` la dépendance, ce qui entraîne la mise en cache de cache `ProductsDataTable` à supprimer et les données à récupérer de nouveau le prochain demande.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-324">Moreover, the `ProductsCL` class s `UpdateProduct` method, which is called when editing a product through the GridView, evicts the `MasterCacheKeyArray` cache dependency, which causes the cached `ProductsDataTable` to be evicted and the data to be re-retrieved on the next request.</span></span>

> [!NOTE]
> <span data-ttu-id="ed9a4-325">Dépendances de cache SQL peuvent également être utilisés avec [mise en cache de sortie](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-325">SQL cache dependencies can also be used with [output caching](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span></span> <span data-ttu-id="ed9a4-326">Pour une démonstration de cette fonctionnalité, consultez : [à l’aide du cache de sortie ASP.NET avec SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-326">For a demonstration of this functionality, see: [Using ASP.NET Output Caching with SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span></span>


## <a name="summary"></a><span data-ttu-id="ed9a4-327">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="ed9a4-327">Summary</span></span>

<span data-ttu-id="ed9a4-328">Lors de la mise en cache de la base de données, les données resteront dans l’idéal, dans le cache jusqu'à ce qu’il est modifié dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-328">When caching database data, the data will ideally remain in the cache until it is modified in the database.</span></span> <span data-ttu-id="ed9a4-329">Avec ASP.NET 2.0, les dépendances de cache SQL peuvent être créées et utilisées dans les scénarios déclaratives et par programme.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-329">With ASP.NET 2.0, SQL cache dependencies can be created and used in both declarative and programmatic scenarios.</span></span> <span data-ttu-id="ed9a4-330">L’une des difficultés avec cette approche est dans la découverte lorsque les données ont été modifiées.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-330">One of the challenges with this approach is in discovering when the data has been modified.</span></span> <span data-ttu-id="ed9a4-331">La version complète de Microsoft SQL Server 2005 fournit des fonctionnalités de notification qui peuvent avertir une application lorsqu’un résultat de requête a été modifiée.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-331">The full versions of Microsoft SQL Server 2005 provide notification capabilities that can alert an application when a query result has changed.</span></span> <span data-ttu-id="ed9a4-332">Pour l’édition Express de SQL Server 2005 et les versions antérieures de SQL Server, un système d’interrogation doit être utilisé à la place.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-332">For the Express Edition of SQL Server 2005 and older versions of SQL Server, a polling system must be used instead.</span></span> <span data-ttu-id="ed9a4-333">Heureusement, la configuration de l’infrastructure nécessaire d’interrogation est assez simple.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-333">Fortunately, setting up the necessary polling infrastructure is fairly straightforward.</span></span>

<span data-ttu-id="ed9a4-334">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="ed9a4-334">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="ed9a4-335">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="ed9a4-335">Further Reading</span></span>

<span data-ttu-id="ed9a4-336">Pour plus d’informations sur les sujets abordés dans ce didacticiel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="ed9a4-336">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ed9a4-337">À l’aide de Notifications de requête dans Microsoft SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="ed9a4-337">Using Query Notifications in Microsoft SQL Server 2005</span></span>](https://msdn.microsoft.com/library/ms175110.aspx)
- [<span data-ttu-id="ed9a4-338">Création d’une Notification de requête</span><span class="sxs-lookup"><span data-stu-id="ed9a4-338">Creating a Query Notification</span></span>](https://msdn.microsoft.com/library/ms188669.aspx)
- <span data-ttu-id="ed9a4-339">[Mise en cache dans ASP.NET avec la `SqlCacheDependency` classe](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-339">[Caching in ASP.NET with the `SqlCacheDependency` Class](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span></span>
- <span data-ttu-id="ed9a4-340">[Outil d’inscription de serveur SQL d’ASP.NET (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-340">[ASP.NET SQL Server Registration Tool (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span></span>
- [<span data-ttu-id="ed9a4-341">Vue d’ensemble de `SqlCacheDependency`</span><span class="sxs-lookup"><span data-stu-id="ed9a4-341">Overview of `SqlCacheDependency`</span></span>](http://www.aspnetresources.com/blog/sql_cache_depedency_overview.aspx)

## <a name="about-the-author"></a><span data-ttu-id="ed9a4-342">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="ed9a4-342">About the Author</span></span>

<span data-ttu-id="ed9a4-343">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept manuels ASP/ASP.NET et créateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-343">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ed9a4-344">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-344">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ed9a4-345">Son dernier ouvrage est [ *SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-345">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ed9a4-346">Il peut être atteint à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) ou via son blog, qui se trouvent à [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="ed9a4-346">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ed9a4-347">Remerciements</span><span class="sxs-lookup"><span data-stu-id="ed9a4-347">Special Thanks To</span></span>

<span data-ttu-id="ed9a4-348">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-348">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ed9a4-349">Réviseurs tête pour ce didacticiel ont été Marko Rangel Teresa Murphy et Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="ed9a4-349">Lead reviewers for this tutorial were Marko Rangel, Teresa Murphy, and Hilton Giesenow.</span></span> <span data-ttu-id="ed9a4-350">Vous souhaitez consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="ed9a4-350">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ed9a4-351">Dans ce cas, me supprimer une ligne à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-351">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ed9a4-352">[Précédent](caching-data-at-application-startup-cs.md)
> [Suivant](caching-data-with-the-objectdatasource-vb.md)</span><span class="sxs-lookup"><span data-stu-id="ed9a4-352">[Previous](caching-data-at-application-startup-cs.md)
[Next](caching-data-with-the-objectdatasource-vb.md)</span></span>
