---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Ajout de Confirmation côté Client lors de la suppression (c#) | Documents Microsoft
author: rick-anderson
description: Dans les interfaces que nous avons créé jusqu'à présent, un utilisateur peut supprimer accidentellement des données en cliquant sur le bouton de suppression lorsqu’ils destinée à cliquer sur le bouton Modifier. Dans ce t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 72b15d498e45cc519a14ecfe39111b224db88c30
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
---
<a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="5b94f-104">Ajout de Confirmation côté Client lors de la suppression (c#)</span><span class="sxs-lookup"><span data-stu-id="5b94f-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>
====================
<span data-ttu-id="5b94f-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5b94f-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5b94f-106">[Télécharger l’exemple d’application](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) ou [télécharger le PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5b94f-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="5b94f-107">Dans les interfaces que nous avons créé jusqu'à présent, un utilisateur peut supprimer accidentellement des données en cliquant sur le bouton de suppression lorsqu’ils destinée à cliquer sur le bouton Modifier.</span><span class="sxs-lookup"><span data-stu-id="5b94f-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="5b94f-108">Dans ce didacticiel, nous allons ajouter une boîte de dialogue de confirmation côté client qui s’affiche lorsque l’utilisateur clique sur le bouton Supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="5b94f-109">Introduction</span><span class="sxs-lookup"><span data-stu-id="5b94f-109">Introduction</span></span>

<span data-ttu-id="5b94f-110">Sur les didacticiels de plusieurs cours nous ve vu comment utiliser notre architecture d’application et les données de contrôles Web ObjectDataSource conjointement pour fournir une insertion, de modification et de suppression de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="5b94f-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="5b94f-111">La suppression des interfaces nous avons examiné jusqu’ici ont été composé d’une suppression bouton qui, lorsque vous cliquez sur, provoque une publication (postback) et appelle les opérations de mappage ObjectDataSource `Delete()` (méthode).</span><span class="sxs-lookup"><span data-stu-id="5b94f-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="5b94f-112">Le `Delete()` méthode appelle ensuite la méthode configurée à partir de la couche de logique métier, qui se propage l’appel à la couche d’accès aux données, émission réelle `DELETE` instruction à la base de données.</span><span class="sxs-lookup"><span data-stu-id="5b94f-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="5b94f-113">Alors que cette interface utilisateur permet de visiteurs supprimer des enregistrements dans les contrôles GridView, DetailsView ou FormView, il ne dispose pas de toute sorte de confirmation lorsque l’utilisateur clique sur le bouton Supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="5b94f-114">Si un utilisateur clique sur accidentellement le bouton de suppression lorsqu’ils destinée à cliquer sur Modifier, l’enregistrement qu'ils destinée à mettre à jour est supprimé à la place.</span><span class="sxs-lookup"><span data-stu-id="5b94f-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="5b94f-115">Pour résoudre ce problème, dans ce didacticiel, nous allons ajouter une boîte de dialogue de confirmation côté client qui s’affiche lorsque l’utilisateur clique sur le bouton Supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="5b94f-116">Le code JavaScript `confirm(string)` fonction affiche son paramètre d’entrée de chaîne en tant que le texte à l’intérieur d’une boîte de dialogue modale qui comprend deux boutons - OK et Annuler (voir Figure 1).</span><span class="sxs-lookup"><span data-stu-id="5b94f-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="5b94f-117">Le `confirm(string)` fonction retourne une valeur booléenne en fonction de l’utilisateur clique sur le bouton (`true`, si l’utilisateur clique sur OK, et `false` s’il clique sur Annuler).</span><span class="sxs-lookup"><span data-stu-id="5b94f-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![La méthode de confirm(string) JavaScript affiche Modal, côté Client Messagebox](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="5b94f-119">**Figure 1**: le code JavaScript `confirm(string)` méthode affiche un Messagebox Modal, côté Client</span><span class="sxs-lookup"><span data-stu-id="5b94f-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="5b94f-120">Au cours de l’envoi d’un formulaire, si la valeur `false` est retourné à partir d’un gestionnaire d’événements côté client, puis l’envoi du formulaire est annulée.</span><span class="sxs-lookup"><span data-stu-id="5b94f-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="5b94f-121">À l’aide de cette fonctionnalité, nous pouvons avoir Delete bouton s côté client `onclick` Gestionnaire d’événements retourne la valeur d’un appel à `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="5b94f-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="5b94f-122">Si l’utilisateur clique sur Annuler, `confirm(string)` renvoie false, ce qui provoque l’envoi du formulaire Annuler.</span><span class="sxs-lookup"><span data-stu-id="5b94f-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="5b94f-123">Supprimer avec aucune publication (postback), le produit dont bouton de suppression a gagné t.</span><span class="sxs-lookup"><span data-stu-id="5b94f-123">With no postback, the product whose Delete button was clicked won t be deleted.</span></span> <span data-ttu-id="5b94f-124">Si, toutefois, l’utilisateur clique sur OK dans la boîte de dialogue de confirmation, la publication (postback) va continuer sans interruption, et le produit sera supprimé.</span><span class="sxs-lookup"><span data-stu-id="5b94f-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="5b94f-125">Consultez [à l’aide de JavaScript s `confirm()` méthode à l’envoi du formulaire contrôle](http://www.webreference.com/programming/javascript/confirm/) pour plus d’informations sur cette technique.</span><span class="sxs-lookup"><span data-stu-id="5b94f-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="5b94f-126">Ajouter le script côté client nécessaire est légèrement différente si vous utilisez des modèles que lorsque vous utilisez un CommandField.</span><span class="sxs-lookup"><span data-stu-id="5b94f-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="5b94f-127">Par conséquent, dans ce didacticiel, nous allons examiner un GridView et FormView exemple.</span><span class="sxs-lookup"><span data-stu-id="5b94f-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="5b94f-128">À l’aide de techniques de confirmation du côté client, telles que celles présentées dans ce didacticiel, part du principe que vos utilisateurs visitent avec les navigateurs qui prennent en charge JavaScript et qu’ils ont JavaScript est activé.</span><span class="sxs-lookup"><span data-stu-id="5b94f-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="5b94f-129">Si une de ces hypothèses ne sont pas true pour un utilisateur particulier, en cliquant sur le bouton Supprimer provoque immédiatement une publication (ne pas et affiche un messagebox confirmer).</span><span class="sxs-lookup"><span data-stu-id="5b94f-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="5b94f-130">Étape 1 : Création d’un FormView qui prend en charge la suppression</span><span class="sxs-lookup"><span data-stu-id="5b94f-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="5b94f-131">Commencez par ajouter un FormView à le `ConfirmationOnDelete.aspx` page dans le `EditInsertDelete` dossier, en le liant à un nouveau ObjectDataSource qui extrait dans les informations de produit via le `ProductsBLL` classe s `GetProducts()` (méthode).</span><span class="sxs-lookup"><span data-stu-id="5b94f-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="5b94f-132">Également configurer ObjectDataSource afin que le `ProductsBLL` classe s `DeleteProduct(productID)` méthode mappée à la s ObjectDataSource `Delete()` méthode ; Vérifiez que les onglets d’insertion et de mise à jour de listes déroulantes sont définies à (None).</span><span class="sxs-lookup"><span data-stu-id="5b94f-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="5b94f-133">Enfin, vérifiez la case à cocher Activer la pagination dans la balise active de s FormView.</span><span class="sxs-lookup"><span data-stu-id="5b94f-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="5b94f-134">Après ces étapes, le balisage déclaratif de nouveau ObjectDataSource s doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="5b94f-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="5b94f-135">Comme dans nos exemples précédentes qui n’utilisent pas d’accès concurrentiel optimiste, prenez un moment pour effacer le s ObjectDataSource `OldValuesParameterFormatString` propriété.</span><span class="sxs-lookup"><span data-stu-id="5b94f-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="5b94f-136">Dans la mesure où il a été lié à un contrôle ObjectDataSource prend uniquement en charge la suppression, le FormView s `ItemTemplate` offre uniquement le bouton Supprimer manque les boutons Nouveau et mise à jour.</span><span class="sxs-lookup"><span data-stu-id="5b94f-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="5b94f-137">Toutefois, le balisage déclaratif s FormView, inclut un superflu `EditItemTemplate` et `InsertItemTemplate`, qui peut être supprimé.</span><span class="sxs-lookup"><span data-stu-id="5b94f-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="5b94f-138">Prenez un moment pour personnaliser le `ItemTemplate` sorte qu’il affiche uniquement un sous-ensemble du produit de champs de données.</span><span class="sxs-lookup"><span data-stu-id="5b94f-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="5b94f-139">Je ve configuré mine pour afficher le nom de produit s dans un `<h3>` titre au-dessus de ses noms de fournisseur et la catégorie (ainsi que le bouton Supprimer).</span><span class="sxs-lookup"><span data-stu-id="5b94f-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="5b94f-140">Avec ces modifications, nous avons une page web entièrement fonctionnelle qui permet à un utilisateur basculer entre les produits d’un à la fois, avec la possibilité de supprimer un produit en cliquant simplement sur le bouton Supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="5b94f-141">La figure 2 illustre une capture d’écran de notre progression jusque-là lorsqu’ils sont affichés via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="5b94f-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="5b94f-142">[![Le FormView affiche des informations sur un produit unique](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="5b94f-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="5b94f-143">**Figure 2**: le FormView affiche des informations sur un produit unique ([cliquez pour afficher l’image en taille réelle](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="5b94f-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="5b94f-144">Étape 2 : Appel de la fonction confirm(string) à partir de la supprimer des boutons onclick côté Client événement</span><span class="sxs-lookup"><span data-stu-id="5b94f-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="5b94f-145">Avec le contrôle FormView créé, l’étape finale consiste à configurer le bouton supprimer ces qui, lorsqu’il s cliqué par le visiteur, le code JavaScript `confirm(string)` fonction est appelée.</span><span class="sxs-lookup"><span data-stu-id="5b94f-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="5b94f-146">Ajout d’un script côté client à un bouton, LinkButton ou ImageButton s côté client `onclick` événement peut être effectué à l’aide de la `OnClientClick property`, qui est une nouveauté d’ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="5b94f-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="5b94f-147">Étant donné que nous voulons que la valeur de la `confirm(string)` renvoyée de la fonction, définissez simplement cette propriété sur : `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="5b94f-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="5b94f-148">Après cette modification de la syntaxe déclarative de supprimer le LinkButton s doit ressembler à :</span><span class="sxs-lookup"><span data-stu-id="5b94f-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="5b94f-149">Il est tout s !</span><span class="sxs-lookup"><span data-stu-id="5b94f-149">That s all there is to it!</span></span> <span data-ttu-id="5b94f-150">Figure 3 illustre une capture d’écran de confirmation de cette action.</span><span class="sxs-lookup"><span data-stu-id="5b94f-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="5b94f-151">En cliquant sur le bouton Supprimer affiche la boîte de dialogue de confirmation.</span><span class="sxs-lookup"><span data-stu-id="5b94f-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="5b94f-152">Si l’utilisateur clique sur Annuler, la publication est annulée et le produit n’est pas supprimé.</span><span class="sxs-lookup"><span data-stu-id="5b94f-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="5b94f-153">Si, toutefois, l’utilisateur clique sur OK, continue de la publication (postback) et s ObjectDataSource `Delete()` méthode est appelée, sanctionné dans l’enregistrement de base de données en cours de suppression.</span><span class="sxs-lookup"><span data-stu-id="5b94f-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="5b94f-154">La chaîne passée dans le `confirm(string)` fonction JavaScript est délimitée par des apostrophes (plutôt que des guillemets).</span><span class="sxs-lookup"><span data-stu-id="5b94f-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="5b94f-155">Dans JavaScript, les chaînes peuvent être délimitées à l’aide de type caractère.</span><span class="sxs-lookup"><span data-stu-id="5b94f-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="5b94f-156">Nous utilisons des apostrophes ici afin que les délimiteurs de la chaîne passée dans `confirm(string)` n’introduisent une ambiguïté avec séparateurs utilisés pour la `OnClientClick` valeur de propriété.</span><span class="sxs-lookup"><span data-stu-id="5b94f-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="5b94f-157">[![Une Confirmation est maintenant affiché lorsque en cliquant sur le bouton Supprimer](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5b94f-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="5b94f-158">**Figure 3**: une Confirmation est maintenant affiché lorsque en cliquant sur le bouton Supprimer ([cliquez pour afficher l’image en taille réelle](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="5b94f-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="5b94f-159">Étape 3 : Configuration de la propriété OnClientClick pour le bouton Supprimer dans un CommandField</span><span class="sxs-lookup"><span data-stu-id="5b94f-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="5b94f-160">Lorsque vous travaillez avec un bouton, LinkButton ou ImageButton directement dans un modèle, une boîte de dialogue de confirmation peut être associée à celui-ci, simplement en configurant ses `OnClientClick` propriété pour retourner les résultats du script JavaScript `confirm(string)` (fonction).</span><span class="sxs-lookup"><span data-stu-id="5b94f-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="5b94f-161">Toutefois, le CommandField, qui ajoute un champ de boutons de suppression à un contrôle GridView ou le contrôle DetailsView - n’a pas un `OnClientClick` propriété qui peut être définie de manière déclarative.</span><span class="sxs-lookup"><span data-stu-id="5b94f-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="5b94f-162">Au lieu de cela, nous devons faire référence par programme le bouton Supprimer dans le GridView ou DetailsView s approprié `DataBound` Gestionnaire d’événements et définissez son `OnClientClick` propriété il.</span><span class="sxs-lookup"><span data-stu-id="5b94f-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="5b94f-163">Lorsque vous définissez le bouton Supprimer s `OnClientClick` propriété dans les zones appropriées `DataBound` Gestionnaire d’événements, nous avons accès à lié aux données à l’enregistrement actif.</span><span class="sxs-lookup"><span data-stu-id="5b94f-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="5b94f-164">Cela signifie que nous pouvons étendre le message de confirmation pour inclure des détails sur l’enregistrement particulier, tel que « Êtes-vous sûr de que vouloir supprimer le produit Tran sont ? »</span><span class="sxs-lookup"><span data-stu-id="5b94f-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="5b94f-165">Cette personnalisation est également possible dans les modèles à l’aide de la syntaxe de liaison de données.</span><span class="sxs-lookup"><span data-stu-id="5b94f-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="5b94f-166">Pour le paramètre recommandé le `OnClientClick` propriété pour le bouton de suppression dans un CommandField, s let ajouter un contrôle GridView à la page.</span><span class="sxs-lookup"><span data-stu-id="5b94f-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="5b94f-167">Configurez cette GridView pour utiliser le même contrôle ObjectDataSource par le FormView.</span><span class="sxs-lookup"><span data-stu-id="5b94f-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="5b94f-168">Également limiter les s GridView BoundFields à inclure uniquement le nom de produit, la catégorie et le fournisseur.</span><span class="sxs-lookup"><span data-stu-id="5b94f-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="5b94f-169">Enfin, vérifiez la case à cocher Activer la suppression de la balise active de GridView s.</span><span class="sxs-lookup"><span data-stu-id="5b94f-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="5b94f-170">Cela ajoutera un CommandField au GridView s `Columns` collection avec son `ShowDeleteButton` propriété `true`.</span><span class="sxs-lookup"><span data-stu-id="5b94f-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="5b94f-171">Après avoir apporté ces modifications, votre balisage déclaratif de GridView s doit se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="5b94f-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="5b94f-172">Le CommandField contient une seule instance de supprimer un LinkButton qui sont accessibles par programme à partir de la s GridView `RowDataBound` Gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="5b94f-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="5b94f-173">Une fois référencé, nous pouvons définir son `OnClientClick` propriété en conséquence.</span><span class="sxs-lookup"><span data-stu-id="5b94f-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="5b94f-174">Créer un gestionnaire d’événements pour le `RowDataBound` événement utilisant le code suivant :</span><span class="sxs-lookup"><span data-stu-id="5b94f-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="5b94f-175">Ce gestionnaire d’événements fonctionne avec les lignes de données (ceux qui ont le bouton Supprimer) et commence en par programmation en référençant le bouton Supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="5b94f-176">En général, utilisez le modèle suivant :</span><span class="sxs-lookup"><span data-stu-id="5b94f-176">In general use the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="5b94f-177">*ButtonType* est le type de bouton utilisé par le CommandField - Button, LinkButton ou ImageButton.</span><span class="sxs-lookup"><span data-stu-id="5b94f-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="5b94f-178">Par défaut, le CommandField utilise LinkButton, mais elle peut être personnalisée via le s CommandField `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="5b94f-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="5b94f-179">Le *commandFieldIndex* est l’index ordinal de la CommandField dans le GridView s `Columns` collection, tandis que la *controlIndex* est l’index du bouton Supprimer dans le s CommandField `Controls` collection.</span><span class="sxs-lookup"><span data-stu-id="5b94f-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="5b94f-180">Le *controlIndex* valeur dépend de la position du bouton s par rapport à d’autres boutons dans la CommandField.</span><span class="sxs-lookup"><span data-stu-id="5b94f-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="5b94f-181">Par exemple, si le bouton uniquement affiché dans le CommandField est le bouton Supprimer, utilisez un index de 0.</span><span class="sxs-lookup"><span data-stu-id="5b94f-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="5b94f-182">Si, toutefois, s’il n’y a un bouton Modifier qui précède le bouton Supprimer, utilisez un index de 2.</span><span class="sxs-lookup"><span data-stu-id="5b94f-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="5b94f-183">La raison pour laquelle un index de 2 est utilisé est car les deux contrôles sont ajoutés à la CommandField avant le bouton de suppression : le bouton Modifier et LiteralControl s utilisé pour ajouter un espace entre les boutons Modifier et supprimer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="5b94f-184">Dans notre exemple particulier, la CommandField utilise LinkButton et, l’est le champ le plus à gauche, a un *commandFieldIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="5b94f-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="5b94f-185">Étant donné qu’aucun autre bouton, mais le bouton Supprimer dans le CommandField, nous utilisons un *controlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="5b94f-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="5b94f-186">Après vous référencez le bouton Supprimer dans le CommandField, nous extrayons ensuite des informations sur le produit lié à la ligne actuelle de GridView.</span><span class="sxs-lookup"><span data-stu-id="5b94f-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="5b94f-187">Enfin, nous avons défini le bouton Supprimer s `OnClientClick` propriété JavaScript approprié, qui inclut le nom de produit s.</span><span class="sxs-lookup"><span data-stu-id="5b94f-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="5b94f-188">Étant donné que la chaîne JavaScript passé dans le `confirm(string)` fonction est délimitée par des apostrophes, nous devons d’échappement d’apostrophe qui apparaissent dans le nom du produit s.</span><span class="sxs-lookup"><span data-stu-id="5b94f-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="5b94f-189">En particulier, les apostrophes dans le nom du produit s sont précédées par «`\'`».</span><span class="sxs-lookup"><span data-stu-id="5b94f-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="5b94f-190">Avec ces modifications terminées, cliquez sur un bouton Supprimer dans le GridView s’affiche une boîte de dialogue de confirmation personnalisé zone (voir Figure 4).</span><span class="sxs-lookup"><span data-stu-id="5b94f-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="5b94f-191">Comme avec le messagebox confirmation dans le FormView, si l’utilisateur clique sur Annuler la publication est annulée, ce qui évite la suppression ne se produise.</span><span class="sxs-lookup"><span data-stu-id="5b94f-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="5b94f-192">Cette technique peut également être utilisée pour accéder par programme le bouton Supprimer dans le CommandField dans un contrôle DetailsView.</span><span class="sxs-lookup"><span data-stu-id="5b94f-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="5b94f-193">Pour le contrôle DetailsView, toutefois, vous d créer un gestionnaire d’événements pour le `DataBound` événement, le contrôle DetailsView n’ayant pas un `RowDataBound` événement.</span><span class="sxs-lookup"><span data-stu-id="5b94f-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="5b94f-194">[![En cliquant sur le bouton de suppression s GridView affiche une boîte de dialogue de Confirmation personnalisé](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="5b94f-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="5b94f-195">**Figure 4**: en cliquant sur le bouton Supprimer de s GridView affiche une boîte de dialogue de Confirmation personnalisé ([cliquez pour afficher l’image en taille réelle](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="5b94f-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="5b94f-196">Utilisation de TemplateField</span><span class="sxs-lookup"><span data-stu-id="5b94f-196">Using TemplateFields</span></span>

<span data-ttu-id="5b94f-197">Un des inconvénients de la CommandField est que les boutons doivent être accessibles via l’indexation et que l’objet résultant doit être converti au type de bouton approprié (Button, LinkButton ou ImageButton).</span><span class="sxs-lookup"><span data-stu-id="5b94f-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="5b94f-198">À l’aide de « nombres magiques » et codé en dur les types peuvent causer des problèmes qui ne peut pas être détectées avant l’exécution.</span><span class="sxs-lookup"><span data-stu-id="5b94f-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="5b94f-199">Par exemple, si vous ou un autre développeur, ajoute de nouveaux boutons à la CommandField à un moment donné dans le futur (par exemple, un bouton Modifier) ou des modifications du `ButtonType` propriété, le code existant continuera à compiler sans erreur, mais sur la page peut-être générer une exception ou un comportement inattendu, selon la façon dont votre code a été écrit et quelles modifications ont été apportées.</span><span class="sxs-lookup"><span data-stu-id="5b94f-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="5b94f-200">Une autre approche consiste à convertir des s GridView et DetailsView CommandFields dans TemplateField.</span><span class="sxs-lookup"><span data-stu-id="5b94f-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="5b94f-201">Cette opération génère un TemplateField avec un `ItemTemplate` qui a un LinkButton (ou bouton ou ImageButton) pour chaque bouton de la CommandField.</span><span class="sxs-lookup"><span data-stu-id="5b94f-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="5b94f-202">Ces boutons `OnClientClick` propriétés peuvent être attribuées de façon déclarative, comme nous avons vu avec le contrôle FormView ou accessible par programmation dans les zones appropriées `DataBound` Gestionnaire d’événements à l’aide du modèle suivant :</span><span class="sxs-lookup"><span data-stu-id="5b94f-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="5b94f-203">Où *controlID* est la valeur du bouton s `ID` propriété.</span><span class="sxs-lookup"><span data-stu-id="5b94f-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="5b94f-204">Alors que ce modèle nécessite toujours un type codé en dur pour la conversion, il supprime la nécessité pour l’indexation, ce qui permet la mise en page Modifier sans entraîne une erreur d’exécution.</span><span class="sxs-lookup"><span data-stu-id="5b94f-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="5b94f-205">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="5b94f-205">Summary</span></span>

<span data-ttu-id="5b94f-206">Le code JavaScript `confirm(string)` fonction est une technique couramment utilisée pour le contrôle du flux de travail envoi du formulaire.</span><span class="sxs-lookup"><span data-stu-id="5b94f-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="5b94f-207">Lors de l’exécution, la fonction affiche une boîte de dialogue modale, côté client qui inclut les deux boutons OK et Annuler.</span><span class="sxs-lookup"><span data-stu-id="5b94f-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="5b94f-208">Si l’utilisateur clique sur OK, la `confirm(string)` fonction renvoie `true`; cliquez sur Annuler pour revenir `false`.</span><span class="sxs-lookup"><span data-stu-id="5b94f-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="5b94f-209">Cette fonctionnalité, couplée avec un comportement de navigateur s pour annuler l’envoi d’un formulaire si un gestionnaire d’événements pendant le processus de soumission retourne `false`, peut être utilisé pour afficher un messagebox de confirmation lorsque vous supprimez un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="5b94f-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="5b94f-210">Le `confirm(string)` fonction peut être associée à un bouton Web contrôle s côté client `onclick` Gestionnaire d’événements via le contrôle s `OnClientClick` propriété.</span><span class="sxs-lookup"><span data-stu-id="5b94f-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="5b94f-211">Lorsque vous travaillez avec un bouton Supprimer dans un modèle - dans un des modèles FormView s ou dans TemplateField dans le contrôle DetailsView ou GridView - cette propriété peut être définie soit de façon déclarative ou par programme, comme nous l’avons vu dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="5b94f-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="5b94f-212">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="5b94f-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5b94f-213">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="5b94f-213">About the Author</span></span>

<span data-ttu-id="5b94f-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept manuels ASP/ASP.NET et créateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="5b94f-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5b94f-215">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="5b94f-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5b94f-216">Son dernier ouvrage est [ *SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5b94f-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5b94f-217">Il peut être atteint à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) ou via son blog, qui se trouvent à [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5b94f-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5b94f-218">[Précédent](implementing-optimistic-concurrency-cs.md)
> [Suivant](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="5b94f-218">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>
