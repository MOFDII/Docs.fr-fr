---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
title: Filtrage avec une liste déroulante (c#) maître/détail | Documents Microsoft
author: rick-anderson
description: Dans ce didacticiel, nous expliquons comment afficher les rapports maître/détail dans une page web à l’aide de la compréhension des listes pour afficher les enregistrements de 'master' et un contrôle DataList à Affic...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/18/2007
ms.topic: article
ms.assetid: 07fa47ae-e491-4a2f-b265-d342b9ddef46
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: c84902ccf028c976246380abfaebb6a76c573603
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
---
<a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="f0d9d-103">Maître/détail, le filtrage avec une liste déroulante (c#)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-103">Master/Detail Filtering With a DropDownList (C#)</span></span>
====================
<span data-ttu-id="f0d9d-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f0d9d-105">[Télécharger l’exemple d’application](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) ou [télécharger le PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span></span>

> <span data-ttu-id="f0d9d-106">Dans ce didacticiel, nous expliquons comment afficher les rapports maître/détail dans une page web à l’aide de la compréhension des listes pour afficher les enregistrements « maîtres » et un contrôle DataList pour afficher les « détails ».</span><span class="sxs-lookup"><span data-stu-id="f0d9d-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>


## <a name="introduction"></a><span data-ttu-id="f0d9d-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="f0d9d-107">Introduction</span></span>

<span data-ttu-id="f0d9d-108">Le rapport maître/détail, que nous avons créé tout d’abord à l’aide d’un GridView plus haut [filtrage de maître/détail avec un DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) didacticiel commence en affichant un ensemble d’enregistrements « maîtres ».</span><span class="sxs-lookup"><span data-stu-id="f0d9d-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="f0d9d-109">L’utilisateur peut puis accédez à un des enregistrements maîtres, donc affichage « Détails. » de cet enregistrement maître</span><span class="sxs-lookup"><span data-stu-id="f0d9d-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="f0d9d-110">Les rapports maître/détail sont un choix idéal pour visualiser les relations un-à-plusieurs et pour afficher des informations détaillées en particulier les tables « larges » (ceux qui ont un grand nombre de colonnes).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="f0d9d-111">Nous avons examiné comment implémenter les rapports maître/détail à l’aide des contrôles GridView et DetailsView dans les didacticiels précédents.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="f0d9d-112">Dans ce didacticiel et les deux, nous allons réexaminer ces concepts, mais le focus sur l’utilisation du contrôle DataList et contrôle de répéteur à la place.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="f0d9d-113">Dans ce didacticiel, nous allons étudier à l’aide d’une liste déroulante pour contenir les enregistrements « maîtres », les enregistrements « details » dans un contrôle DataList.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="f0d9d-114">Étape 1 : Ajout de Pages Web didacticiel maître/détail</span><span class="sxs-lookup"><span data-stu-id="f0d9d-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="f0d9d-115">Avant de commencer ce didacticiel, nous allons tout d’abord long pour ajouter le dossier et les pages ASP.NET que nous aurons besoin pour ce didacticiel et les deux vous traitez des rapports maître/détail en utilisant les contrôles DataList et répéteur.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="f0d9d-116">Commencez par créer un nouveau dossier dans le projet nommé `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="f0d9d-117">Ensuite, ajoutez les pages ASP.NET cinq suivantes à ce dossier, configuré pour utiliser la page maître de `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="f0d9d-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`


![Créez un dossier DataListRepeaterFiltering et ajouter les Pages ASP.NET didacticiel](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image1.png)

<span data-ttu-id="f0d9d-119">**Figure 1**: créer un `DataListRepeaterFiltering` dossier et ajouter les Pages ASP.NET didacticiel</span><span class="sxs-lookup"><span data-stu-id="f0d9d-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>


<span data-ttu-id="f0d9d-120">Ensuite, ouvrez le `Default.aspx` page et faites glisser le `SectionLevelTutorialListing.ascx` contrôle utilisateur à partir de la `UserControls` dossier sur l’aire de conception.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="f0d9d-121">Ce contrôle utilisateur, que nous avons créé dans le [les Pages maîtres et Navigation du Site](../introduction/master-pages-and-site-navigation-cs.md) didacticiel, énumère le plan de site et affiche les didacticiels à partir de la section en cours dans une liste à puces.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>


<span data-ttu-id="f0d9d-122">[![Ajouter le contrôle utilisateur de SectionLevelTutorialListing.ascx vers Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span></span>

<span data-ttu-id="f0d9d-123">**Figure 2**: ajouter la `SectionLevelTutorialListing.ascx` contrôle utilisateur à `Default.aspx` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span></span>


<span data-ttu-id="f0d9d-124">Pour disposer de l’affichage de liste à puces les didacticiels maître/détail que nous allons créer, nous devons les ajouter à la carte de site.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="f0d9d-125">Ouvrez le `Web.sitemap` et ajoutez le balisage suivant après la balise de nœud de mappage de site « Affichage des données avec la DataList et répéteur » :</span><span class="sxs-lookup"><span data-stu-id="f0d9d-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample1.xml)]


![Mettre à jour le plan de Site pour inclure les nouvelles Pages ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image5.png)

<span data-ttu-id="f0d9d-127">**Figure 3**: mettre à jour le plan de Site pour inclure les nouvelles Pages ASP.NET</span><span class="sxs-lookup"><span data-stu-id="f0d9d-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>


## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="f0d9d-128">Étape 2 : Afficher les catégories dans une liste déroulante</span><span class="sxs-lookup"><span data-stu-id="f0d9d-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="f0d9d-129">Notre rapport maître/détail répertorie les catégories dans une liste déroulante, avec les produits de l’élément de liste sélectionné affichées plus bas dans la page dans un contrôle DataList.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="f0d9d-130">La première tâche avance us, est ensuite, pour que les catégories affichées dans une liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="f0d9d-131">Commencez par ouvrir le `FilterByDropDownList.aspx` page dans le `DataListRepeaterFiltering` faites glisser un contrôle DropDownList à partir de la boîte à outils vers le Concepteur de la page.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="f0d9d-132">Ensuite, affectez de DropDownList `ID` propriété `Categories`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="f0d9d-133">Cliquez sur le lien de choisir la Source de données à partir de la balise de DropDownList et créer un nouveau ObjectDataSource nommé `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>


<span data-ttu-id="f0d9d-134">[![Ajouter un nouveau ObjectDataSource nommé CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span></span>

<span data-ttu-id="f0d9d-135">**Figure 4**: ajouter un nouveau nommé de ObjectDataSource `CategoriesDataSource` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span></span>


<span data-ttu-id="f0d9d-136">Configurer le nouveau ObjectDataSource tel qu’il appelle le `CategoriesBLL` la classe `GetCategories()` (méthode).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="f0d9d-137">Après avoir configuré ObjectDataSource nous devons encore spécifier quel champ de source de données doit être affiché dans la liste DropDownList et un doit être associé en tant que la valeur de chaque élément de liste.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="f0d9d-138">Avoir le `CategoryName` champ en tant que l’affichage et `CategoryID` comme valeur pour chaque élément de liste.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="f0d9d-139">[![A l’affichage DropDownList le champ nom de catégorie et utilisez CategoryID comme valeur](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span></span>

<span data-ttu-id="f0d9d-140">**Figure 5**: affiche la DropDownList le `CategoryName` champ et utilisez `CategoryID` comme valeur ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span></span>


<span data-ttu-id="f0d9d-141">À ce stade, nous avons un contrôle DropDownList qui est rempli avec les enregistrements à partir de la `Categories` table (tous accomplie dans environ six secondes).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="f0d9d-142">La figure 6 illustre notre progression jusque-là lorsqu’ils sont affichés via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="f0d9d-143">[![Une liste déroulante répertorie les catégories en cours](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span></span>

<span data-ttu-id="f0d9d-144">**Figure 6**: une liste déroulante répertorie les catégories actuel ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span></span>


## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="f0d9d-145">Étape 2 : Ajout du contrôle DataList produits</span><span class="sxs-lookup"><span data-stu-id="f0d9d-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="f0d9d-146">La dernière étape de notre rapport maître/détail est pour répertorier les produits associés à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="f0d9d-147">Pour ce faire, ajoutez un contrôle DataList à la page et créer un nouveau ObjectDataSource nommé `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="f0d9d-148">Avoir le `ProductsByCategoryDataSource` contrôle récupérer ses données à partir de la `ProductsBLL` la classe `GetProductsByCategoryID(categoryID)` (méthode).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f0d9d-149">Étant donné que ce rapport maître/détail est en lecture seule, choisissez (aucun) option dans les onglets INSERT, UPDATE et DELETE.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="f0d9d-150">[![Sélectionnez la méthode GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span></span>

<span data-ttu-id="f0d9d-151">**Figure 7**: sélectionnez le `GetProductsByCategoryID(categoryID)` (méthode) ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span></span>


<span data-ttu-id="f0d9d-152">Après avoir cliqué sur Suivant, l’Assistant ObjectDataSource nous invite pour la source de la valeur pour le `GetProductsByCategoryID(categoryID)` la méthode *`categoryID`* paramètre.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="f0d9d-153">Pour utiliser la valeur de l’élément sélectionné `categories` DropDownList élément définie la source de paramètre pour le contrôle et le ControlID à `Categories`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="f0d9d-154">[![Affectez à la valeur de DropDownList catégories categoryID paramètre](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span></span>

<span data-ttu-id="f0d9d-155">**Figure 8**: définir le *`categoryID`* paramètre à la valeur de la `Categories` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span></span>


<span data-ttu-id="f0d9d-156">À la fin de l’Assistant Configurer la Source de données, Visual Studio génère automatiquement un `ItemTemplate` pour le contrôle DataList qui affiche le nom et la valeur de chaque champ de données.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="f0d9d-157">Nous allons améliorer du contrôle DataList au lieu d’utiliser un `ItemTemplate` qui affiche simplement le nom du produit, catégorie, fournisseur, quantité par unité et le prix avec un `SeparatorTemplate` qui injecte un `<hr>` élément entre chaque élément.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="f0d9d-158">Je vais utiliser la `ItemTemplate` à partir d’un exemple dans le [affichage des données avec les contrôles de répéteur DataList](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) didacticiel, mais n’hésitez à utiliser le balisage de modèle, vous trouvez plus attrayante.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="f0d9d-159">Après avoir apporté ces modifications, votre DataList et le balisage de son ObjectDataSource doivent ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="f0d9d-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="f0d9d-160">Prenez un moment à consulter notre progression dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="f0d9d-161">Lors de la première visite de la page, les produits appartenant à la catégorie sélectionnée (boissons) sont affichées (comme indiqué dans la Figure 9), mais la modification DropDownList ne mettre à jour les données.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="f0d9d-162">Il s’agit, car une publication (postback) doit survenir pour que le contrôle DataList à mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="f0d9d-163">Pour cela vous pouvez soit définie de DropDownList `AutoPostBack` propriété `true` ou ajouter un contrôle bouton Web à la page.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="f0d9d-164">Pour ce didacticiel, j’ai choisi pour définir de DropDownList `AutoPostBack` propriété `true`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="f0d9d-165">Figures 9 et 10 illustrent le rapport maître/détail en action.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="f0d9d-166">[![Lors de la première visite de la Page, les produits de boissons sont affichés.](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span></span>

<span data-ttu-id="f0d9d-167">**Figure 9**: lors de la première visite de la Page, les produits de boissons sont affichés ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span></span>


<span data-ttu-id="f0d9d-168">[![Sélection d’un nouveau produit (produit) automatiquement provoque une publication (postback), la mise à jour du contrôle DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span></span>

<span data-ttu-id="f0d9d-169">**La figure 10**: sélection d’un nouveau produit (produit) automatiquement provoque une publication (postback), la mise à jour du contrôle DataList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="f0d9d-170">Ajout d’un élément de liste «--Choisir une catégorie : »</span><span class="sxs-lookup"><span data-stu-id="f0d9d-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="f0d9d-171">Lors de la première visite le `FilterByDropDownList.aspx` page les catégories premier élément de liste du DropDownList (boissons) est sélectionnée par défaut, indiquant les produits de boissons dans le contrôle DataList.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="f0d9d-172">Dans le *filtrage de maître/détail avec un DropDownList* didacticiel, nous avons ajouté une option «--choisir une catégorie-- » à DropDownList qui a été sélectionnée par défaut et, lorsque sélectionné, affiche *tous les* de la produits de la base de données.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="f0d9d-173">Une telle approche était facile à gérer la liste des produits dans un GridView, chaque ligne de produit s’élevait à une petite quantité d’espace d’écran.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="f0d9d-174">Avec le contrôle DataList, toutefois, les informations de chaque produit consomment une quantité partie supérieure de l’écran.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="f0d9d-175">Nous allons quand même ajouter une option «--choisir une catégorie-- » et qu’elle est sélectionnée par défaut ont, mais il lieu d’afficher tous les produits lorsque sélectionné, nous allons configurer pour qu’il n’affiche aucun produit.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="f0d9d-176">Pour ajouter un nouvel élément de liste à DropDownList, accédez à la fenêtre Propriétés, puis cliquez sur le bouton de sélection dans le `Items` propriété.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="f0d9d-177">Ajouter un nouvel élément de liste avec la `Text` «--choisir une catégorie-- » et le `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>


![Ajouter une](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image27.png)

<span data-ttu-id="f0d9d-179">**Figure 11**: ajouter un élément de liste «--Choisir une catégorie : »</span><span class="sxs-lookup"><span data-stu-id="f0d9d-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>


<span data-ttu-id="f0d9d-180">Ou bien, vous pouvez ajouter l’élément de liste en ajoutant le balisage suivant pour DropDownList :</span><span class="sxs-lookup"><span data-stu-id="f0d9d-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="f0d9d-181">En outre, nous devons définir le contrôle de DropDownList `AppendDataBoundItems` à `true` , car si elle est définie sur `false` (la valeur par défaut), lorsque les catégories sont liés aux contrôles DropDownList de ObjectDataSource, elles remplaceront toute liste ajoutés manuellement éléments.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>


![La valeur de la propriété AppendDataBoundItems True](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image28.png)

<span data-ttu-id="f0d9d-183">**Figure 12**: définir le `AppendDataBoundItems` True à la propriété</span><span class="sxs-lookup"><span data-stu-id="f0d9d-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="f0d9d-184">La raison pour laquelle nous avons choisi la valeur `0` pour obtenir la liste «--Choisir une catégorie-- » élément est, car il n’y pas de catégories dans le système avec une valeur de `0`, par conséquent, aucun enregistrement de produit n’est retournées lorsque l’élément de liste «--Choisir une catégorie-- » est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="f0d9d-185">Pour confirmer cela, prenez un moment pour consulter la page via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="f0d9d-186">Comme le montre la Figure 13, lorsque initialement l’affichage de la page de l’élément de liste «--Choisir une catégorie-- » est sélectionné et aucun produit n’est affichés.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>


<span data-ttu-id="f0d9d-187">[![Lors de la](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="f0d9d-188">**Figure 13**: lorsque l’élément de liste «--Choisir une catégorie-- » est sélectionnée, les produits non sont affichés ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="f0d9d-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span></span>


<span data-ttu-id="f0d9d-189">Si vous affichez plutôt *tous les* des produits lorsque l’option «--choisir une catégorie-- » est sélectionnée, utilisez la valeur `-1` à la place.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="f0d9d-190">Le lecteur perspicace souvenez-vous que précédent dans le *filtrage de maître/détail avec un DropDownList* didacticiel, nous avons mis à jour le `ProductsBLL` de classe `GetProductsByCategoryID(categoryID)` (méthode) afin que si un *`categoryID`* valeur de `-1` a été passé, produit tous les enregistrements retournés.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="f0d9d-191">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="f0d9d-191">Summary</span></span>

<span data-ttu-id="f0d9d-192">Lors de l’affichage des données hiérarchiquement relatives, il vous aide souvent à présenter les données à l’aide de rapports maître/détail, à partir de laquelle l’utilisateur peut démarrer vous parcourez attentivement les données à partir du haut de la hiérarchie et afficher des détails.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="f0d9d-193">Dans ce didacticiel, nous avons examiné création d’un rapport maître/détail simple montrant les produits d’une catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="f0d9d-194">Cela a été accompli en utilisant une liste déroulante pour obtenir la liste des catégories et un contrôle DataList pour les produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="f0d9d-195">Dans l’étape suivante du didacticiel, nous allons examiner de séparer les enregistrements maître et des détails sur deux pages.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="f0d9d-196">Dans la première page, une liste d’enregistrements « maîtres » s’affichera, avec un lien pour afficher les détails.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="f0d9d-197">En cliquant sur le lien, l’utilisateur de la deuxième page, qui affiche les détails de l’enregistrement principal sélectionné est tous.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="f0d9d-198">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="f0d9d-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f0d9d-199">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="f0d9d-199">About the Author</span></span>

<span data-ttu-id="f0d9d-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept manuels ASP/ASP.NET et créateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f0d9d-201">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f0d9d-202">Son dernier ouvrage est [ *SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f0d9d-203">Il peut être atteint à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) ou via son blog, qui se trouvent à [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f0d9d-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f0d9d-204">Remerciements particuliers à...</span><span class="sxs-lookup"><span data-stu-id="f0d9d-204">Special Thanks To…</span></span>

<span data-ttu-id="f0d9d-205">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-205">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f0d9d-206">Entraîner un réviseur pour ce didacticiel a été Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="f0d9d-206">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="f0d9d-207">Vous souhaitez consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="f0d9d-207">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f0d9d-208">Dans ce cas, me supprimer une ligne à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f0d9d-208">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="f0d9d-209">Next</span><span class="sxs-lookup"><span data-stu-id="f0d9d-209">Next</span></span>](master-detail-filtering-acess-two-pages-datalist-cs.md)
