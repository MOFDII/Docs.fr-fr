---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
title: Stratégies de développement de base de données et de déploiement (c#) | Documents Microsoft
author: rick-anderson
description: Lorsque vous déployez une application piloté par les données pour la première fois que vous pouvez aveugle copier la base de données dans l’environnement de développement à l’environnement de production. B...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 3e8b0627-3eb7-488e-807e-067cba7cec05
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
msc.type: authoredcontent
ms.openlocfilehash: 801eedba50e03b2fd9327e9a2902178b35b4275a
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
---
<a name="strategies-for-database-development-and-deployment-c"></a><span data-ttu-id="4546f-104">Stratégies de développement de base de données et de déploiement (c#)</span><span class="sxs-lookup"><span data-stu-id="4546f-104">Strategies for Database Development and Deployment (C#)</span></span>
====================
<span data-ttu-id="4546f-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4546f-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="4546f-106">Télécharger le PDF</span><span class="sxs-lookup"><span data-stu-id="4546f-106">Download PDF</span></span>](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_cs.pdf)

> <span data-ttu-id="4546f-107">Lorsque vous déployez une application piloté par les données pour la première fois que vous pouvez aveugle copier la base de données dans l’environnement de développement à l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="4546f-108">Mais effectuant un blind copie dans les déploiements suivants remplace toutes les données entrées dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="4546f-109">Au lieu de cela, déploiement d’une base de données consiste à répercuter les modifications apportées à la base de données de développement depuis le dernier déploiement sur la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="4546f-110">Ce didacticiel examine ces défis et propose des stratégies différentes pour vous aider à chronicling et appliquer les modifications apportées à la base de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>


## <a name="introduction"></a><span data-ttu-id="4546f-111">Introduction</span><span class="sxs-lookup"><span data-stu-id="4546f-111">Introduction</span></span>

<span data-ttu-id="4546f-112">Comme expliqué dans les didacticiels précédents, déploiement d’une application ASP.NET implique la copie le contenu pertinent à partir de l’environnement de développement à l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="4546f-113">Déploiement n’est pas un événement unique, mais plutôt quelque chose qui se produit chaque fois qu’une nouvelle version du logiciel est publiée ou quand des bogues ou problèmes de sécurité ont été identifiés et résolus.</span><span class="sxs-lookup"><span data-stu-id="4546f-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="4546f-114">Lors de la copie des pages ASP.NET, les images, les fichiers JavaScript et les autres fichiers de ce type dans l’environnement de production que vous n’avez pas besoin de vous préoccuper de ces fichiers ont été modifiés depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="4546f-115">Copiez aveugle le fichier en production, en remplaçant le contenu existant.</span><span class="sxs-lookup"><span data-stu-id="4546f-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="4546f-116">Malheureusement, cette simplicité n’étend pas au déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="4546f-117">Lorsque vous déployez une application piloté par les données pour la première fois que vous pouvez aveugle copier la base de données dans l’environnement de développement à l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="4546f-118">Mais effectuant un blind copie dans les déploiements suivants remplace toutes les données entrées dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="4546f-119">Au lieu de cela, déploiement d’une base de données implique l’application de la *modifications* apportées à la base de données de développement depuis le dernier déploiement sur la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="4546f-120">Ce didacticiel examine ces défis et propose des stratégies différentes pour vous aider à chronicling et appliquer les modifications apportées à la base de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="4546f-121">Les défis de déploiement d’une base de données</span><span class="sxs-lookup"><span data-stu-id="4546f-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="4546f-122">Avant d’une application orientée données a été déployée pour la première fois, il n'existe qu’une seule base de données, à savoir la base de données dans l’environnement de développement, c’est pourquoi lors du déploiement d’une application orientée données pour la première fois que vous pouvez aveugle copier la base de données dans le environnement de développement à l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="4546f-123">Mais une fois que l’application a été déployée. il existe deux copies de la base de données : un dans le développement et l’autre en production.</span><span class="sxs-lookup"><span data-stu-id="4546f-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="4546f-124">Entre les déploiements, les bases de données de développement et de production peuvent devenir désynchronisés. Alors que le schéma de s de base de données de production reste inchangé, le schéma s développement peut changer lors de l’ajout de nouvelles fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="4546f-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="4546f-125">Vous pouvez ajouter ou supprimer des colonnes, tables, vues ou procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="4546f-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="4546f-126">Il peut également être des données importantes qui sont ajoutées à la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="4546f-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="4546f-127">De nombreuses applications pilotées par les données contiennent des tables de recherche remplis avec des données codées en dur, spécifiques à l’application qui ne sont pas modifiables par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4546f-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="4546f-128">Par exemple, un site Web de vente aux enchères peut avoir une liste déroulante de choix qui décrivent la condition de l’élément en cours d’enchère : nouveau, comme nouvelle, efficace et équitable.</span><span class="sxs-lookup"><span data-stu-id="4546f-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="4546f-129">Au lieu de coder en dur ces options directement dans la liste déroulante, il est généralement préférable de les placer dans une table de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="4546f-130">Si, pendant le développement, une nouvelle condition nommée médiocre est ajoutée à la table puis lors du déploiement de l’application de ce même enregistrement doit être ajouté à la table de recherche dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="4546f-131">Dans l’idéal, le déploiement de la base de données impliquerait copie de la base de données de développement à la production.</span><span class="sxs-lookup"><span data-stu-id="4546f-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="4546f-132">Mais n’oubliez pas qu’une fois que vous avez déployé l’application et la reprise de développement, la base de données de production est en cours rempli avec les données réelles provenant d’utilisateurs réels.</span><span class="sxs-lookup"><span data-stu-id="4546f-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="4546f-133">Par conséquent, si vous deviez copier simplement la base de données de développement pour le prochain déploiement de production vous remplacer la base de données de production et perdre les données existantes.</span><span class="sxs-lookup"><span data-stu-id="4546f-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="4546f-134">Le résultat net est que le déploiement de la base de données se résume à appliquer les modifications apportées à la base de données de développement depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="4546f-135">Étant donné que le déploiement d’une base de données implique d’appliquer les modifications dans le schéma et, éventuellement, les données depuis le dernier déploiement, un historique des modifications doit être conservé (ou déterminé au moment de déployer) afin que ces modifications peuvent être appliquées sur la production.</span><span class="sxs-lookup"><span data-stu-id="4546f-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="4546f-136">Il existe de nombreuses techniques pour gérer et appliquer les modifications au modèle de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="4546f-137">Définition de la ligne de base</span><span class="sxs-lookup"><span data-stu-id="4546f-137">Defining the Baseline</span></span>

<span data-ttu-id="4546f-138">Pour conserver les modifications apportées à votre base de données s application, vous devez avoir un état de départ, une ligne de base à laquelle les modifications sont appliquées à.</span><span class="sxs-lookup"><span data-stu-id="4546f-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="4546f-139">Une approche consiste à l’état de départ peut être une base de données vide sans tables, vues ou procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="4546f-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="4546f-140">Une ligne de base des résultats dans un journal de changement important, car il doit inclure la création de toutes les tables de base de données s, vues et des procédures stockées, ainsi que les modifications apportées après le déploiement initial.</span><span class="sxs-lookup"><span data-stu-id="4546f-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="4546f-141">À l’autre extrémité du spectre, vous pouvez définir la ligne de base en tant que la version de la base de données est d’abord déployée dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="4546f-142">Ce choix aboutit à un journal des modifications beaucoup plus petit, car elle inclut uniquement les modifications apportées à la base de données après le premier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="4546f-143">Il s’agit de l’approche que je préfère.</span><span class="sxs-lookup"><span data-stu-id="4546f-143">This is the approach I prefer.</span></span> <span data-ttu-id="4546f-144">Et bien sûr vous pouvez choisir un milieu plus de l’approche de la feuille de route, définition de la ligne de base comme une point entre la création initiale de la base de données et lors du premier déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="4546f-145">Une fois que vous avez choisi une ligne de base envisagez de générer un script SQL qui peut être exécuté pour recréer la version de ligne de base.</span><span class="sxs-lookup"><span data-stu-id="4546f-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="4546f-146">Un tel script permet de recréer rapidement la version de ligne de base de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="4546f-147">Cette fonctionnalité est particulièrement utile dans les projets de grande taille, où il peut y avoir plusieurs développeurs travaillent sur le projet ou des environnements supplémentaires, tels que les tests ou intermédiaire, que chaque besoin de leur propre copie de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="4546f-148">Il existe une variété d’outils à votre disposition pour générer un script SQL de la version de ligne de base.</span><span class="sxs-lookup"><span data-stu-id="4546f-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="4546f-149">À partir de SQL Server Management Studio (SSMS) vous pouvez avec le bouton droit sur la base de données, accédez au sous-menu tâches et choisissez l’option Générer des Scripts.</span><span class="sxs-lookup"><span data-stu-id="4546f-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="4546f-150">Cette opération lance l’Assistant de Script, vous pouvez indiquer pour générer un fichier qui contient les commandes SQL pour créer des objets de s de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="4546f-151">Une autre option consiste à l’Assistant Publication de base de données, ce qui peut générer les commandes SQL non seulement créer le schéma de base de données, mais également les données dans les tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="4546f-152">L’Assistant Publication de base de données a été examiné en détail dans les *déploiement d’une base de données* didacticiel.</span><span class="sxs-lookup"><span data-stu-id="4546f-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="4546f-153">Quel que soit l’outil que vous utilisez, à la fin, vous devez disposer d’un fichier de script que vous pouvez utiliser pour recréer la version de ligne de base de votre base de données, en cas de besoin surviennent.</span><span class="sxs-lookup"><span data-stu-id="4546f-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="4546f-154">Documenter les modifications de base de données dans le texte principal</span><span class="sxs-lookup"><span data-stu-id="4546f-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="4546f-155">Pour conserver un journal des modifications apportées au modèle de données pendant la phase de développement, le plus simple consiste à enregistrer les modifications dans prose.</span><span class="sxs-lookup"><span data-stu-id="4546f-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="4546f-156">Par exemple, si pendant le développement d’une application déjà déployée, vous ajoutez une nouvelle colonne à la `Employees` table, de supprimer une colonne de la `Orders` de table et ajouter une nouvelle table (`ProductCategories`), vous devez mettre à jour un fichier texte ou un document Microsoft Word l’historique des suivantes :</span><span class="sxs-lookup"><span data-stu-id="4546f-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.4_table01"></a>


| <span data-ttu-id="4546f-157">**Date de modification**</span><span class="sxs-lookup"><span data-stu-id="4546f-157">**Change Date**</span></span> | <span data-ttu-id="4546f-158">**Modifier les détails**</span><span class="sxs-lookup"><span data-stu-id="4546f-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="4546f-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="4546f-159">2009-02-03:</span></span> | <span data-ttu-id="4546f-160">Colonne ajoutée `DepartmentID` (`int`, non NULL) pour le `Employees` table.</span><span class="sxs-lookup"><span data-stu-id="4546f-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="4546f-161">Ajouter une contrainte de clé étrangère à partir de `Departments.DepartmentID` à `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="4546f-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="4546f-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="4546f-162">2009-02-05:</span></span> | <span data-ttu-id="4546f-163">Colonne supprimé `TotalWeight` à partir de la `Orders` table.</span><span class="sxs-lookup"><span data-stu-id="4546f-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="4546f-164">Données déjà capturées dans associés `OrderDetails` enregistrements.</span><span class="sxs-lookup"><span data-stu-id="4546f-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="4546f-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="4546f-165">2009-02-12:</span></span> | <span data-ttu-id="4546f-166">Créé le `ProductCategories` table.</span><span class="sxs-lookup"><span data-stu-id="4546f-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="4546f-167">Il existe trois colonnes : `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), et `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="4546f-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="4546f-168">Ajouter une contrainte de clé primaire à `ProductCategoryID`et une valeur par défaut de 1 à `Active`.</span><span class="sxs-lookup"><span data-stu-id="4546f-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |


<span data-ttu-id="4546f-169">Il existe un nombre d’inconvénients à cette approche.</span><span class="sxs-lookup"><span data-stu-id="4546f-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="4546f-170">Pour commencer, il n’est sans espoir d’automatisation.</span><span class="sxs-lookup"><span data-stu-id="4546f-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="4546f-171">À tout moment ces modifications doivent être appliquées à une base de données - telles que quand l’application est déployée, un développeur doit implémenter manuellement chacune, à la fois.</span><span class="sxs-lookup"><span data-stu-id="4546f-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="4546f-172">En outre, si vous avez besoin reconstruire une version particulière de la base de données à partir de la ligne de base à l’aide du journal des modifications, cette opération donc prendra plus de temps à mesure que la taille du journal augmente.</span><span class="sxs-lookup"><span data-stu-id="4546f-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="4546f-173">Un autre inconvénient de cette méthode est que la clarté et le niveau de détail de chaque entrée de journal des modifications est de gauche à la personne que l’enregistrement de la modification.</span><span class="sxs-lookup"><span data-stu-id="4546f-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="4546f-174">Dans une équipe avec plusieurs développeurs certaines peuvent rendre plus détaillées, plus lisibles et plus précisément les entrées que d’autres.</span><span class="sxs-lookup"><span data-stu-id="4546f-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="4546f-175">En outre, les fautes de frappe et autres erreurs de saisie des données relatives à l’homme sont possibles.</span><span class="sxs-lookup"><span data-stu-id="4546f-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="4546f-176">Le principal avantage de documenter les modifications de base de données dans la grandeur est sa simplicité.</span><span class="sxs-lookup"><span data-stu-id="4546f-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="4546f-177">Vous n’avez pas connaissance de la nécessité t avec la syntaxe SQL pour la création et modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="4546f-178">Au lieu de cela, vous pouvez enregistrer les modifications dans le texte principal et les implémenter via l’interface utilisateur graphique de s SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="4546f-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="4546f-179">En conservant votre journal des modifications dans le texte principal n’est pas, il est vrai, très sophistiquée et gagné / fonctionne bien avec certains projets, telles que celles qui sont de grande taille dans la portée, sont souvent modifiés pour le modèle de données, ou impliquant plusieurs développeurs.</span><span class="sxs-lookup"><span data-stu-id="4546f-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won t work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="4546f-180">Mais j’ai vu cette approche fonctionne très bien dans les projets de petite taille, adeptes qui ont uniquement des modifications au modèle de données occasionnelles et où le développeur individuelle ne dispose pas de solides dans la syntaxe SQL pour la création et modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="4546f-181">Alors que les informations contenues dans le journal des modifications soient techniquement, nécessaire uniquement jusqu’au moment de déployer, je vous recommande de conserver un historique des modifications.</span><span class="sxs-lookup"><span data-stu-id="4546f-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="4546f-182">Mais plutôt que de la gestion d’un seul, en constante augmentation fichier journal des modifications, envisagez de mettre en un fichier journal de modification différente pour chaque version de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="4546f-183">En général, vous souhaiterez version de la base de données chaque fois qu’il est déployé.</span><span class="sxs-lookup"><span data-stu-id="4546f-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="4546f-184">En conservant un journal des journaux de changement de n’importe quelle version de la base de données en exécutant les scripts du journal de modification à partir de la version 1 peut, en commençant à partir de la ligne de base, recréer et à se poursuivre jusqu'à ce que vous atteigniez la version que vous devrez recréer.</span><span class="sxs-lookup"><span data-stu-id="4546f-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>


## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="4546f-185">Enregistrer les instructions de modification SQL</span><span class="sxs-lookup"><span data-stu-id="4546f-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="4546f-186">L’inconvénient principal de la maintenance du journal des modifications dans prose indique l’absence d’automation.</span><span class="sxs-lookup"><span data-stu-id="4546f-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="4546f-187">Dans l’idéal, l’application des modifications de base de données à la base de données de production au moment de déployer serait aussi simple que de cliquer sur un bouton pour exécuter un script au lieu de devoir effectuer manuellement une liste d’instructions.</span><span class="sxs-lookup"><span data-stu-id="4546f-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="4546f-188">Cette automatisation est possible en conservant un journal des modifications qui contient les commandes SQL utilisés pour modifier le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="4546f-189">La syntaxe SQL comprend des instructions pour créer et modifier les divers objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="4546f-190">Par exemple, le [ *l’instruction CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), lors de l’exécution, crée une table avec les colonnes spécifiées et les contraintes.</span><span class="sxs-lookup"><span data-stu-id="4546f-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="4546f-191">Le [ *instruction ALTER TABLE* ](https://msdn.microsoft.com/library/ms190273.aspx) modifie une table existante, l’ajout, la suppression ou la modification des colonnes ou des contraintes.</span><span class="sxs-lookup"><span data-stu-id="4546f-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="4546f-192">Il existe également des instructions pour créer, modifier et supprimer des index, vues, fonctions définies par l’utilisateur, procédures stockées, déclencheurs et autres objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="4546f-193">Revenir à notre précédent exemple, l’image que pendant le développement d’une application déjà déployée, vous ajoutez une nouvelle colonne à la `Employees` table, de supprimer une colonne de la `Orders` de table et ajouter une nouvelle table (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="4546f-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="4546f-194">Ces actions entraînerait un fichier journal des modifications avec les commandes SQL suivantes :</span><span class="sxs-lookup"><span data-stu-id="4546f-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-cs/samples/sample1.sql)]

<span data-ttu-id="4546f-195">En exécutant un push de ces modifications à la base de données de production au moment de déployer est une opération en un clic : ouvrez SQL Server Management Studio, vous connecter à votre base de données de production, ouvrez une fenêtre de nouvelle requête, collez le contenu du journal des modifications, cliquez sur Exécuter pour exécuter le script.</span><span class="sxs-lookup"><span data-stu-id="4546f-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="4546f-196">À l’aide d’un outil de comparaison pour synchroniser les modèles de données</span><span class="sxs-lookup"><span data-stu-id="4546f-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="4546f-197">Documenter les modifications de base de données dans la grandeur est facile, mais les modifications de mise en œuvre requiert un développeur effectuer chaque modification sur la base de données de production une à la fois. documenter les commandes SQL de modification rend l’implémentation de ces modifications sur la base de données de production en tant que simple et rapide qu’un clic sur un bouton, mais nécessite d’apprentissage et de maîtrise les instructions SQL et la syntaxe pour la création et modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="4546f-198">Outils de comparaison de base de données tirer le meilleur de ces deux approches et ignorer le pire.</span><span class="sxs-lookup"><span data-stu-id="4546f-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="4546f-199">Outil de comparaison de base de données compare le schéma ou les données de deux bases de données et affiche un rapport de synthèse affiche la différence entre les bases de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="4546f-200">Puis, en cliquant sur un bouton, vous pouvez générer les commandes SQL pour la synchronisation d’un ou plusieurs objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="4546f-201">En bref, vous pouvez utiliser un outil de comparaison de base de données à comparer le développement et les bases de données à déployer-temps, générant un fichier qui contient l’instruction SQL de commandes, quand elle est exécutée, s’applique les modifications au schéma de base de données s production donc qu’il reflète le schéma de base de données s de développement.</span><span class="sxs-lookup"><span data-stu-id="4546f-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="4546f-202">Il existe une variété d’outils de comparaison de base de données de tiers proposées par d’autres fournisseurs.</span><span class="sxs-lookup"><span data-stu-id="4546f-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="4546f-203">Un exemple est [ *SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), par [ *Red Gate Software*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="4546f-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="4546f-204">Permettent de s décrivent le processus de l’utilisation de SQL Compare pour comparer et synchroniser les schémas de bases de données de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="4546f-205">Au moment de la rédaction de cet la version actuelle de SQL Compare était version 7.1, avec l’Édition Standard d’évaluation des coûts 395 $.</span><span class="sxs-lookup"><span data-stu-id="4546f-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="4546f-206">Vous pouvez suivre son déroulement en téléchargeant une version d’évaluation gratuite de 14 jours.</span><span class="sxs-lookup"><span data-stu-id="4546f-206">You can follow along by downloading a free 14-day trial.</span></span>


<span data-ttu-id="4546f-207">Démarrage de SQL Compare la boîte de dialogue des projets de comparaison s’ouvre et affiche les projets SQL Compare enregistrés.</span><span class="sxs-lookup"><span data-stu-id="4546f-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="4546f-208">Créer un nouveau projet.</span><span class="sxs-lookup"><span data-stu-id="4546f-208">Create a new project.</span></span> <span data-ttu-id="4546f-209">Cette opération lance l’Assistant de Configuration de projet, qui vous invite à entrer pour plus d’informations sur les bases de données à comparer (voir Figure 1).</span><span class="sxs-lookup"><span data-stu-id="4546f-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="4546f-210">Entrez les informations pour les bases de données d’environnement de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-210">Enter the information for the development and production environment databases.</span></span>


<span data-ttu-id="4546f-211">[![Comparer le développement et les bases de données de Production](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="4546f-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="4546f-212">**Figure 1**: comparer le développement et les bases de données de Production ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="4546f-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span></span>


> [!NOTE]
> <span data-ttu-id="4546f-213">Si votre base de données des environnement de développement est un fichier de base de données SQL Express Edition dans la `App_Data` dossier de votre site Web que vous devez inscrire la base de données sur le serveur de base de données SQL Server Express pour le sélectionner dans la boîte de dialogue indiquée dans la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="4546f-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="4546f-214">Le moyen le plus simple pour y parvenir consiste à ouvrir SQL Server Management Studio (SSMS), connectez-vous au serveur de base de données SQL Server Express et attacher la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="4546f-215">Si vous n’avez pas installé sur votre ordinateur SSMS vous pouvez télécharger et installer la version gratuite [ *base SQL Server 2008 Management Studio version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="4546f-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>


<span data-ttu-id="4546f-216">En plus de sélectionner les bases de données à comparer, vous pouvez également spécifier divers paramètres de comparaison à partir de l’onglet Options. Une option, que vous pouvez souhaiter activer est « Ignorer contraintes et index noms. »</span><span class="sxs-lookup"><span data-stu-id="4546f-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="4546f-217">Rappelez-vous que dans le didacticiel précédent nous avons ajouté que les objets de base de données pour les bases de données de développement et de production des services de l’application.</span><span class="sxs-lookup"><span data-stu-id="4546f-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="4546f-218">Si vous avez utilisé le `aspnet_regsql.exe` outil pour créer ces objets sur la base de données de production, vous obtenez la clé primaire et les noms de contraintes uniques sont différents entre les bases de données de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="4546f-219">Par conséquent, SQL Compare marquera toutes les tables de services d’application comme différentes.</span><span class="sxs-lookup"><span data-stu-id="4546f-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="4546f-220">Vous pouvez soit laisser les « ignorer contraintes et index names » est désactivée et synchroniser les noms de contrainte, ou demandez au SQL Compare pour ignorer ces différences.</span><span class="sxs-lookup"><span data-stu-id="4546f-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="4546f-221">Après avoir sélectionné les bases de données à comparer (et examen des options de comparaison), cliquez sur le bouton comparer pour commencer la comparaison.</span><span class="sxs-lookup"><span data-stu-id="4546f-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="4546f-222">Sur les prochaines secondes, SQL Compare examine les schémas des deux bases de données et génère un rapport de la façon dont elles diffèrent.</span><span class="sxs-lookup"><span data-stu-id="4546f-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="4546f-223">Je ve apporté délibérément des modifications à la base de données de développement pour afficher la façon dont ces différences sont indiquées dans l’interface SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="4546f-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="4546f-224">Comme le montre la Figure 2, je ve ajouté un `BirthDate` colonne à la `Authors` table, supprimé le `ISBN` colonne à partir de la `Books` de table et ajouter une nouvelle table, `Ratings`, qui est destinée à permettre aux utilisateurs visitant le taux de site les livres passés en revue.</span><span class="sxs-lookup"><span data-stu-id="4546f-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="4546f-225">Les modifications de modèle de données effectuées dans ce didacticiel a été effectuées pour illustrer l’utilisation d’un outil de comparaison de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="4546f-226">Vous trouverez pas ces modifications dans la base de données dans les didacticiels futures.</span><span class="sxs-lookup"><span data-stu-id="4546f-226">You will not find these changes in the database in future tutorials.</span></span>


<span data-ttu-id="4546f-227">[![SQL Compare répertorie les différences entre le développement et les bases de données de Production](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="4546f-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="4546f-228">**Figure 2**: SQL Compare répertorie les différences entre le développement et les bases de données de Production ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="4546f-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="4546f-229">SQL Compare divise les objets de base de données en groupes, vous montrant rapidement les objets qui existent dans les deux bases de données mais sont différent, qui existent dans une base de données, mais pas l’autre et quels objets sont identiques.</span><span class="sxs-lookup"><span data-stu-id="4546f-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="4546f-230">Comme vous pouvez le voir, il existe deux objets qui existent dans les deux bases de données, mais sont différents : le `Authors` table ayant une colonne ajoutée, et le `Books` table, qui contenait un supprimé.</span><span class="sxs-lookup"><span data-stu-id="4546f-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="4546f-231">Il existe un objet qui existe uniquement dans le développement de base de données, à savoir nouvellement créé `Ratings` table.</span><span class="sxs-lookup"><span data-stu-id="4546f-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="4546f-232">Et il existe des 117 objets sont identiques dans les deux bases de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="4546f-233">Sélection d’un objet de base de données affiche la fenêtre différences de SQL, qui affiche la différence entre ces objets.</span><span class="sxs-lookup"><span data-stu-id="4546f-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="4546f-234">Met en surbrillance de la fenêtre SQL différences, affichée en bas dans la Figure 2, qui les `Authors` table dans la base de données de développement a la `BirthDate` colonne, qui est introuvable dans le `Authors` table sur la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="4546f-235">Après avoir examiné les différences et en sélectionnant les objets que vous souhaitez synchroniser, l’étape suivante consiste à générer les commandes SQL nécessaires pour mettre à jour le schéma de s de base de données de production pour correspondre à la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="4546f-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="4546f-236">Pour cela, l’Assistant de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="4546f-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="4546f-237">L’Assistant synchronisation confirme que pour synchroniser des objets et résume l’action planifier (voir Figure 3).</span><span class="sxs-lookup"><span data-stu-id="4546f-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="4546f-238">Vous pouvez synchroniser les bases de données immédiatement ou générer un script avec les commandes SQL qui peut être exécutée à tout moment.</span><span class="sxs-lookup"><span data-stu-id="4546f-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>


<span data-ttu-id="4546f-239">[![Utilisez l’Assistant de synchronisation pour synchroniser vos schémas de bases de données](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="4546f-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="4546f-240">**Figure 3**: utiliser l’Assistant de synchronisation pour synchroniser vos schémas de bases de données ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="4546f-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="4546f-241">Outils de comparaison de base de données telles que Red Gate Software s SQL Compare rendre le schéma de base de données de développement à la base de données de production aussi simple que le point, cliquez sur Appliquer les modifications.</span><span class="sxs-lookup"><span data-stu-id="4546f-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="4546f-242">Compare et la synchronisation des deux bases de données SQL Compare *schémas*.</span><span class="sxs-lookup"><span data-stu-id="4546f-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="4546f-243">Malheureusement, il ne comparer et synchroniser les données dans les tables de deux bases de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="4546f-244">Red Gate Software offre un produit nommé [ *de comparaison de données SQL* ](http://www.red-gate.com/products/SQL_Data_Compare/) qui compare et synchronise les données entre deux bases de données, mais il est un produit distinct à partir de SQL Compare et les coûts d’un autre 395 $.</span><span class="sxs-lookup"><span data-stu-id="4546f-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>


## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="4546f-245">Avec l’Application en mode hors connexion pendant le déploiement</span><span class="sxs-lookup"><span data-stu-id="4546f-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="4546f-246">Comme nous avons vu dans ces didacticiels, déploiement est un processus qui implique plusieurs étapes : copie les pages ASP.NET, les pages maîtres, CSS fichiers, JavaScript fichiers, images et autre contenu nécessaire à partir de l’environnement de développement à la production environnement ; copie les informations de configuration spécifiques à l’environnement de production, si nécessaire ; et appliquer les modifications au modèle de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="4546f-247">Selon le nombre de fichiers et la complexité de votre base de données, ces étapes peuvent prendre de quelques secondes à quelques minutes.</span><span class="sxs-lookup"><span data-stu-id="4546f-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="4546f-248">Pendant cette fenêtre de l’application web est en cours de conception et les utilisateurs visitant le site peuvent rencontrer des erreurs ou un comportement inattendu.</span><span class="sxs-lookup"><span data-stu-id="4546f-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="4546f-249">Lors du déploiement d’un site Web, il est préférable d’adopter l’application web « hors connexion » jusqu'à ce que le déploiement est terminé.</span><span class="sxs-lookup"><span data-stu-id="4546f-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="4546f-250">Mise hors connexion de l’application (et sa mise en sauvegarder une fois terminé le processus de déploiement) est aussi simple que le téléchargement d’un fichier, puis leur suppression.</span><span class="sxs-lookup"><span data-stu-id="4546f-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="4546f-251">À partir d’ASP.NET 2.0, la simple présence d’un fichier nommé `app_offline.htm` dans le s application répertoire racine prend tout le site Web « hors connexion ».</span><span class="sxs-lookup"><span data-stu-id="4546f-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="4546f-252">Toute demande d’une page ASP.NET sur ce site est automatiquement répondu avec le contenu de la `app_offline.htm` fichier.</span><span class="sxs-lookup"><span data-stu-id="4546f-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="4546f-253">Une fois que ce fichier est supprimé, l’application revient en ligne.</span><span class="sxs-lookup"><span data-stu-id="4546f-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="4546f-254">Prendre une application en mode hors connexion pendant le déploiement, puis, est aussi simple que de télécharger un `app_offline.htm` fichier à l’environnement de production s racine active avant de commencer le processus de déploiement et puis en le supprimant (ou en le renommant à quelque chose d’autre) une fois du déploiement est terminée.</span><span class="sxs-lookup"><span data-stu-id="4546f-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="4546f-255">Pour plus d’informations sur cette technique, consultez l’article de s John Peterson, en prenant un [ *ASP.NET Application en mode hors connexion*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="4546f-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="4546f-256">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="4546f-256">Summary</span></span>

<span data-ttu-id="4546f-257">Le principal défi de déploiement d’une application orientée données tourne autour de déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="4546f-258">Car il existe deux versions de la base de données - un dans l’environnement de développement et l’autre dans l’environnement de production ces schémas de deux bases de données peuvent devenir désynchronisés que des nouvelles fonctionnalités sont ajoutées dans le développement.</span><span class="sxs-lookup"><span data-stu-id="4546f-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="4546f-259">Nouveautés plus, étant donné que la base de données de production comme rempli avec les données réelles provenant d’utilisateurs réels, Impossible de remplacer la base de données de production avec la base de données de développement modifié comme vous pouvez le faire lorsque vous déployez les fichiers qui composent l’application (les pages ASP.NET, fichiers image et ainsi de suite).</span><span class="sxs-lookup"><span data-stu-id="4546f-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="4546f-260">Au lieu de cela, déploiement d’une base de données implique la mise en œuvre de l’ensemble précis des modifications apportées à la base de données de développement sur la base de données de production depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="4546f-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="4546f-261">Ce didacticiel abordé trois techniques pour la gestion et appliquer un journal des modifications de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="4546f-262">L’approche la plus simple consiste à enregistrer des modifications dans prose.</span><span class="sxs-lookup"><span data-stu-id="4546f-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="4546f-263">Même si cela risquerait mise en œuvre de ces modifications sur la base de données de production un processus manuel, il ne nécessite pas de connaissances des commandes SQL pour la création et modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="4546f-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="4546f-264">Une approche plus sophistiquée et un qui est beaucoup plus aisée en plus des projets ou avec plusieurs développeurs, consiste à enregistrer les modifications comme une série de commandes SQL.</span><span class="sxs-lookup"><span data-stu-id="4546f-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="4546f-265">Cela empresse considérablement le déploiement de ces modifications à la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="4546f-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="4546f-266">Le meilleur des deux approches peut être obtenu à l’aide d’un outil de comparaison de base de données, telles que des s Red Gate Software SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="4546f-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="4546f-267">Ce didacticiel conclut notre le focus sur le déploiement d’une application pilotée par les données.</span><span class="sxs-lookup"><span data-stu-id="4546f-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="4546f-268">L’ensemble suivant de didacticiels examine comment répondre aux erreurs dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4546f-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="4546f-269">Nous allons examiner comment afficher une page d’erreur convivial plutôt au lieu de l’écran de décès jaune.</span><span class="sxs-lookup"><span data-stu-id="4546f-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="4546f-270">Et nous verrons comment consigner les détails de s erreur et vous informe lorsque ces erreurs se produisent.</span><span class="sxs-lookup"><span data-stu-id="4546f-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="4546f-271">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="4546f-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4546f-272">[Précédent](configuring-a-website-that-uses-application-services-cs.md)
> [Suivant](displaying-a-custom-error-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="4546f-272">[Previous](configuring-a-website-that-uses-application-services-cs.md)
[Next](displaying-a-custom-error-page-cs.md)</span></span>
