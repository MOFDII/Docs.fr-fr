---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Mise en route avec base de données Entity Framework 4.0 tout d’abord et 4 d’ASP.NET Web Forms - partie 6 | Documents Microsoft
author: tdykstra
description: L’exemple d’application web Contoso University montre comment créer des applications Web Forms ASP.NET à l’aide d’Entity Framework. L’exemple d’application est en cours...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: b76be25501275ba676c9a9acca8e73333439ee70
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888797"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="3fcf3-104">Mise en route avec base de données Entity Framework 4.0 tout d’abord et 4 les Web Forms ASP.NET - partie 6</span><span class="sxs-lookup"><span data-stu-id="3fcf3-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>
====================
<span data-ttu-id="3fcf3-105">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="3fcf3-106">L’exemple d’application web Contoso University montre comment créer des applications Web Forms ASP.NET à l’aide de l’Entity Framework 4.0 et Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="3fcf3-107">Pour plus d’informations sur la série de didacticiels, consultez [le premier didacticiel de la série](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="3fcf3-108">Implémentation de l'héritage TPH (table par hiérarchie)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="3fcf3-109">Dans le didacticiel précédent vous avez travaillé avec des données connexes en ajoutant et supprimant des relations et en ajoutant une nouvelle entité ayant une relation à une entité existante.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="3fcf3-110">Ce didacticiel vous indiquera comment implémenter l’héritage dans le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="3fcf3-111">Dans la programmation orientée objet, vous pouvez utiliser l’héritage pour le rendre plus facile de travailler avec les classes connexes.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="3fcf3-112">Par exemple, vous pouvez créer `Instructor` et `Student` classes qui dérivent d’un `Person` classe de base.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="3fcf3-113">Vous pouvez créer les mêmes types de structures d’héritage entre les entités dans Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="3fcf3-114">Dans cette partie du didacticiel, vous ne sont pas créer de nouvelles pages web.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="3fcf3-115">Au lieu de cela, vous allez ajouter des entités dérivées pour le modèle de données et modifier des pages existantes pour utiliser les nouvelles entités.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="3fcf3-116">Table par hiérarchie et héritage Table par Type</span><span class="sxs-lookup"><span data-stu-id="3fcf3-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="3fcf3-117">Une base de données peut stocker plus d’informations sur les objets connexes dans une table ou dans plusieurs tables.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="3fcf3-118">Par exemple, dans le `School` base de données, le `Person` table inclut des informations sur les étudiants et instructeurs dans une table unique.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="3fcf3-119">Certaines colonnes s’appliquent uniquement aux instructeurs (`HireDate`), certains uniquement pour les étudiants (`EnrollmentDate`), tandis que d’autres à la fois (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="3fcf3-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="3fcf3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="3fcf3-121">Vous pouvez configurer l’Entity Framework pour créer `Instructor` et `Student` entités qui héritent de la `Person` entité.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="3fcf3-122">Ce modèle de la génération d’une structure d’héritage d’entité à partir d’une table de base de données unique est appelé *table par hiérarchie* l’héritage (TPH).</span><span class="sxs-lookup"><span data-stu-id="3fcf3-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="3fcf3-123">Pour les cours, le `School` base de données utilise un modèle différent.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="3fcf3-124">Cours en ligne et les formations sur site sont stockées dans des tables distinctes, chacune d’elles a une clé étrangère qui pointe vers le `Course` table.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="3fcf3-125">Informations communes aux deux types de cours sont stockées uniquement dans le `Course` table.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="3fcf3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="3fcf3-127">Vous pouvez configurer le modèle de données Entity Framework afin que `OnlineCourse` et `OnsiteCourse` entités héritent le `Course` entité.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="3fcf3-128">Ce modèle de la génération d’une structure d’héritage d’entité à partir des tables distinctes pour chaque type, chaque table distincte, faire référence à une table qui stocke les données communes à tous les types, est appelé *table par type* l’héritage (TPT).</span><span class="sxs-lookup"><span data-stu-id="3fcf3-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="3fcf3-129">Modèles d’héritage TPH généralement offrent de meilleures performances dans Entity Framework que les modèles d’héritage TPT, étant donné que les modèles TPT peuvent entraîner des requêtes de jointure complexe.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="3fcf3-130">Cette procédure pas à pas montre comment implémenter l’héritage TPH.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="3fcf3-131">Vous devez le faire en effectuant les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="3fcf3-132">Créer `Instructor` et `Student` types d’entités qui dérivent de `Person`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="3fcf3-133">Propriétés de déplacement qui se rapportent aux entités dérivées à partir de la `Person` entité aux entités dérivées.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="3fcf3-134">Définir des contraintes sur les propriétés dans les types dérivés.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="3fcf3-135">Rendre le `Person` entité une entité abstraite.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="3fcf3-136">Carte chaque dérivée d’entité à la `Person` table avec une condition qui spécifie la façon de déterminer si un `Person` représente ce type dérivé de la ligne.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="3fcf3-137">Ajout d’entités Instructor et Student</span><span class="sxs-lookup"><span data-stu-id="3fcf3-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="3fcf3-138">Ouvrez le <em>SchoolModel.edmx</em> de fichiers, cliquez sur une zone libre dans le concepteur, sélectionnez <strong>ajouter</strong>, puis sélectionnez <strong>entité</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="3fcf3-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="3fcf3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="3fcf3-140">Dans le **ajouter une entité** boîte de dialogue, nom de l’entité `Instructor` et définir son **type de Base** option `Person`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="3fcf3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="3fcf3-142">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-142">Click **OK**.</span></span> <span data-ttu-id="3fcf3-143">Le concepteur crée un `Instructor` entité qui dérive de la `Person` entité.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="3fcf3-144">La nouvelle entité n’a pas encore de toutes les propriétés.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="3fcf3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="3fcf3-146">Répétez la procédure pour créer un `Student` entité dérive également de `Person`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="3fcf3-147">Uniquement les formateurs ont des dates d’embauche, donc vous devez déplacer cette propriété à partir de la `Person` entité à la `Instructor` entité.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="3fcf3-148">Dans le `Person` entité, avec le bouton droit le `HireDate` propriété et cliquez sur **couper**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="3fcf3-149">Avec le bouton droit puis **propriétés** dans les `Instructor` entité et cliquez sur **coller**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="3fcf3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="3fcf3-151">La date d’embauche un `Instructor` entité ne peut pas être null.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="3fcf3-152">Avec le bouton droit le `HireDate` propriété, cliquez sur **propriétés**, puis, dans le **propriétés** modification de la fenêtre `Nullable` à `False`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="3fcf3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="3fcf3-154">Répétez la procédure pour déplacer le `EnrollmentDate` propriété à partir de la `Person` entité à la `Student` entité.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="3fcf3-155">Assurez-vous que vous définissez également `Nullable` à `False` pour le `EnrollmentDate` propriété.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="3fcf3-156">Maintenant qu’un `Person` entité dispose uniquement des propriétés qui sont communes aux `Instructor` et `Student` entités (à l’exception de propriétés de navigation, qui vous déplacez pas), l’entité utilisable uniquement comme entité de base dans la structure d’héritage.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="3fcf3-157">Par conséquent, vous devez vous assurer qu’elle n’est jamais traitée comme une entité indépendante.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="3fcf3-158">Avec le bouton droit le `Person` entité, sélectionnez **propriétés**, puis, dans le **propriétés** fenêtre Modifier la valeur de la **abstraite** propriété  **True**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="3fcf3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="3fcf3-160">Mappage des entités Instructor et Student pour la Table Person</span><span class="sxs-lookup"><span data-stu-id="3fcf3-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="3fcf3-161">Maintenant vous devez indiquer la façon de faire la distinction entre Entity Framework `Instructor` et `Student` entités dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="3fcf3-162">Avec le bouton droit le `Instructor` entité et sélectionnez **mappage de Table**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="3fcf3-163">Dans le **détails de mappage** fenêtre, cliquez sur **ajouter une Table ou vue** et sélectionnez **personne**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="3fcf3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="3fcf3-165">Cliquez sur **ajouter une Condition**, puis sélectionnez **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="3fcf3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="3fcf3-167">Modification **opérateur** à **est** et **valeur / propriété** à **non Null**.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="3fcf3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="3fcf3-169">Répétez la procédure pour le `Students` entité, en spécifiant que cette entité est mappée à la `Person` table lorsque la `EnrollmentDate` colonne n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="3fcf3-170">Ensuite, enregistrez et fermez le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-170">Then save and close the data model.</span></span>

<span data-ttu-id="3fcf3-171">Générez le projet afin de créer de nouvelles entités en tant que classes et les rendre disponibles dans le concepteur.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="3fcf3-172">À l’aide du formateur et des entités d’étudiant</span><span class="sxs-lookup"><span data-stu-id="3fcf3-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="3fcf3-173">Lorsque vous avez créé les pages web qui fonctionnent avec des données student et instructor, vous lié aux données à le `Person` du jeu d’entités, et vous avez filtré sur la `HireDate` ou `EnrollmentDate` propriété pour restreindre les données retournées pour les étudiants ou les formateurs.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="3fcf3-174">Toutefois, maintenant lorsque vous liez chaque contrôle de source de données pour le `Person` du jeu d’entités, vous pouvez spécifier que seuls `Student` ou `Instructor` types d’entité doivent être sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="3fcf3-175">Étant donné que l’Entity Framework sait comment différencier les étudiants et les formateurs dans le `Person` jeu d’entités, vous pouvez supprimer le `Where` paramètres de propriété que vous avez entré manuellement pour ce faire.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="3fcf3-176">Dans le concepteur Visual Studio, vous pouvez spécifier le type de l’entité une `EntityDataSource` contrôle doit sélectionner dans la **EntityTypeFilter** zone de liste déroulante de la `Configure Data Source` Assistant, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="3fcf3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="3fcf3-178">Puis, dans le **propriétés** fenêtre vous pouvez de supprimer `Where` valeurs de la clause qui ne sont plus nécessaires, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="3fcf3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="3fcf3-180">Toutefois, étant donné que vous avez modifié le balisage de `EntityDataSource` contrôles à utiliser le `ContextTypeName` attribut, vous ne pouvez pas exécuter le **configurer la Source de données** Assistant sur `EntityDataSource` contrôles que vous avez déjà créé.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="3fcf3-181">Par conséquent, vous allez apporter les modifications requises en modifiant le balisage au lieu de cela.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="3fcf3-182">Ouvrez le *Students.aspx* page.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="3fcf3-183">Dans le `StudentsEntityDataSource` contrôler, supprimez le `Where` d’attribut et d’ajouter un `EntityTypeFilter="Student"` attribut.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="3fcf3-184">Le balisage ressemblera maintenant l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="3fcf3-185">Définition de la `EntityTypeFilter` attribut garantit que les `EntityDataSource` contrôle sélectionne uniquement le type d’entité spécifié.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="3fcf3-186">Si vous souhaitez récupérer les deux `Student` et `Instructor` types d’entité, vous ne serez pas définir cet attribut.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="3fcf3-187">(Vous avez la possibilité de récupérer plusieurs types d’entités avec une `EntityDataSource` contrôle uniquement si vous utilisez le contrôle d’accès aux données en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="3fcf3-188">Si vous utilisez un `EntityDataSource` contrôler pour insérer, mettre à jour ou supprimer des entités et si elle est liée à l’ensemble d’entités peut contenir plusieurs types, vous ne pouvez travailler avec un type d’entité, et vous devez définir cet attribut.)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="3fcf3-189">Répétez la procédure pour le `SearchEntityDataSource` contrôler, sauf supprimer uniquement la partie de la `Where` attribut sélectionne `Student` entités au lieu de supprimer complètement de la propriété.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="3fcf3-190">La balise d’ouverture du contrôle maintenant ressemblera à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="3fcf3-191">Exécutez la page pour vérifier qu’elle fonctionne toujours comme auparavant.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="3fcf3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="3fcf3-193">Mettre à jour les pages suivantes que vous avez créé dans les didacticiels antérieures afin qu’ils utilisent le nouveau `Student` et `Instructor` entités à la place de `Person` entités, puis les exécuter pour vérifier qu’elles fonctionnent comme avant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="3fcf3-194">Dans *StudentsAdd.aspx*, ajoutez `EntityTypeFilter="Student"` à la `StudentsEntityDataSource` contrôle.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="3fcf3-195">Le balisage ressemblera maintenant l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="3fcf3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="3fcf3-197">Dans *About.aspx*, ajoutez `EntityTypeFilter="Student"` à la `StudentStatisticsEntityDataSource` contrôler et supprimer `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="3fcf3-198">Le balisage ressemblera maintenant l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="3fcf3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="3fcf3-200">Dans *Instructors.aspx* et *InstructorsCourses.aspx*, ajoutez `EntityTypeFilter="Instructor"` à la `InstructorsEntityDataSource` contrôler et supprimer `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="3fcf3-201">Le balisage dans *Instructors.aspx* ressemble maintenant à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="3fcf3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="3fcf3-203">Le balisage dans *InstructorsCourses.aspx* ressemble maintenant à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="3fcf3-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="3fcf3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="3fcf3-205">À la suite de ces modifications, vous avez amélioré la facilité de maintenance de l’application Contoso University de plusieurs façons.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="3fcf3-206">Vous avez déplacé la logique de sélection et validation hors de la couche d’interface utilisateur (*.aspx* balisage) et la partie intégrante de la couche d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="3fcf3-207">Cela permet d’isoler votre code d’application des modifications que vous pouvez apporter à l’avenir pour le schéma de base de données ou le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="3fcf3-208">Par exemple, vous pouvez décider que les étudiants peuvent être engagés comme aides de professeurs et par conséquent, obtenez une date d’embauche.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="3fcf3-209">Vous pouvez ensuite ajouter une nouvelle propriété pour différencier les étudiants instructeurs et mettre à jour le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="3fcf3-210">Aucun code dans l’application web ne doit remplacer, sauf lorsque vous souhaitez afficher une date d’embauche pour les étudiants.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="3fcf3-211">Un autre avantage de l’ajout de `Instructor` et `Student` entités est que votre code est plus facilement compréhensible que lorsqu’il agit de `Person` les objets qui ont été réellement les étudiants ou les formateurs.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="3fcf3-212">Vous avez maintenant vu un moyen d’implémenter un modèle d’héritage dans Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="3fcf3-213">Dans ce didacticiel, vous allez apprendre comment utiliser des procédures stockées afin de mieux contrôler la façon dont l’Entity Framework accède à la base de données.</span><span class="sxs-lookup"><span data-stu-id="3fcf3-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3fcf3-214">[Précédent](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Suivant](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="3fcf3-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
