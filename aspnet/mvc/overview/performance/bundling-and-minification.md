---
uid: mvc/overview/performance/bundling-and-minification
title: Groupement et la minimisation | Documents Microsoft
author: Rick-Anderson
description: Groupement et la minimisation sont deux techniques que vous pouvez utiliser dans ASP.NET 4.5 pour améliorer les temps de chargement de demande. Groupement et la minimisation améliore les temps de chargement en reducin...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 001ebf89cda66a50cddcd7e4944f27b9396d4450
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/10/2018
ms.locfileid: "30877481"
---
<a name="bundling-and-minification"></a><span data-ttu-id="b3515-104">Groupement et minimisation</span><span class="sxs-lookup"><span data-stu-id="b3515-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="b3515-105">par [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="b3515-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="b3515-106">Groupement et la minimisation sont deux techniques que vous pouvez utiliser dans ASP.NET 4.5 pour améliorer les temps de chargement de demande.</span><span class="sxs-lookup"><span data-stu-id="b3515-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="b3515-107">Groupement et la minimisation améliore les temps de chargement en réduisant le nombre de demandes au serveur et de réduire la taille des actifs demandés (par exemple, CSS et JavaScript)</span><span class="sxs-lookup"><span data-stu-id="b3515-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="b3515-108">La plupart des navigateurs principaux actuels limite le nombre de [connexions simultanées](http://www.browserscope.org/?category=network) par chaque nom d’hôte à six.</span><span class="sxs-lookup"><span data-stu-id="b3515-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="b3515-109">Cela signifie que pendant le traitement des demandes de six, les requêtes supplémentaires pour les ressources sur un ordinateur hôte seront mises en attente par le navigateur.</span><span class="sxs-lookup"><span data-stu-id="b3515-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="b3515-110">Dans l’image ci-dessous, les onglets de réseau Internet Explorer F12 developer tools présente la temporisation pour les ressources requises par la vue à propos d’un exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="b3515-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="b3515-112">Les barres grises affichent le temps que la demande est en file d’attente par le navigateur en attente sur la limite de six connexion.</span><span class="sxs-lookup"><span data-stu-id="b3515-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="b3515-113">La barre jaune est la durée de la demande au premier octet, autrement dit, le temps nécessaire pour envoyer la demande et la réception de la première réponse à partir du serveur.</span><span class="sxs-lookup"><span data-stu-id="b3515-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="b3515-114">Les barres bleues indiquent le temps nécessaire pour recevoir les données de réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="b3515-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="b3515-115">Vous pouvez double-cliquer sur un élément multimédia pour obtenir des informations de minutage détaillées.</span><span class="sxs-lookup"><span data-stu-id="b3515-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="b3515-116">Par exemple, l’illustration suivante montre les détails de minuterie pour le chargement du */Scripts/MyScripts/JavaScript6.js* fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="b3515-117">L’image précédente montre la **Démarrer** événement, afin d’obtenir l’heure de la demande a été mise en attente en raison de l’Explorateur limite le nombre de connexions simultanées.</span><span class="sxs-lookup"><span data-stu-id="b3515-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="b3515-118">Dans ce cas, la demande a été en file d’attente pour 46 millisecondes en attente d’une autre demande terminer.</span><span class="sxs-lookup"><span data-stu-id="b3515-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="b3515-119">Regroupement</span><span class="sxs-lookup"><span data-stu-id="b3515-119">Bundling</span></span>

<span data-ttu-id="b3515-120">Regroupement d’est une nouvelle fonctionnalité dans ASP.NET 4.5 qui vous permettent de combiner ou de regrouper plusieurs fichiers dans un seul fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="b3515-121">Vous pouvez créer le code CSS, JavaScript et autres groupes.</span><span class="sxs-lookup"><span data-stu-id="b3515-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="b3515-122">Moins de fichiers signifie moins de demandes HTTP et qui peut améliorer les performances de chargement première page.</span><span class="sxs-lookup"><span data-stu-id="b3515-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="b3515-123">L’illustration suivante montre la même vue de minutage de la vue à propos d’indiqué précédemment, mais cette fois avec le groupement et la minimisation activée.</span><span class="sxs-lookup"><span data-stu-id="b3515-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="b3515-124">Minimisation</span><span class="sxs-lookup"><span data-stu-id="b3515-124">Minification</span></span>

<span data-ttu-id="b3515-125">Minimisation effectue diverses optimisations de code différentes css, telles que la suppression d’un espace blanc inutile et les commentaires et de raccourcir les noms de variables pour un caractère ou de scripts.</span><span class="sxs-lookup"><span data-stu-id="b3515-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="b3515-126">Considérez la fonction JavaScript suivante.</span><span class="sxs-lookup"><span data-stu-id="b3515-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="b3515-127">Après réduction, la fonction est réduite à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="b3515-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="b3515-128">Outre la suppression des commentaires et espaces inutiles, les paramètres suivants et les noms de variables ont été renommés (abrégé) comme suit :</span><span class="sxs-lookup"><span data-stu-id="b3515-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="b3515-129">**Langue source**</span><span class="sxs-lookup"><span data-stu-id="b3515-129">**Original**</span></span> | <span data-ttu-id="b3515-130">**Renommé**</span><span class="sxs-lookup"><span data-stu-id="b3515-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="b3515-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="b3515-131">imageTagAndImageID</span></span> | <span data-ttu-id="b3515-132">n</span><span class="sxs-lookup"><span data-stu-id="b3515-132">n</span></span> |
| <span data-ttu-id="b3515-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="b3515-133">imageContext</span></span> | <span data-ttu-id="b3515-134">t</span><span class="sxs-lookup"><span data-stu-id="b3515-134">t</span></span> |
| <span data-ttu-id="b3515-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="b3515-135">imageElement</span></span> | <span data-ttu-id="b3515-136">g</span><span class="sxs-lookup"><span data-stu-id="b3515-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="b3515-137">Impact de groupement et minimisation</span><span class="sxs-lookup"><span data-stu-id="b3515-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="b3515-138">Le tableau suivant montre plusieurs différences importantes entre la liste de tous les composants individuellement et à l’aide de groupement et la minimisation (B/M) dans l’exemple de programme.</span><span class="sxs-lookup"><span data-stu-id="b3515-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="b3515-139">**À l’aide de B/M**</span><span class="sxs-lookup"><span data-stu-id="b3515-139">**Using B/M**</span></span> | <span data-ttu-id="b3515-140">**Sans B/M**</span><span class="sxs-lookup"><span data-stu-id="b3515-140">**Without B/M**</span></span> | <span data-ttu-id="b3515-141">**Change**</span><span class="sxs-lookup"><span data-stu-id="b3515-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b3515-142">**Demandes de fichiers**</span><span class="sxs-lookup"><span data-stu-id="b3515-142">**File Requests**</span></span> | <span data-ttu-id="b3515-143">9</span><span class="sxs-lookup"><span data-stu-id="b3515-143">9</span></span> | <span data-ttu-id="b3515-144">34</span><span class="sxs-lookup"><span data-stu-id="b3515-144">34</span></span> | <span data-ttu-id="b3515-145">256%</span><span class="sxs-lookup"><span data-stu-id="b3515-145">256%</span></span> |
| <span data-ttu-id="b3515-146">**Ko envoyé**</span><span class="sxs-lookup"><span data-stu-id="b3515-146">**KB Sent**</span></span> | <span data-ttu-id="b3515-147">3.26</span><span class="sxs-lookup"><span data-stu-id="b3515-147">3.26</span></span> | <span data-ttu-id="b3515-148">11.92</span><span class="sxs-lookup"><span data-stu-id="b3515-148">11.92</span></span> | <span data-ttu-id="b3515-149">266%</span><span class="sxs-lookup"><span data-stu-id="b3515-149">266%</span></span> |
| <span data-ttu-id="b3515-150">**Ko reçus**</span><span class="sxs-lookup"><span data-stu-id="b3515-150">**KB Received**</span></span> | <span data-ttu-id="b3515-151">388.51</span><span class="sxs-lookup"><span data-stu-id="b3515-151">388.51</span></span> | <span data-ttu-id="b3515-152">530</span><span class="sxs-lookup"><span data-stu-id="b3515-152">530</span></span> | <span data-ttu-id="b3515-153">36%</span><span class="sxs-lookup"><span data-stu-id="b3515-153">36%</span></span> |
| <span data-ttu-id="b3515-154">**Temps de chargement**</span><span class="sxs-lookup"><span data-stu-id="b3515-154">**Load Time**</span></span> | <span data-ttu-id="b3515-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="b3515-155">510 MS</span></span> | <span data-ttu-id="b3515-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="b3515-156">780 MS</span></span> | <span data-ttu-id="b3515-157">53%</span><span class="sxs-lookup"><span data-stu-id="b3515-157">53%</span></span> |

<span data-ttu-id="b3515-158">Les octets envoyés avaient une réduction significative avec regroupement comme les navigateurs sont assez détaillés avec les en-têtes HTTP qu’ils s’appliquent sur les demandes.</span><span class="sxs-lookup"><span data-stu-id="b3515-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="b3515-159">La réduction du nombre d’octets reçus n’est pas aussi volumineux, car les fichiers plus volumineux (*Scripts\jquery-ui-1.8.11.min.js* et *Scripts\jquery-1.7.1.min.js*) sont déjà réduites.</span><span class="sxs-lookup"><span data-stu-id="b3515-159">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="b3515-160">Remarque : Le minutage de l’exemple de programme utilisé le [Fiddler](http://www.fiddler2.com/fiddler2/) outil pour simuler un réseau lent.</span><span class="sxs-lookup"><span data-stu-id="b3515-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="b3515-161">(À partir de la Fiddler **règles** menu, sélectionnez **performances** puis **simuler la vitesse de Modem**.)</span><span class="sxs-lookup"><span data-stu-id="b3515-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="b3515-162">Débogage groupée et réduites de JavaScript</span><span class="sxs-lookup"><span data-stu-id="b3515-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="b3515-163">Il est facile de déboguer votre JavaScript dans un environnement de développement (où le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans les *Web.config* fichier est défini sur `debug="true"` ), car les fichiers JavaScript ne sont pas fournis ou réduites.</span><span class="sxs-lookup"><span data-stu-id="b3515-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="b3515-164">Vous pouvez également déboguer une version Release où vos fichiers JavaScript sont regroupés et réduites.</span><span class="sxs-lookup"><span data-stu-id="b3515-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="b3515-165">Utilisez les outils de développement Internet Explorer F12, déboguer une fonction JavaScript dans un regroupement réduite à l’aide de l’approche suivante :</span><span class="sxs-lookup"><span data-stu-id="b3515-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="b3515-166">Sélectionnez le **Script** onglet, puis sélectionnez le **démarrer le débogage** bouton.</span><span class="sxs-lookup"><span data-stu-id="b3515-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="b3515-167">Sélectionnez le groupe qui contient la fonction JavaScript à déboguer à l’aide du bouton de ressources.</span><span class="sxs-lookup"><span data-stu-id="b3515-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="b3515-168">Mettre en forme le code JavaScript réduite en sélectionnant le **bouton Configuration** ![](bundling-and-minification/_static/image5.png), puis en sélectionnant **Format JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="b3515-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="b3515-169">Dans le **recherche titre** zone d’entrée de t, sélectionnez le nom de la fonction que vous souhaitez déboguer.</span><span class="sxs-lookup"><span data-stu-id="b3515-169">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="b3515-170">Dans l’image suivante, **AddAltToImg** a été entré dans le **recherche titre** zone d’entrée de t.</span><span class="sxs-lookup"><span data-stu-id="b3515-170">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="b3515-171">Pour plus d’informations sur le débogage avec les outils de développement F12, consultez l’article MSDN [utilisant les outils de développement F12 pour déboguer les erreurs JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="b3515-172">Contrôle de regroupement et minimisation</span><span class="sxs-lookup"><span data-stu-id="b3515-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="b3515-173">Groupement et la minimisation est activé ou désactivé en définissant la valeur de l’attribut de débogage dans le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans les *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="b3515-174">Dans le code XML suivant, `debug` est un groupement de possède la valeur true, et la réduction est désactivée.</span><span class="sxs-lookup"><span data-stu-id="b3515-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="b3515-175">Pour activer le groupement et la minimisation, définissez la `debug` la valeur « False ».</span><span class="sxs-lookup"><span data-stu-id="b3515-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="b3515-176">Vous pouvez remplacer le *Web.config* avec la `EnableOptimizations` propriété sur la `BundleTable` classe.</span><span class="sxs-lookup"><span data-stu-id="b3515-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="b3515-177">Le code suivant permet de groupement et la minimisation et remplace tout paramètre dans le *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="b3515-178">À moins que `EnableOptimizations` est `true` ou l’attribut de débogage dans le [compilation, élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans les *Web.config* fichier est défini sur `false`, fichiers ne seront pas fournis ou réduites.</span><span class="sxs-lookup"><span data-stu-id="b3515-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="b3515-179">En outre, la version .min de fichiers ne sera pas utilisée, les versions de débogage complet seront sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="b3515-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="b3515-180">`EnableOptimizations` remplace l’attribut de débogage dans le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans les *Web.config* fichier</span><span class="sxs-lookup"><span data-stu-id="b3515-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="b3515-181">À l’aide de regroupement et la minimisation avec Web Forms ASP.NET et des Pages Web</span><span class="sxs-lookup"><span data-stu-id="b3515-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="b3515-182">Pour les Pages Web, consultez le billet de blog [Ajout de l’optimisation de Web pour un Site Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="b3515-183">Pour Web Forms, consultez le billet de blog [Ajout de groupement et la minimisation pour Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="b3515-184">À l’aide de regroupement et la minimisation avec ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b3515-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="b3515-185">Dans cette section, nous allons créer un ASP.NET MVC de projet pour examiner le groupement et minimisation.</span><span class="sxs-lookup"><span data-stu-id="b3515-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="b3515-186">Commencez par créer un nouveau projet ASP.NET MVC internet nommé **MvcBM** sans modifier les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="b3515-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="b3515-187">Ouvrir le *application\_Start\BundleConfig.cs* de fichiers et d’examiner le `RegisterBundles` méthode qui permet de créer, enregistrer et configurer des groupes.</span><span class="sxs-lookup"><span data-stu-id="b3515-187">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="b3515-188">Le code suivant montre une partie de la `RegisterBundles` (méthode).</span><span class="sxs-lookup"><span data-stu-id="b3515-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="b3515-189">Le code précédent crée un nouveau lot JavaScript nommé *~/bundles/jquery* qui inclut tous les contrôles (qui est debug ou réduites mais pas. *VSDoc*) des fichiers dans le *Scripts* dossier qui correspond à la chaîne de caractère générique « .js ~/Scripts/jquery-{version} ».</span><span class="sxs-lookup"><span data-stu-id="b3515-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="b3515-190">Dans ASP.NET MVC 4, cela signifie que dans une configuration de débogage, le fichier *jquery-1.7.1.js* seront ajoutés au regroupement.</span><span class="sxs-lookup"><span data-stu-id="b3515-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="b3515-191">Dans une configuration release, *jquery-1.7.1.min.js* sera ajouté.</span><span class="sxs-lookup"><span data-stu-id="b3515-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="b3515-192">L’infrastructure de regroupement suit plusieurs conventions courantes telles que :</span><span class="sxs-lookup"><span data-stu-id="b3515-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="b3515-193">Sélection d’un fichier « .min » pour cette version lorsque « FileX.min.js » et « FileX.js » existent.</span><span class="sxs-lookup"><span data-stu-id="b3515-193">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="b3515-194">Sélectionner la version de .min « non » pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="b3515-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="b3515-195">En ignorant «-vsdoc » (par exemple, jquery-1.7.1-vsdoc.js), les fichiers qui sont utilisés uniquement par IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="b3515-195">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="b3515-196">Le `{version}` correspondance générique ci-dessus est utilisé pour créer automatiquement un ensemble de jQuery avec la version appropriée de jQuery dans votre *Scripts* dossier.</span><span class="sxs-lookup"><span data-stu-id="b3515-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="b3515-197">Dans cet exemple, à l’aide d’un caractère générique offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="b3515-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="b3515-198">Vous permet d’utiliser NuGet pour mettre à jour vers une version plus récente de jQuery sans modifier le code de regroupement précédente ou les références de jQuery dans vos pages de vue.</span><span class="sxs-lookup"><span data-stu-id="b3515-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="b3515-199">Sélectionne la version complète pour les configurations debug et la version « .min » pour la mise en production crée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="b3515-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="b3515-200">À l’aide d’un CDN</span><span class="sxs-lookup"><span data-stu-id="b3515-200">Using a CDN</span></span>

 <span data-ttu-id="b3515-201">Le code suivant remplace le groupe local jQuery avec un groupe de jQuery CDN.</span><span class="sxs-lookup"><span data-stu-id="b3515-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="b3515-202">Dans le code ci-dessus, vous sera demandé jQuery du CDN tandis que dans la version en mode et la version debug de jQuery seront extraites localement en mode débogage.</span><span class="sxs-lookup"><span data-stu-id="b3515-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="b3515-203">Lorsque vous utilisez un CDN, vous devez disposer un mécanisme de secours en cas d’échec de la demande CDN.</span><span class="sxs-lookup"><span data-stu-id="b3515-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="b3515-204">Le balisage suivant, extrait de la fin de la mise en page fichier montre ajouté à la requête jQuery si la panne CDN.</span><span class="sxs-lookup"><span data-stu-id="b3515-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="b3515-205">Création d’un regroupement</span><span class="sxs-lookup"><span data-stu-id="b3515-205">Creating a Bundle</span></span>

<span data-ttu-id="b3515-206">Le [groupe](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `Include` méthode prend un tableau de chaînes, où chaque chaîne est un chemin d’accès virtuel à la ressource.</span><span class="sxs-lookup"><span data-stu-id="b3515-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="b3515-207">Le code suivant à partir de la méthode RegisterBundles dans le *application\_Start\BundleConfig.cs* fichier montre comment plusieurs fichiers sont ajoutés à un regroupement :</span><span class="sxs-lookup"><span data-stu-id="b3515-207">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="b3515-208">Le [groupe](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `IncludeDirectory` méthode est fournie pour ajouter tous les fichiers dans un répertoire (et éventuellement tous ses sous-répertoires) qui correspondent à un modèle de recherche.</span><span class="sxs-lookup"><span data-stu-id="b3515-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="b3515-209">Le [groupe](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `IncludeDirectory` API est indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="b3515-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="b3515-210">Offres groupées sont référencées dans les vues à l’aide de la méthode de rendu ( `Styles.Render` pour CSS et `Scripts.Render` pour JavaScript).</span><span class="sxs-lookup"><span data-stu-id="b3515-210">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="b3515-211">Le balisage suivant à partir de la *Views\Shared\\_Layout.cshtml* fichier montre comment les vues de projet par défaut ASP.NET internet référencent offres CSS et JavaScript.</span><span class="sxs-lookup"><span data-stu-id="b3515-211">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="b3515-212">Notez que les méthodes de rendu prend un tableau de chaînes, vous pouvez ajouter plusieurs lots sur une seule ligne de code.</span><span class="sxs-lookup"><span data-stu-id="b3515-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="b3515-213">En règle générale, vous devez utiliser les méthodes de rendu qui créent le HTML nécessaire pour faire référence à l’élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="b3515-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="b3515-214">Vous pouvez utiliser la `Url` méthode permettant de générer l’URL à l’élément multimédia sans les balises nécessaires pour faire référence à l’élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="b3515-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="b3515-215">Supposons que vous souhaitez utiliser la nouvelle HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribut.</span><span class="sxs-lookup"><span data-stu-id="b3515-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="b3515-216">Le code suivant montre comment faire référence à l’aide de modernizr à la `Url` (méthode).</span><span class="sxs-lookup"><span data-stu-id="b3515-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="b3515-217">À l’aide de la «\*« caractère générique pour sélectionner les fichiers</span><span class="sxs-lookup"><span data-stu-id="b3515-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="b3515-218">Le chemin d’accès virtuel spécifié dans le `Include` (méthode) et la recherche de modèle dans le `IncludeDirectory` méthode peut accepter un «\*« caractère générique en tant que préfixe ou suffixe à dans le dernier segment de chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="b3515-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="b3515-219">La chaîne de recherche respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="b3515-219">The search string is case insensitive.</span></span> <span data-ttu-id="b3515-220">Le `IncludeDirectory` méthode a la possibilité de rechercher des sous-répertoires.</span><span class="sxs-lookup"><span data-stu-id="b3515-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="b3515-221">Prenez un projet avec les fichiers JavaScript suivants :</span><span class="sxs-lookup"><span data-stu-id="b3515-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="b3515-222">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-222">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="b3515-223">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-223">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="b3515-224">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-224">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="b3515-225">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-225">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="b3515-227">Le tableau suivant présente les fichiers ajoutés à un groupe en utilisant le caractère générique, comme indiqué :</span><span class="sxs-lookup"><span data-stu-id="b3515-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="b3515-228">**Call**</span><span class="sxs-lookup"><span data-stu-id="b3515-228">**Call**</span></span> | <span data-ttu-id="b3515-229">**Fichiers ajoutés ou Exception levée**</span><span class="sxs-lookup"><span data-stu-id="b3515-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="b3515-230">Inclure (« ~/Scripts/Common/\*.js »)</span><span class="sxs-lookup"><span data-stu-id="b3515-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="b3515-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="b3515-232">Inclure (« ~/Scripts/Common/T\*.js »)</span><span class="sxs-lookup"><span data-stu-id="b3515-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="b3515-233">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="b3515-233">Invalid pattern exception.</span></span> <span data-ttu-id="b3515-234">Le caractère générique est uniquement autorisé sur le préfixe ou le suffixe.</span><span class="sxs-lookup"><span data-stu-id="b3515-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="b3515-235">Inclure (« ~/Scripts/Common/\*og.\*»)</span><span class="sxs-lookup"><span data-stu-id="b3515-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="b3515-236">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="b3515-236">Invalid pattern exception.</span></span> <span data-ttu-id="b3515-237">Qu’un seul caractère générique est autorisé.</span><span class="sxs-lookup"><span data-stu-id="b3515-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="b3515-238">« Inclure (« ~/Scripts/Common/T\*»)</span><span class="sxs-lookup"><span data-stu-id="b3515-238">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="b3515-239">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-239">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="b3515-240">« Inclure (« ~/Scripts/Common/\*»)</span><span class="sxs-lookup"><span data-stu-id="b3515-240">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="b3515-241">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="b3515-241">Invalid pattern exception.</span></span> <span data-ttu-id="b3515-242">Un segment de caractère générique pure n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="b3515-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="b3515-243">IncludeDirectory("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="b3515-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="b3515-244">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-244">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="b3515-245">IncludeDirectory("~/Scripts/Common", "T\*",true)</span><span class="sxs-lookup"><span data-stu-id="b3515-245">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="b3515-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="b3515-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="b3515-247">Ajouter explicitement chaque fichier à une offre groupée est généralement préférable sur le chargement de caractère générique des fichiers pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="b3515-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="b3515-248">Ajout de scripts par défaut de caractère générique pour les charger dans l’ordre alphabétique, qui est généralement pas ce que vous souhaitez.</span><span class="sxs-lookup"><span data-stu-id="b3515-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="b3515-249">Fichiers CSS et JavaScript fréquemment doivent être ajoutés dans l’ordre (non alphabétiques).</span><span class="sxs-lookup"><span data-stu-id="b3515-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="b3515-250">Vous pouvez réduire ce risque en ajoutant une personnalisée [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implémentation, mais ajouter explicitement chaque fichier est moins sujet aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="b3515-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="b3515-251">Par exemple, vous pouvez ajouter de nouvelles ressources dans un dossier dans le futur, qui peuvent vous amener à modifier votre [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="b3515-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="b3515-252">Afficher les fichiers spécifiques ajoutées à un répertoire à l’aide du caractère générique du chargement peuvent être inclus dans toutes les vues faisant référence à cette offre groupée.</span><span class="sxs-lookup"><span data-stu-id="b3515-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="b3515-253">Si le script d’affichage spécifique est ajouté à un groupe, vous pouvez obtenir une erreur de JavaScript sur les autres vues qui font référence à l’offre groupée.</span><span class="sxs-lookup"><span data-stu-id="b3515-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="b3515-254">Fichiers CSS importer d’autres fichiers entraîner des fichiers importés chargés à deux reprises.</span><span class="sxs-lookup"><span data-stu-id="b3515-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="b3515-255">Par exemple, le code suivant crée un regroupement avec la plupart des fichiers CSS thème de l’interface utilisateur de jQuery chargés à deux reprises.</span><span class="sxs-lookup"><span data-stu-id="b3515-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="b3515-256">Le sélecteur de caractère générique «\*.css » permet de bénéficier de chaque fichier CSS dans le dossier, y compris le *Content\themes\base\jquery.ui.all.css* fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="b3515-257">Le *jquery.ui.all.css* fichier importe d’autres fichiers CSS.</span><span class="sxs-lookup"><span data-stu-id="b3515-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="b3515-258">Regrouper la mise en cache</span><span class="sxs-lookup"><span data-stu-id="b3515-258">Bundle Caching</span></span>

<span data-ttu-id="b3515-259">Regroupements définir l’en-tête d’expiration HTTP un an à partir de la création de l’application.</span><span class="sxs-lookup"><span data-stu-id="b3515-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="b3515-260">Si vous accédez à une page précédemment affichée, montre Fiddler IE ne rend pas une demande conditionnelle pour le regroupement, autrement dit, il existe aucune demande HTTP GET à partir d’Internet Explorer pour les regroupements et aucune réponse HTTP 304 à partir du serveur.</span><span class="sxs-lookup"><span data-stu-id="b3515-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="b3515-261">Vous pouvez forcer Internet Explorer pour effectuer une demande conditionnelle pour chaque regroupement avec la touche F5 (entraînant une réponse HTTP 304 pour chaque regroupement).</span><span class="sxs-lookup"><span data-stu-id="b3515-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="b3515-262">Vous pouvez forcer une actualisation complète à l’aide de ^ F5 (entraînant une réponse HTTP 200 pour chaque regroupement.)</span><span class="sxs-lookup"><span data-stu-id="b3515-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="b3515-263">L’illustration suivante montre le **mise en cache** onglet du volet Fiddler réponse :</span><span class="sxs-lookup"><span data-stu-id="b3515-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![image de mise en cache de Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="b3515-265">La demande</span><span class="sxs-lookup"><span data-stu-id="b3515-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="b3515-266">est de l’offre groupée **AllMyScripts** et contient une paire de chaîne de requête **v = r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="b3515-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="b3515-267">La chaîne de requête **v** a la valeur de jeton qui est un identificateur unique utilisé pour la mise en cache.</span><span class="sxs-lookup"><span data-stu-id="b3515-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="b3515-268">Tant que le groupe ne change pas, l’application ASP.NET demande le **AllMyScripts** regrouper à l’aide de ce jeton.</span><span class="sxs-lookup"><span data-stu-id="b3515-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="b3515-269">Si n’importe quel fichier dans le groupe de modifications, l’infrastructure d’optimisation ASP.NET génère un nouveau jeton, garantissant que les demandes du navigateur pour le regroupement obtiennent le dernier groupe.</span><span class="sxs-lookup"><span data-stu-id="b3515-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="b3515-270">Si vous exécutez les outils de développement F12 d’Internet Explorer 9 et que vous accédez à une page chargée, IE incorrectement montre les requêtes GET conditionnelles apportées à chaque lot et le serveur HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="b3515-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="b3515-271">Vous pouvez en savoir pourquoi Internet Explorer 9 a des problèmes de déterminer si une demande conditionnelle a été effectuée dans le billet de blog [à l’aide de CDN et expire pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="b3515-272">MOINS, CoffeeScript, SCSS, Sass de regroupement.</span><span class="sxs-lookup"><span data-stu-id="b3515-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="b3515-273">Le groupement et la minimisation framework fournit un mécanisme permettant de traiter les langages intermédiaires telles que [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [moins](http://www.dotlesscss.org/) ou [Coffeescript ](http://coffeescript.org/)et appliquer des transformations telles que de réduction à l’offre groupée résultante.</span><span class="sxs-lookup"><span data-stu-id="b3515-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="b3515-274">Par exemple, pour ajouter [.less](http://www.dotlesscss.org/) fichiers à votre projet MVC 4 :</span><span class="sxs-lookup"><span data-stu-id="b3515-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="b3515-275">Créez un dossier pour moins de votre contenu.</span><span class="sxs-lookup"><span data-stu-id="b3515-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="b3515-276">L’exemple suivant utilise le *Content\MyLess* dossier.</span><span class="sxs-lookup"><span data-stu-id="b3515-276">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="b3515-277">Ajouter le [.less](http://www.dotlesscss.org/) package NuGet **sans point** à votre projet.</span><span class="sxs-lookup"><span data-stu-id="b3515-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="b3515-278">![Installation sans point de NuGet](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b3515-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="b3515-279">Ajoutez une classe qui implémente le [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span><span class="sxs-lookup"><span data-stu-id="b3515-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="b3515-280">Pour la transformation .less, ajoutez le code suivant à votre projet.</span><span class="sxs-lookup"><span data-stu-id="b3515-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="b3515-281">Créer un groupe de fichiers LESS avec la `LessTransform` et [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transformer.</span><span class="sxs-lookup"><span data-stu-id="b3515-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="b3515-282">Ajoutez le code suivant à la `RegisterBundles` méthode dans le *application\_Start\BundleConfig.cs* fichier.</span><span class="sxs-lookup"><span data-stu-id="b3515-282">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="b3515-283">Ajoutez le code suivant à toutes les vues qui fait référence à l’application de moins.</span><span class="sxs-lookup"><span data-stu-id="b3515-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="b3515-284">Considérations de groupe</span><span class="sxs-lookup"><span data-stu-id="b3515-284">Bundle Considerations</span></span>

<span data-ttu-id="b3515-285">Une bonne convention à suivre lors de la création de groupes est à inclure « groupe » en tant que préfixe du nom de groupe.</span><span class="sxs-lookup"><span data-stu-id="b3515-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="b3515-286">Cela empêchera une éventuelle [conflit de routage](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="b3515-287">Une fois que vous mettez à jour un fichier dans un regroupement, un nouveau jeton est généré pour le paramètre de chaîne de requête de regroupement et la prochaine fois qu’un client demande une page qui contient le groupe doit être téléchargé à l’offre complète.</span><span class="sxs-lookup"><span data-stu-id="b3515-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="b3515-288">Dans le balisage traditionnel où chaque élément multimédia est répertorié individuellement, vous est téléchargé uniquement le fichier modifié.</span><span class="sxs-lookup"><span data-stu-id="b3515-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="b3515-289">Ressources qui changent fréquemment ne peuvent pas être de bons candidats pour le regroupement.</span><span class="sxs-lookup"><span data-stu-id="b3515-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="b3515-290">Groupement et la minimisation principalement améliorent le premier temps de chargement de demande de page.</span><span class="sxs-lookup"><span data-stu-id="b3515-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="b3515-291">Une fois qu’une page Web a été demandée, le navigateur met en cache les ressources (JavaScript, CSS et images) afin de groupement et la minimisation ne fournissent n’importe quel légèrement les performances lors de la demande de la même page ou de pages sur le même site demande les mêmes actifs.</span><span class="sxs-lookup"><span data-stu-id="b3515-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="b3515-292">Si vous ne définissez pas l’expiration en-tête correctement sur vos éléments multimédias, vous n’utilisez pas groupement et la minimisation l’heuristique d’actualisation navigateurs marque les éléments multimédias obsolètes après quelques jours et, le navigateur nécessite une demande de validation pour chaque élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="b3515-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="b3515-293">Dans ce cas, groupement et la minimisation fournissent une augmentation des performances après la première demande de page.</span><span class="sxs-lookup"><span data-stu-id="b3515-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="b3515-294">Pour plus d’informations, consultez le blog de [à l’aide de CDN et expire pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="b3515-295">La limitation du navigateur de six connexions simultanées par chaque nom d’hôte peut être atténuée en utilisant un [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="b3515-296">Étant donné que le CDN doit avoir un nom d’hôte différents à votre site d’hébergement, des demandes de ressources du CDN comptera pas la limite de six connexions simultanées à votre environnement d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="b3515-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="b3515-297">Un CDN peut également fournir bord avantages de la mise en cache et mise en cache du package commun.</span><span class="sxs-lookup"><span data-stu-id="b3515-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="b3515-298">Regroupements doivent être partitionnées par les pages qui en ont besoin.</span><span class="sxs-lookup"><span data-stu-id="b3515-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="b3515-299">Par exemple, la valeur par défaut du modèle ASP.NET MVC d’une application internet crée un groupe de Validation jQuery distinct de jQuery.</span><span class="sxs-lookup"><span data-stu-id="b3515-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="b3515-300">Étant donné que les affichages par défaut créés n’ont aucune entrée et ne publiez pas de valeurs, ils n’indiquent pas le groupe de validation.</span><span class="sxs-lookup"><span data-stu-id="b3515-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="b3515-301">Le `System.Web.Optimization` espace de noms est implémenté dans System.Web.Optimization.DLL.</span><span class="sxs-lookup"><span data-stu-id="b3515-301">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="b3515-302">Il tire parti de la bibliothèque WebGrease (WebGrease.dll) pour les fonctions de réduction, qui à son tour utilise Antlr3.Runtime.dll.</span><span class="sxs-lookup"><span data-stu-id="b3515-302">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="b3515-303">*Utiliser Twitter pour effectuer des publications rapides et de partager des liens. Le handle de mon Twitter est*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="b3515-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b3515-304">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b3515-304">Additional Resources</span></span>

- <span data-ttu-id="b3515-305">Vidéo :[groupement et optimisation](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) par [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="b3515-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="b3515-306">[Ajout de l’optimisation du Web à un Site Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="b3515-307">[Groupement de l’ajout et la minimisation pour Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3515-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="b3515-308">[Impact sur les performances de regroupement et la minimisation sur la navigation Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) par [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="b3515-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="b3515-309">[À l’aide du CDN et expire pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) par Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="b3515-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="b3515-310">Réduire RTT (durée des boucles)</span><span class="sxs-lookup"><span data-stu-id="b3515-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="b3515-311">Contributors</span><span class="sxs-lookup"><span data-stu-id="b3515-311">Contributors</span></span>

- <span data-ttu-id="b3515-312">Arts martiaux de hao</span><span class="sxs-lookup"><span data-stu-id="b3515-312">Hao Kung</span></span>
- [<span data-ttu-id="b3515-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="b3515-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="b3515-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="b3515-314">Diana LaRose</span></span>
