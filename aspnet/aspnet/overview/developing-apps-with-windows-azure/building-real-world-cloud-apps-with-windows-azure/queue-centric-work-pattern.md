---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: Modèle de travail centré sur la file d’attente (génération d’applications Cloud du monde réel avec Azure) | Documents Microsoft
author: MikeWasson
description: Les applications du Cloud monde réel construction avec Azure livres est basée sur une présentation développée par Scott Guthrie. Il explique 13 des modèles et des meilleures pratiques qui peuvent il...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 124e673206ecea2eac5efb8c2802a32a690fa104
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/06/2018
---
<a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="c9e84-104">Modèle de travail centré sur la file d’attente (génération d’applications Cloud du monde réel avec Azure)</span><span class="sxs-lookup"><span data-stu-id="c9e84-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="c9e84-105">par [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c9e84-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="c9e84-106">[Téléchargement corriger projet](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) ou [télécharger des livres](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="c9e84-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="c9e84-107">Le **construction réelle applications Cloud du monde avec Azure** livres est basé sur une présentation développée par Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="c9e84-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="c9e84-108">Il explique 13 modèles et pratiques qui peuvent vous aider à réussir le développement d’applications web pour le cloud.</span><span class="sxs-lookup"><span data-stu-id="c9e84-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="c9e84-109">Pour plus d’informations sur le livre électronique, consultez [le premier chapitre](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="c9e84-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="c9e84-110">Précédemment, nous avons vu que l’utilisation de plusieurs services peut entraîner un contrat SLA de « composite », où le contrat SLA effective de l’application est la *produit* des contrats de service individuels.</span><span class="sxs-lookup"><span data-stu-id="c9e84-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="c9e84-111">Par exemple, l’application Fix It utilise des Sites Web, de stockage et de base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="c9e84-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="c9e84-112">Si l’un de ces services échoue, l’application renvoie une erreur à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9e84-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="c9e84-113">La mise en cache est un bon moyen de gérer les défaillances temporaires pour le contenu en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="c9e84-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="c9e84-114">Mais que se passe-t-il si votre application a besoin effectuer le travail ?</span><span class="sxs-lookup"><span data-stu-id="c9e84-114">But what if your application needs to do work?</span></span> <span data-ttu-id="c9e84-115">Par exemple, lorsque l’utilisateur envoie une nouvelle tâche corriger, l’application ne peut pas placer uniquement la tâche dans le cache.</span><span class="sxs-lookup"><span data-stu-id="c9e84-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="c9e84-116">L’application doit écrire la tâche corriger dans un magasin de données permanentes, il peut être traité.</span><span class="sxs-lookup"><span data-stu-id="c9e84-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="c9e84-117">C’est là le modèle centré sur la file d’attente de travail.</span><span class="sxs-lookup"><span data-stu-id="c9e84-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="c9e84-118">Ce modèle permet un couplage faible entre un niveau web et un service principal.</span><span class="sxs-lookup"><span data-stu-id="c9e84-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="c9e84-119">Voici comment le modèle fonctionne.</span><span class="sxs-lookup"><span data-stu-id="c9e84-119">Here's how the pattern works.</span></span> <span data-ttu-id="c9e84-120">Lorsque l’application reçoit une demande, il place d’un élément de travail dans une file d’attente et retourne immédiatement la réponse.</span><span class="sxs-lookup"><span data-stu-id="c9e84-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="c9e84-121">Ensuite, un traitement principal distinct extrait des éléments de travail à partir de la file d’attente et effectue le travail.</span><span class="sxs-lookup"><span data-stu-id="c9e84-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="c9e84-122">Le modèle de travail centré sur la file d’attente est utile pour :</span><span class="sxs-lookup"><span data-stu-id="c9e84-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="c9e84-123">Travail qui est beaucoup de temps (forte latence).</span><span class="sxs-lookup"><span data-stu-id="c9e84-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="c9e84-124">Travail nécessitant un service externe ne peut pas toujours possible.</span><span class="sxs-lookup"><span data-stu-id="c9e84-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="c9e84-125">Le travail gourmandes en ressources (UC élevée).</span><span class="sxs-lookup"><span data-stu-id="c9e84-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="c9e84-126">Travail qui pourraient tirer parti de taux d’audit (soumise à une charge soudaine forte).</span><span class="sxs-lookup"><span data-stu-id="c9e84-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="c9e84-127">Latence réduite</span><span class="sxs-lookup"><span data-stu-id="c9e84-127">Reduced Latency</span></span>

<span data-ttu-id="c9e84-128">Les files d’attente sont utiles à tout moment, que vous effectuez un travail de longue durée.</span><span class="sxs-lookup"><span data-stu-id="c9e84-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="c9e84-129">Si une tâche prend quelques secondes ou plus, au lieu de bloquer l’utilisateur final, placez l’élément de travail dans une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="c9e84-130">Indiquer à l’utilisateur « Nous y travaillons » et utilisez un écouteur de file d’attente pour traiter la tâche en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c9e84-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="c9e84-131">Par exemple, lorsque vous achetez un objet à un site de vente en ligne, le site web confirme immédiatement votre commande.</span><span class="sxs-lookup"><span data-stu-id="c9e84-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="c9e84-132">Mais cela ne signifie pas que vos objets est déjà un camion remis.</span><span class="sxs-lookup"><span data-stu-id="c9e84-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="c9e84-133">Elles placer une tâche dans une file d’attente, et en arrière-plan ils font la vérification de solvabilité, préparation de vos éléments pour l’expédition et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="c9e84-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="c9e84-134">Pour les scénarios avec latence courtes, la durée totale de bout en bout peut être plus de temps à l’aide d’une file d’attente, par rapport à l’exécution de façon synchrone la tâche.</span><span class="sxs-lookup"><span data-stu-id="c9e84-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="c9e84-135">Mais même les autres avantages peuvent annuler cet inconvénient.</span><span class="sxs-lookup"><span data-stu-id="c9e84-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="c9e84-136">Fiabilité accrue</span><span class="sxs-lookup"><span data-stu-id="c9e84-136">Increased Reliability</span></span>

<span data-ttu-id="c9e84-137">Dans la version de corriger ce que nous avons étudié jusqu'à présent, le serveur web frontal est étroitement lié à la base de données SQL principal.</span><span class="sxs-lookup"><span data-stu-id="c9e84-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="c9e84-138">Si le service de base de données SQL n’est pas disponible, l’utilisateur reçoit une erreur.</span><span class="sxs-lookup"><span data-stu-id="c9e84-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="c9e84-139">Si les nouvelles tentatives ne fonctionnent pas (autrement dit, l’échec est plus de transitoire), la seule chose que vous pouvez effectuer est de montrer une erreur et demandez à l’utilisateur de réessayer ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="c9e84-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Diagramme montrant les serveurs web frontaux échec lorsque le serveur principal de base de données SQL a échoué](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="c9e84-141">À l’aide de files d’attente, lorsqu’un utilisateur soumet une tâche corriger, l’application écrit un message à la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="c9e84-142">La charge utile de message est un [JSON](http://json.org/) la représentation sous forme de la tâche.</span><span class="sxs-lookup"><span data-stu-id="c9e84-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="c9e84-143">Dès que le message est écrit dans la file d’attente, l’application retourne et immédiatement un message de réussite à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9e84-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="c9e84-144">Si un des services principaux, tels que la base de données SQL ou de l’écouteur de file d’attente--travailler hors connexion, les utilisateurs peuvent envoyer toujours nouvelles tâches de réparation.</span><span class="sxs-lookup"><span data-stu-id="c9e84-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="c9e84-145">Les messages simplement file d’attente jusqu'à ce que les services principaux sont à nouveau disponibles.</span><span class="sxs-lookup"><span data-stu-id="c9e84-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="c9e84-146">À ce stade, les services principaux seront rattraper sur la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-146">At that point, the backend services will catch up on the backlog.</span></span>

![Diagramme montrant le web frontal continuer à fonctionner lorsqu’il existe une erreur de base de données SQL](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="c9e84-148">En outre, maintenant vous pouvez ajouter une logique supplémentaire de serveur principal sans se préoccuper de la résilience du serveur frontal.</span><span class="sxs-lookup"><span data-stu-id="c9e84-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="c9e84-149">Par exemple, vous souhaiterez envoyer un courrier électronique ou un message SMS au propriétaire chaque fois qu’un nouveau résoudre il est assigné.</span><span class="sxs-lookup"><span data-stu-id="c9e84-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="c9e84-150">Si le courrier électronique ou le service SMS devient indisponible, vous pouvez traiter tous les autres éléments et ensuite placer un message dans une file d’attente distinct pour l’envoi de messages de messagerie/SMS.</span><span class="sxs-lookup"><span data-stu-id="c9e84-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="c9e84-151">Notre contrat SLA efficace était auparavant une applications Web &times; stockage &times; base de données SQL = 99,7 %.</span><span class="sxs-lookup"><span data-stu-id="c9e84-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="c9e84-152">(Consultez [conception pour faire face aux défaillances](design-to-survive-failures.md).)</span><span class="sxs-lookup"><span data-stu-id="c9e84-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="c9e84-153">Quand vous modifiez l’application d’utiliser une file d’attente, le serveur web frontal dépend uniquement des applications Web et de stockage, pour un contrat SLA de 99,8 % composite.</span><span class="sxs-lookup"><span data-stu-id="c9e84-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="c9e84-154">(Notez que les files d’attente font partie du service de stockage Azure, ils sont inclus dans le contrat SLA de même que le stockage d’objets blob).</span><span class="sxs-lookup"><span data-stu-id="c9e84-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="c9e84-155">Si vous avez besoin de mieux à 99,8 %, vous pouvez créer deux files d’attente dans deux régions différentes.</span><span class="sxs-lookup"><span data-stu-id="c9e84-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="c9e84-156">Désigner une comme le serveur principal et l’autre en tant que le serveur secondaire.</span><span class="sxs-lookup"><span data-stu-id="c9e84-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="c9e84-157">Dans votre application, basculer vers la file d’attente secondaire si la file d’attente principale n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="c9e84-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="c9e84-158">Le risque des deux ne soit pas disponible en même temps est très faible.</span><span class="sxs-lookup"><span data-stu-id="c9e84-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="c9e84-159">Taux d’audit et de mise à l’échelle indépendante</span><span class="sxs-lookup"><span data-stu-id="c9e84-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="c9e84-160">Les files d’attente sont également utiles pour nous parlons *taux audit* ou *nivellement de charge*.</span><span class="sxs-lookup"><span data-stu-id="c9e84-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="c9e84-161">Les applications Web sont souvent vulnérables aux pics soudains dans le trafic.</span><span class="sxs-lookup"><span data-stu-id="c9e84-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="c9e84-162">Vous pouvez utiliser l’échelle automatique pour ajouter automatiquement des serveurs web pour gérer le trafic web accrue, échelle automatique peut ne pas pouvoir réagir assez rapidement à gérer les pics de charge brusques.</span><span class="sxs-lookup"><span data-stu-id="c9e84-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="c9e84-163">Si les serveurs web peuvent alléger en partie du travail qu’ils doivent en écrivant un message à une file d’attente, ils peuvent gérer davantage de trafic.</span><span class="sxs-lookup"><span data-stu-id="c9e84-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="c9e84-164">Un service principal peut ensuite lire les messages de la file d’attente et les traiter.</span><span class="sxs-lookup"><span data-stu-id="c9e84-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="c9e84-165">La profondeur de la file d’attente concernent l’agrandissement ou la réduction de comme la charge entrante varie.</span><span class="sxs-lookup"><span data-stu-id="c9e84-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="c9e84-166">Avec une grande partie de son travail de longue durée déchargé vers un service principal, la couche web peut répondre plus facilement des pics soudains dans le trafic.</span><span class="sxs-lookup"><span data-stu-id="c9e84-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="c9e84-167">Et vous faire des économies, car toute quantité donnée de trafic peut être gérée par un nombre de serveurs web.</span><span class="sxs-lookup"><span data-stu-id="c9e84-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="c9e84-168">Vous pouvez faire évoluer le niveau web et le service principal indépendamment.</span><span class="sxs-lookup"><span data-stu-id="c9e84-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="c9e84-169">Par exemple, vous devrez peut-être les trois serveurs web, mais qu’un seul serveur traitement file d’attente des messages.</span><span class="sxs-lookup"><span data-stu-id="c9e84-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="c9e84-170">Ou, si vous exécutez une tâche de calcul intensif en arrière-plan, vous devrez peut-être plusieurs serveurs principaux.</span><span class="sxs-lookup"><span data-stu-id="c9e84-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="c9e84-171">Échelle fonctionne avec les services principaux, ainsi qu’avec la couche web.</span><span class="sxs-lookup"><span data-stu-id="c9e84-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="c9e84-172">Vous pouvez monter ou à l’échelle le nombre de machines virtuelles qui traitent les tâches dans la file d’attente, en fonction de l’utilisation du processeur du serveur principal machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="c9e84-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="c9e84-173">Ou, selon le nombre d’éléments dans une file d’attente de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="c9e84-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="c9e84-174">Par exemple, vous voyez la mise à l’échelle de maintenir pas plus de 10 éléments dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="c9e84-175">Si la file d’attente a plus de 10 éléments, mise à l’échelle ajoutera des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="c9e84-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="c9e84-176">Quand ils rattraper, mise à l’échelle détruira les machines virtuelles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c9e84-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="c9e84-177">Ajout des files d’attente pour le correctif il Application</span><span class="sxs-lookup"><span data-stu-id="c9e84-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="c9e84-178">Pour implémenter le modèle de file d’attente, nous devons effectuer deux modifications à l’application corriger.</span><span class="sxs-lookup"><span data-stu-id="c9e84-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="c9e84-179">Lorsqu’un utilisateur soumet une nouvelle tâche corriger, placez la tâche dans la file d’attente, au lieu d’écrire dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="c9e84-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="c9e84-180">Créer un service principal qui traite les messages dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="c9e84-181">La file d’attente, nous allons utiliser la [Service de stockage de file d’attente Azure](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="c9e84-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="c9e84-182">Une autre option consiste à utiliser [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="c9e84-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="c9e84-183">Pour déterminer le service de file d’attente à utiliser, tenez compte des comment votre application a besoin pour envoyer et recevoir les messages dans la file d’attente :</span><span class="sxs-lookup"><span data-stu-id="c9e84-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="c9e84-184">Si vous avez contributif producteurs et consommateurs concurrents, envisagez d’utiliser le Service de stockage de file d’attente Azure.</span><span class="sxs-lookup"><span data-stu-id="c9e84-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="c9e84-185">« Producteurs coopérer » signifie que plusieurs processus sont Ajout de messages à une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="c9e84-186">« Consommateurs concurrents » signifie que plusieurs processus extraient des messages à la file d’attente pour les traiter, mais un message donné peut uniquement être traité par un « consommateur ».</span><span class="sxs-lookup"><span data-stu-id="c9e84-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="c9e84-187">Si vous avez besoin de débit supérieur à celui que vous pouvez obtenir une file d’attente unique, utiliser les files d’attente supplémentaires et/ou des comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c9e84-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="c9e84-188">Si vous avez besoin d’un [modèle de publication/abonnement](http://en.wikipedia.org/wiki/Publish/subscribe), envisagez d’utiliser des files d’attente de Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e84-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="c9e84-189">L’application de corriger le mieux aux producteurs contributif et des modèles de consommateurs concurrents.</span><span class="sxs-lookup"><span data-stu-id="c9e84-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="c9e84-190">Une autre considération est la disponibilité des applications.</span><span class="sxs-lookup"><span data-stu-id="c9e84-190">Another consideration is application availability.</span></span> <span data-ttu-id="c9e84-191">Le Service de stockage de file d’attente fait partie du même service que nous utilisons pour le stockage d’objets blob, donc l’utiliser n’a aucun effet sur notre contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="c9e84-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="c9e84-192">Azure Service Bus est un service distinct avec sa propre contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="c9e84-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="c9e84-193">Si nous utilisons des files d’attente du Bus de Service, il faut tenir compte un pourcentage de SLA supplémentaire et notre contrat SLA composite est moins élevé.</span><span class="sxs-lookup"><span data-stu-id="c9e84-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="c9e84-194">Lorsque vous choisissez un service de file d’attente, assurez-vous que vous comprenez l’impact de votre choix sur la disponibilité de l’application.</span><span class="sxs-lookup"><span data-stu-id="c9e84-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="c9e84-195">Pour plus d’informations, consultez la [ressources](#resources) section.</span><span class="sxs-lookup"><span data-stu-id="c9e84-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="c9e84-196">Création de Messages de la file d’attente</span><span class="sxs-lookup"><span data-stu-id="c9e84-196">Creating Queue Messages</span></span>

<span data-ttu-id="c9e84-197">Pour placer une tâche corriger sur la file d’attente, le serveur web frontal effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9e84-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="c9e84-198">Créer un [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span><span class="sxs-lookup"><span data-stu-id="c9e84-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="c9e84-199">Le `CloudQueueClient` instance est utilisée pour exécuter des demandes sur le Service de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="c9e84-200">Créer la file d’attente, s’il n’existe pas encore.</span><span class="sxs-lookup"><span data-stu-id="c9e84-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="c9e84-201">La tâche corriger la sérialisation.</span><span class="sxs-lookup"><span data-stu-id="c9e84-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="c9e84-202">Appelez [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) pour placer le message dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="c9e84-203">Nous allons effectuer ce travail dans le constructeur et `SendMessageAsync` (méthode) d’un nouveau `FixItQueueManager` classe.</span><span class="sxs-lookup"><span data-stu-id="c9e84-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="c9e84-204">Ici, nous utilisons le [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library pour sérialiser le correctif au format JSON.</span><span class="sxs-lookup"><span data-stu-id="c9e84-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="c9e84-205">Vous pouvez utiliser n’importe quelle approche de sérialisation que vous préférez.</span><span class="sxs-lookup"><span data-stu-id="c9e84-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="c9e84-206">JSON a l’avantage d’être contrôlable de visu, tout en étant moins détaillés que XML.</span><span class="sxs-lookup"><span data-stu-id="c9e84-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="c9e84-207">Code de qualité production serait ajouter la logique de gestion des erreurs, interrompre si la base de données n’est plus disponible, gérer plus facilement de récupération, créez la file d’attente au démarrage de l’application et gérer «[poison » messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e84-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="c9e84-208">(Un message incohérent est un message qui ne peut pas être traité pour une raison quelconque.</span><span class="sxs-lookup"><span data-stu-id="c9e84-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="c9e84-209">Vous ne souhaitez pas les messages incohérents dans cet état dans la file d’attente, où le rôle de travail essaiera en permanence les traiter, échec, essayez à nouveau, échouer, et ainsi de suite.)</span><span class="sxs-lookup"><span data-stu-id="c9e84-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="c9e84-210">Dans l’application frontale de MVC, nous devons mettre à jour le code qui crée une nouvelle tâche.</span><span class="sxs-lookup"><span data-stu-id="c9e84-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="c9e84-211">Au lieu de mettre la tâche dans le référentiel, appelez le `SendMessageAsync` méthode illustrée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="c9e84-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="c9e84-212">Le traitement des Messages de la file d’attente</span><span class="sxs-lookup"><span data-stu-id="c9e84-212">Processing Queue Messages</span></span>

<span data-ttu-id="c9e84-213">Pour traiter les messages dans la file d’attente, nous allons créer un service principal.</span><span class="sxs-lookup"><span data-stu-id="c9e84-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="c9e84-214">Le service de serveur principal s’exécutera une boucle infinie qui effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9e84-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="c9e84-215">Obtenir le message suivant à partir de la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="c9e84-216">Désérialiser le message à une tâche corriger.</span><span class="sxs-lookup"><span data-stu-id="c9e84-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="c9e84-217">Écrire la tâche réparer la base de données.</span><span class="sxs-lookup"><span data-stu-id="c9e84-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="c9e84-218">Pour héberger le service principal, nous allons créer un Service Cloud Azure qui contient un *rôle de travail*.</span><span class="sxs-lookup"><span data-stu-id="c9e84-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="c9e84-219">Un rôle de travail se compose d’un ou plusieurs ordinateurs virtuels qui peuvent effectuer le traitement du serveur principal.</span><span class="sxs-lookup"><span data-stu-id="c9e84-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="c9e84-220">Le code qui s’exécute dans ces machines virtuelles extrairont les messages à partir de la file d’attente dès qu’elles deviennent disponibles.</span><span class="sxs-lookup"><span data-stu-id="c9e84-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="c9e84-221">Pour chaque message, nous allons désérialiser la charge utile JSON et écrire une instance de l’entité corriger il tâche à la base de données à l’aide de la même référentiel que nous avons utilisés précédemment dans la couche web.</span><span class="sxs-lookup"><span data-stu-id="c9e84-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="c9e84-222">Les étapes suivantes montrent comment ajouter un processus de travail de projet de rôle pour une solution qui contient un projet web standard.</span><span class="sxs-lookup"><span data-stu-id="c9e84-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="c9e84-223">Ces étapes ont déjà été effectuées dans le projet corriger que vous pouvez télécharger.</span><span class="sxs-lookup"><span data-stu-id="c9e84-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="c9e84-224">Tout d’abord ajouter un projet de Service Cloud à la solution Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c9e84-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="c9e84-225">Avec le bouton droit de la solution et sélectionnez **ajouter**, puis **nouveau projet**.</span><span class="sxs-lookup"><span data-stu-id="c9e84-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="c9e84-226">Dans le volet gauche, développez **Visual C#** et sélectionnez **Cloud**.</span><span class="sxs-lookup"><span data-stu-id="c9e84-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="c9e84-227">Dans le **nouveau Service Cloud Azure** boîte de dialogue, développez le **Visual C#** nœud dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="c9e84-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="c9e84-228">Sélectionnez **rôle de travail** et cliquez sur l’icône de flèche droite.</span><span class="sxs-lookup"><span data-stu-id="c9e84-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="c9e84-229">(Notez que vous pouvez également ajouter un *rôle web*.</span><span class="sxs-lookup"><span data-stu-id="c9e84-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="c9e84-230">Nous aurions pu exécuter la corriger frontal dans le même Service Cloud, au lieu de son exécution dans un Site Web Azure.</span><span class="sxs-lookup"><span data-stu-id="c9e84-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="c9e84-231">Qui a utilisé pour effectuer des connexions entre les serveurs frontaux et principaux plus facile de coordonner les avantages.</span><span class="sxs-lookup"><span data-stu-id="c9e84-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="c9e84-232">Toutefois, pour simplifier cette démonstration, nous allons conserver le serveur frontal dans une application Azure App Service Web et uniquement en exécutant le serveur principal dans un Service Cloud.)</span><span class="sxs-lookup"><span data-stu-id="c9e84-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="c9e84-233">Un nom par défaut est attribué au rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="c9e84-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="c9e84-234">Pour modifier le nom, pointez la souris sur le rôle de travail dans le volet droit, puis cliquez sur l’icône de crayon.</span><span class="sxs-lookup"><span data-stu-id="c9e84-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="c9e84-235">Cliquez sur **OK** pour terminer la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="c9e84-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="c9e84-236">Cette opération ajoute deux projets à la solution Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c9e84-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="c9e84-237">un projet Windows Azure qui définit le service cloud, y compris les informations de configuration.</span><span class="sxs-lookup"><span data-stu-id="c9e84-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="c9e84-238">Un projet de rôle de travail qui définit le rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="c9e84-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="c9e84-239">Pour plus d’informations, consultez [création d’un projet Azure avec Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="c9e84-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="c9e84-240">Dans le rôle de travail, nous interroger pour les messages en appelant le `ProcessMessageAsync` méthode de la `FixItQueueManager` classe que nous avons vu plus haut.</span><span class="sxs-lookup"><span data-stu-id="c9e84-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="c9e84-241">Le `ProcessMessagesAsync` méthode vérifie s’il existe un message en attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="c9e84-242">Si elle existe, il désérialise le message en un `FixItTask` entité et enregistre l’entité dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="c9e84-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="c9e84-243">Il effectue une boucle jusqu'à ce que la file d’attente est vide.</span><span class="sxs-lookup"><span data-stu-id="c9e84-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="c9e84-244">Charge l’interrogation pour les messages de la file d’attente entraîne une petite transaction, par conséquent, si aucun message n’est en attente d’être traité, le rôle de travail `RunAsync` méthode seconde avant d’interrogation à attendre en appelant `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="c9e84-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="c9e84-245">Dans un projet web, ajouter du code asynchrone automatiquement améliorent les performances, car IIS gère un pool de threads limité.</span><span class="sxs-lookup"><span data-stu-id="c9e84-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="c9e84-246">Qui n’est pas le cas dans un projet de rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="c9e84-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="c9e84-247">Pour améliorer l’évolutivité du rôle de travail, vous pouvez écrire du code multithread ou utiliser du code asynchrone pour implémenter [programmation parallèle](https://msdn.microsoft.com/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e84-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="c9e84-248">L’exemple n’implémente pas la programmation parallèle, mais montre comment rendre le code asynchrone afin de pouvoir implémenter la programmation parallèle.</span><span class="sxs-lookup"><span data-stu-id="c9e84-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="c9e84-249">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="c9e84-249">Summary</span></span>

<span data-ttu-id="c9e84-250">Dans ce chapitre, vous avez vu comment améliorer la réactivité des applications, la fiabilité et l’évolutivité en implémentant le modèle de travail centré sur la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9e84-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="c9e84-251">Il s’agit du dernier 13 modèles traités dans ce livre électronique, mais il existe bien entendu nombreux autres modèles et pratiques qui peuvent vous aider à créer des applications de cloud réussie.</span><span class="sxs-lookup"><span data-stu-id="c9e84-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="c9e84-252">Le [dernier chapitre](more-patterns-and-guidance.md) fournit des liens vers des ressources pour les rubriques qui n’ont pas été traités dans ces 13 modèles.</span><span class="sxs-lookup"><span data-stu-id="c9e84-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="c9e84-253">Ressources</span><span class="sxs-lookup"><span data-stu-id="c9e84-253">Resources</span></span>

<span data-ttu-id="c9e84-254">Pour plus d’informations sur les files d’attente, consultez les ressources suivantes.</span><span class="sxs-lookup"><span data-stu-id="c9e84-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="c9e84-255">Documentation :</span><span class="sxs-lookup"><span data-stu-id="c9e84-255">Documentation:</span></span>

- <span data-ttu-id="c9e84-256">[Partie de files d’attente de stockage Microsoft Azure 1 : Prise en main](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="c9e84-256">[Microsoft Azure Storage Queues Part 1: Getting Started](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="c9e84-257">Article de Roman Schacherl.</span><span class="sxs-lookup"><span data-stu-id="c9e84-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="c9e84-258">[L’exécution de tâches en arrière-plan](https://msdn.microsoft.com/library/ff803365.aspx), chapitre 5 du [déplacement des Applications dans le Cloud, 3e édition](https://msdn.microsoft.com/library/ff728592.aspx) à partir de Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="c9e84-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="c9e84-259">(En particulier, la section [« À l’aide de stockage files d’attente Azure »](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span><span class="sxs-lookup"><span data-stu-id="c9e84-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="c9e84-260">[Meilleures pratiques pour optimiser la rentabilité des Solutions de messagerie basée sur la file d’attente sur Azure et l’extensibilité](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e84-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="c9e84-261">Livre blanc par Valery Mizonov.</span><span class="sxs-lookup"><span data-stu-id="c9e84-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="c9e84-262">[Comparaison des files d’attente Azure et files d’attente du Bus de Service](https://msdn.microsoft.com/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e84-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="c9e84-263">L’article MSDN Magazine, fournit des informations supplémentaires qui peuvent vous aider à choisir le service de file d’attente à utiliser.</span><span class="sxs-lookup"><span data-stu-id="c9e84-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="c9e84-264">L’article mentionne que Service Bus dépend des services ACS pour l’authentification, ce qui signifie que les files d’attente service bus seraient indisponibles lorsque des services ACS n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="c9e84-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="c9e84-265">Toutefois, étant donné que l’article a été écrit, service bus a été modifiée pour pouvoir utiliser [jetons SAP](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) comme alternative à des services ACS.</span><span class="sxs-lookup"><span data-stu-id="c9e84-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="c9e84-266">[Microsoft Patterns and Practices - Guide Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e84-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="c9e84-267">Consultez le manuel de la messagerie asynchrone, les canaux et les filtres de modèle, modèle de compensation des transactions, modèle de consommateurs concurrents, modèle CQRS.</span><span class="sxs-lookup"><span data-stu-id="c9e84-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="c9e84-268">[CQRS voyage](https://msdn.microsoft.com/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="c9e84-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="c9e84-269">Livres sur CQRS par Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="c9e84-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="c9e84-270">Vidéo :</span><span class="sxs-lookup"><span data-stu-id="c9e84-270">Video:</span></span>

- <span data-ttu-id="c9e84-271">[Prévention de défaillance : Création de Services de cloud computing évolutive et robuste](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="c9e84-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="c9e84-272">Série de vidéos de neuf parties par Ulrich Homann, Marc Mercuri et Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="c9e84-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="c9e84-273">Présente les principaux concepts et les principes d’architecture de manière très accessible et intéressante, avec récits tirés de l’expérience de Microsoft Customer Advisory Team (CAT) avec des clients réels.</span><span class="sxs-lookup"><span data-stu-id="c9e84-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="c9e84-274">Pour obtenir une présentation du service de stockage Azure et files d’attente, consultez épisode 5 en commençant à 35:13.</span><span class="sxs-lookup"><span data-stu-id="c9e84-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c9e84-275">[Précédent](distributed-caching.md)
> [Suivant](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="c9e84-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
